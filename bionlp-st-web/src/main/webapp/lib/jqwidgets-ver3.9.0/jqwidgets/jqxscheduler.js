/*
jQWidgets v3.9.0 (2015-Oct)
Copyright (c) 2011-2015 jQWidgets.
License: http://jqwidgets.com/license/
*/

(function(a){if(!a.jqx.scheduler){a.jqx.scheduler={}}a.jqx.jqxWidget("jqxScheduler","",{});a.extend(a.jqx._jqxScheduler.prototype,{defineInstance:function(){var c={altRows:false,autoShowLoadElement:true,columnsHeight:30,columns:[],columnGroups:null,dataview:null,disabled:false,enableHover:true,appointmentOpacity:0.8,headerZIndex:359,height:600,timeRulerWidth:60,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxScheduler raises the 'bindingComplete' event when the binding is completed.",localization:null,ready:null,renderToolBar:null,renderAppointment:null,rendered:null,rendering:null,rtl:false,showToolbar:true,showLegend:false,legendPosition:"bottom",legendHeight:34,rowsHeight:27,touchRowsHeight:36,appointmentsMinHeight:18,touchAppointmentsMinHeight:27,serverProcessing:false,selectionMode:"multiplerows",scrollBarSize:a.jqx.utilities.scrollBarSize,touchScrollBarSize:a.jqx.utilities.touchScrollBarSize,showHeader:true,maxHeight:999999,maxWidth:999999,autoBind:true,showAllDayRow:true,changedAppointments:new Array(),renderMode:"simple",views:new Array(),view:0,min:new a.jqx.date(0),max:new a.jqx.date(9999,12,31),date:new a.jqx.date("todayDate"),colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF","#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8","#E8601A","#FF9639","#F5BD6A","#599994","#115D6E","#D02841","#FF7C41","#FFC051","#5B5F4D","#364651","#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00","#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B","#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63","#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6","#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F","#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825","#993144","#FFA257","#CCA56A","#ADA072","#949681","#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932","#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54","#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3","#444546","#FFBB6E","#F28D00","#D94F00","#7F203B","#583C39","#674E49","#948658","#F0E99A","#564E49","#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17","#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5","#844341","#D5CC92","#BBA146","#897B26","#55591C","#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472","#96003A","#FF7347","#FFBC7B","#FF4154","#642223","#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E","#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7","#7B1A25","#BF5322","#9DA860","#CEA457","#B67818","#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46","#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800","#FF6800","#A0A700","#FF8D00","#678900","#0069A5"],colorSchemes:[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]}],resources:null,contextMenu:true,contextMenuOpen:null,contextMenuClose:null,contextMenuItemClick:null,contextMenuCreate:null,timeZone:null,statuses:{free:"white",tentative:"tentative",busy:"transparent",outOfOffice:"#800080"},appointmentDataFields:{from:"from",to:"to",id:"id",calendarId:"calendarId",description:"description",location:"location",subject:"subject",background:"background",color:"color",borderColor:"borderColor",style:"style",recurrencePattern:"recurrencePattern",recurrenceException:"recurrenceException",draggable:"draggable",resizable:"resizable",resourceId:"resourceId",status:"status",tooltip:"tooltip",hidden:"hidden",allDay:"allDay",timeZone:"timeZone",ownerId:"ownerId"},appointmentTooltips:true,tableColumns:1,tableRows:1,dayNameFormat:"full",touchDayNameFormat:"abbr",toolBarRangeFormat:"dd MMMM yyyy",toolBarRangeFormatAbbr:"dd MM yyyy",columnRenderer:null,exportSettings:{columnsHeader:true,hiddenColumns:false,serverURL:null,characterSet:null,collapsedRecords:false,recordsInView:true,fileName:"jqxScheduler"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:true,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},editDialogDateTimeFormatString:"dd/MM/yyyy hh:mm tt",editDialogDateFormatString:"dd/MM/yyyy",editDialogOpen:null,editDialogCreate:null,editDialogKeyDown:null,editDialogClose:null,toolbarHeight:54,tableZIndex:369,_updating:false,touchMode:"auto",width:800,that:this,beginDrag:null,endDrag:null,dragging:null,timeZones:[{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:false},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:false},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:false},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:true},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:true},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:true},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:false},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:true},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:true},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:true},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:false},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:false},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:true},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:false},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:true},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:true},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:false},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:true},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:true},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:true},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:true},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus",supportsDaylightSavingTime:false},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:true},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:false},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:true},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:true},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:true},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:true},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:true},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:false},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:true},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:true},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:false},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:true},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:false},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:true},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:false},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:true},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:true},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:false},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Rome",supportsDaylightSavingTime:true},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Budapest, Prague",supportsDaylightSavingTime:true},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:true},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia",supportsDaylightSavingTime:true},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:false},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:true},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:true},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:true},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:true},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:true},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:true},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:true},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:true},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:true},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:false},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:false},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:true},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:true},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:true},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:true},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:false},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:true},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:false},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:true},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:true},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:false},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:true},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:false},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:false},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:false},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:false},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:false},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:true},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:true},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:false},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:false},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:true},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:false},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong",supportsDaylightSavingTime:false},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:false},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:true},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:false},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:true},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:false},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:true},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:false},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:false},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:true},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:false},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:true},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:false},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:true},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:true},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:true},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:false},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:true},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:true},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:true},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:true},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:false},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:false},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:true}]};a.extend(true,this,c);this.that=this;return c},createInstance:function(d){var h=this;h._views=new Array();h._view=h.view;for(var e=0;e<h.views.length;e++){if(a.type(h.views[e])==="string"){h._views.push({type:h.views[e]})}else{h._views.push(h.views[e])}}for(var e=0;e<h._views.length;e++){if(h._views[e].type==h.view){h._view=e;break}}if(a.jqx.utilities.scrollBarSize!=15){h.scrollBarSize=a.jqx.utilities.scrollBarSize}if(h.source&&!h.source.dataBind){h.source=new a.jqx.dataAdapter(h.source)}var c=h.source._source.datafields;if(c&&c.length>0){h._camelCase=h.source._source.dataFields!==undefined;h.selectionMode=h.selectionMode.toLowerCase()}if(h.host.attr("tabindex")==null){h.host.attr("tabindex","0")}h.host.attr("role","grid");h.host.attr("align","left");h.host.addClass(h.toTP("jqx-grid"));h.host.addClass(h.toTP("jqx-scheduler"));h.host.addClass(h.toTP("jqx-reset"));h.host.addClass(h.toTP("jqx-rc-all"));h.host.addClass(h.toTP("jqx-widget"));h.host.addClass(h.toTP("jqx-widget-content jqx-disableselect"));if(h._testmodules()){return}h.overlay=a("<div style='z-index: 999; position:absolute;'></div>");h.overlay.hide();h.overlay.appendTo(h.host);h.render(true);a.jqx.utilities.resize(h.host,function(){var l=a(window).width();var i=a(window).height();h._hostWidth=null;h._hostHeight=null;var k=h.host.width();var m=h.host.height();h._hostWidth=k;h._hostHeight=m;if(h._lastHostWidth!=k||h._lastHostHeight!=m){h._updatesize(h._lastHostWidth!=k,h._lastHostHeight!=m)}h._lastWidth=l;h._lastHeight=i;h._lastHostWidth=k;h._lastHostHeight=m});h.editRecurrenceDialog=null;var f=a("<div><div>"+h.schedulerLocalization.editRecurringAppointmentDialogTitleString+"</div><div><div>"+h.schedulerLocalization.editRecurringAppointmentDialogContentString+"</div><div style='position: absolute; white-space:nowrap; text-overflow: ellipsis; left:0px; width:100%; bottom: 0px;'><button title='"+h.schedulerLocalization.editRecurringAppointmentDialogOccurrenceString+"' id='editRecurringAppointmentOccurrence."+h.element.id+"' style='white-space:nowrap; text-overflow: ellipsis; border-left-width: 0px;  border-bottom-width: 0px; border-radius:0px; width:50%;'>"+h.schedulerLocalization.editRecurringAppointmentDialogOccurrenceString+"</button><button title='"+h.schedulerLocalization.editRecurringAppointmentDialogSeriesString+"' id='editRecurringAppointmentSeries."+h.element.id+"' style=' white-space:nowrap; text-overflow: ellipsis; border-bottom-width: 0px;  border-left-width: 0px; border-right-width:0px; width:50%; border-radius:0px;'>"+h.schedulerLocalization.editRecurringAppointmentDialogSeriesString+"</button></div></div></div>");a(f).jqxWindow({rtl:h.rtl,autoFocus:false,animationType:"none",autoOpen:false,theme:h.theme,minWidth:300,minHeight:110,resizable:false});var g=f.find("button");g.jqxButton({theme:h.theme,width:"50%",height:30});var j=false;g.mousedown(function(){j=true;var i=this.id;if(i.indexOf("editRecurringAppointmentOccurrence")>=0){h.editSeries(false)}else{h.editSeries(true)}a(f).jqxWindow("close")});this.addHandler(a(f),"open",function(i){h._raiseEvent("editRecurrenceDialogOpen",{dialog:f,appointment:h.selectedJQXAppointment?h.selectedJQXAppointment.boundAppointment:null})});h.addHandler(a(f),"keydown",function(i){if(i.keyCode==13){if(a(document.activeElement).ischildof(a(f))){if(document.activeElement.nodeName.toLowerCase()=="button"){a(document.activeElement).trigger("mousedown");a(document.activeElement).trigger("mouseup");return true}}}});this.addHandler(a(f),"close",function(i){if(!j){h._removeFeedbackAndStopResize();h.overlay.hide();h.focus();h._raiseEvent("editRecurrenceDialogClose",{dialog:f,appointment:h.selectedJQXAppointment?h.selectedJQXAppointment.boundAppointment:null});return false}j=false;h.overlay.hide();h.focus();h._raiseEvent("editRecurrenceDialogClose",{dialog:f,appointment:h.selectedJQXAppointment?h.selectedJQXAppointment.boundAppointment:null})});h.editRecurrenceDialog=f},_initMenu:function(){var d=this;if(this.host.jqxMenu){if(this.menu){if(this._hasOpenedMenu){return}this.removeHandler(this.menu,"keydown");this.removeHandler(this.menu,"closed");this.removeHandler(this.menu,"itemclick");this.menu.jqxMenu("destroy");this.menu.removeData();this.menu.remove()}this.menuitemsarray=new Array();this.menu=a('<div id="menu.jqxscheduler'+this.element.id+'" style="white-space: nowrap; z-index: 9999999999999;"></div>');this.host.append(this.menu);this.addHandler(a(window),"orientationchange.jqxscheduler"+this.element.id,function(){d.menu.jqxMenu("close");d._hasOpenedMenu=false});this.addHandler(a(window),"orientationchanged.jqxscheduler"+this.element.id,function(){d.menu.jqxMenu("close");d._hasOpenedMenu=false});this.removeHandler(this.menu,"keydown");this.addHandler(this.menu,"keydown",function(f){if(f.keyCode==27){d.menu.jqxMenu("close");d._hasOpenedMenu=false;d.focus()}});this.addHandler(this.menu,"open",function(f){if(d.contextMenuOpen){d.contextMenuOpen(d.menu,d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null,f)}d._raiseEvent("contextMenuOpen",{menu:d.menu,appointment:d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null});d._removeFeedbackAndStopResize()});this.addHandler(this.menu,"close",function(f){if(d.contextMenuClose){d.contextMenuClose(d.menu,d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null,f)}d._hasOpenedMenu=false;if(document.activeElement&&document.activeElement.className.indexOf("jqx-menu")>=0){d.focus()}d._raiseEvent("contextMenuClose",{menu:d.menu,appointment:d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null})});this.addHandler(this.host,"contextmenu",function(f){f.preventDefault();f.stopPropagation();return false});this.addHandler(this.menu,"itemclick",function(i){var h=d.menu.jqxMenu("getItem",i.args.id);d._raiseEvent("contextMenuItemClick",{item:h,menu:d.menu,appointment:d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null});if(d.contextMenuItemClick){var g=d.contextMenuItemClick(d.menu,d.selectedJQXAppointment?d.selectedJQXAppointment.boundAppointment:null,i);if(g==true){if(new Date()-d.renderedTime>500){d._renderrows()}d.menu.jqxMenu("close");d._hasOpenedMenu=false;return}}if(h.id=="createAppointment"){d._initDialog();d._openDialog();if(i.args.clickType=="keyboard"){d.menu.jqxMenu("close");d._hasOpenedMenu=false}}else{if(h.id=="editAppointment"){var f=d.getJQXAppointmentByElement(d.selectedAppointment);if(!f.readOnly){var g=d._initDialog(f);if(g!==false){d._openDialog()}}if(i.args.clickType=="keyboard"){d.menu.jqxMenu("close");d._hasOpenedMenu=false}}else{if(i.args.clickType=="keyboard"){d.menu.jqxMenu("close");d._hasOpenedMenu=false}return true}}});var e=new Array();e.push({label:this.schedulerLocalization.contextMenuEditAppointmentString,id:"editAppointment"});e.push({label:this.schedulerLocalization.contextMenuCreateAppointmentString,id:"createAppointment"});var c={rtl:this.rtl,keyboardNavigation:true,source:e,popupZIndex:999999,autoOpenPopup:false,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0};if(d.contextMenuCreate){d.contextMenuCreate(d.menu,c)}d._raiseEvent("contextMenuCreate",{menu:d.menu,settings:c});this.menu.jqxMenu(c)}},getViewStart:function(){var e=this.getVisibleDate();var c=this._views[this._view].type;var f=this._views[this._view];switch(c){case"dayView":case"timelineDayView":return e}var d=this.getFirstDayOfWeek(e);return d},getViewEnd:function(){var f=this.getViewStart();var e=1;var c=this._views[this._view].type;var d=this._views[this._view];switch(c){case"dayView":case"timelineDayView":e=1;break;case"weekView":case"timelineWeekView":e=7;break;case"monthView":case"timelineMonthView":e=41;break}return f.addDays(e)},getFirstDayOfWeek:function(e){var d=e;var c=this.schedulerLocalization.firstDay;if(c<0||c>6){c=6}while(d.dayOfWeek()!=c){d.addDays(-1,false)}return d},getVisibleDate:function(){var e=this.date;if(e<this.min){e=this.min}if(e>this.max){e=this.max}var c=this._views[this._view].type;var g=this._views[this._view];e=e.clearTime();switch(c){case"dayView":case"weekView":case"timelineDayView":case"timelineWeekView":return e}var f=e.day();var d=e.addDays(-f+1);e=d;return e},_builddataloadelement:function(){if(this.dataloadelement){this.dataloadelement.remove()}this.dataloadelement=a('<div class="jqx-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var d=a('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.schedulerLocalization.loadString+"</span></div></div>");d.addClass(this.toTP("jqx-rc-all"));this.dataloadelement.addClass(this.toTP("jqx-rc-all"));d.addClass(this.toTP("jqx-fill-state-normal"));this.dataloadelement.append(d);this.dataloadelement.width(this.width);this.dataloadelement.height(this.height);this.host.prepend(this.dataloadelement);if(this.source._source.url!=""){var c=false;if(this.height==="auto"||this.height===null||this.autoheight){if(this.maxHeight==999999){c=true}}if(c){this.host.height(100);this.dataloadelement.height(100)}else{this.host.height(this.height);this.dataloadelement.height(this.height)}var e=false;if(this.width==="auto"||this.width===null||this.autoWidth){e=true}if(e){this.host.width(300);this.dataloadelement.width(300)}else{this.host.width(this.width);this.dataloadelement.width(this.width)}}},_measureElement:function(d){var c=a("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");c.addClass(this.toTP("jqx-widget"));a(document.body).append(c);if(d=="cell"){this._cellheight=c.height()}else{this._columnheight=c.height()}c.remove()},_testmodules:function(){var f="";var d=this;var c=function(){if(f.length!=""){f+=","}};if(!this.host.jqxScrollBar){c();f+=" jqxscrollbar.js"}if(!this.host.jqxButton){c();f+=" jqxbuttons.js"}if(!a.jqx.dataAdapter){c();f+=" jqxdata.js"}if(!this.host.jqxDateTimeInput){c();f+=" jqxdatetimeinput.js"}if(!this.host.jqxCalendar){c();f+=" jqxcalendar.js"}try{if(!Globalize){c();f+=" globalize.js"}}catch(e){}if(f!=""){throw new Error("jqxScheduler: Missing references to the following module(s): "+f);this.host.remove();return true}return false},focus:function(){try{if(this.editDialog&&this.editDialog.jqxWindow("isOpen")){var d=this;setTimeout(function(){d.editDialogFields.subject.focus();d.editDialogFields.subject.select()},1);this.focused=true;return}if(document.activeElement==this.element){return}this.host.focus();var d=this;setTimeout(function(){d.host.focus()},25);this.focused=true}catch(c){}},hiddenParent:function(){return a.jqx.isHidden(this.host)},_updatesize:function(i,h){if(this._loading){return}var f=this;var g=f.host.width();var e=f.host.height();if(!f._oldWidth){f._oldWidth=g}if(!f._oldHeight){f._oldHeight=e}if(f._resizeTimer!=undefined){clearTimeout(f._resizeTimer);f._resizeTimer=null}var d=300;var c=function(){if(f._resizeTimer){clearTimeout(f._resizeTimer)}f.resizingGrid=true;if(a.jqx.isHidden(f.host)){return}f._updatecolumnwidths();f.refresh();f._oldWidth=g;f._oldHeight=e;f.resizingGrid=false};c();f._resizeTimer=setTimeout(function(){var k=f.host.width();var j=f.host.height();if(f._oldWidth!=k||f._oldHeight!=j){c()}},d)},resize:function(d,c){if(d!=undefined){this.width=d}if(c!=undefined){this.height=c}this._updatecolumnwidths();this.refresh()},isTouchDevice:function(){if(this.touchDevice!=undefined){return this.touchDevice}var c=a.jqx.mobile.isTouchDevice();this.touchDevice=c;if(this.touchMode==true){c=true;a.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=c}else{if(this.touchMode==false){c=false}}if(c){this.touchDevice=true;this.host.addClass(this.toThemeProperty("jqx-touch"));this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch"));this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch"));this.scrollBarSize=this.touchScrollBarSize}return c},toTP:function(c){return this.toThemeProperty(c)},localizestrings:function(c,d){this._cellscache=new Array();if(a.jqx.dataFormat){a.jqx.dataFormat.cleardatescache()}if(this._loading){throw new Error("jqxScheduler: "+this.loadingErrorMessage);return false}if(c!=null){for(var e in this.schedulerLocalization){if(c[e]){this.schedulerLocalization[e]=c[e]}}if(c.loadingErrorMessage){this.loadingErrorMessage=c.loadingErrorMessage}if(d!==false){this._builddataloadelement();a(this.dataloadelement).css("visibility","hidden");a(this.dataloadelement).css("display","none")}}else{this.schedulerLocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},agendaDateColumn:"Date",agendaTimeColumn:"Time",agendaAppointmentColumn:"Appointment",backString:"Back",forwardString:"Forward",toolBarPreviousButtonString:"previous",toolBarNextButtonString:"next",emptyDataString:"No data to display",loadString:"Loading...",clearString:"Clear",todayString:"Today",dayViewString:"Day",weekViewString:"Week",monthViewString:"Month",timelineDayViewString:"Timeline Day",timelineWeekViewString:"Timeline Week",timelineMonthViewString:"Timeline Month",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxScheduler raises the 'bindingComplete' event when the binding is completed.",editRecurringAppointmentDialogTitleString:"Edit Recurring Appointment",editRecurringAppointmentDialogContentString:"Do you want to edit only this occurrence or the series?",editRecurringAppointmentDialogOccurrenceString:"Edit Occurrence",editRecurringAppointmentDialogSeriesString:"Edit The Series",editDialogTitleString:"Edit Appointment",editDialogCreateTitleString:"Create New Appointment",contextMenuEditAppointmentString:"Edit Appointment",contextMenuCreateAppointmentString:"Create New Appointment",editDialogSubjectString:"Subject",editDialogLocationString:"Location",editDialogFromString:"From",editDialogToString:"To",editDialogAllDayString:"All day",editDialogExceptionsString:"Exceptions",editDialogResetExceptionsString:"Reset on Save",editDialogDescriptionString:"Description",editDialogResourceIdString:"Owner",editDialogStatusString:"Status",editDialogColorString:"Color",editDialogColorPlaceHolderString:"Select Color",editDialogTimeZoneString:"Time Zone",editDialogSelectTimeZoneString:"Select Time Zone",editDialogSaveString:"Save",editDialogDeleteString:"Delete",editDialogCancelString:"Cancel",editDialogRepeatString:"Repeat",editDialogRepeatEveryString:"Repeat every",editDialogRepeatEveryWeekString:"week(s)",editDialogRepeatEveryYearString:"year(s)",editDialogRepeatEveryDayString:"day(s)",editDialogRepeatNeverString:"Never",editDialogRepeatDailyString:"Daily",editDialogRepeatWeeklyString:"Weekly",editDialogRepeatMonthlyString:"Monthly",editDialogRepeatYearlyString:"Yearly",editDialogRepeatEveryMonthString:"month(s)",editDialogRepeatEveryMonthDayString:"Day",editDialogRepeatFirstString:"first",editDialogRepeatSecondString:"second",editDialogRepeatThirdString:"third",editDialogRepeatFourthString:"fourth",editDialogRepeatLastString:"last",editDialogRepeatEndString:"End",editDialogRepeatAfterString:"After",editDialogRepeatOnString:"On",editDialogRepeatOfString:"of",editDialogRepeatOccurrencesString:"occurrence(s)",editDialogRepeatSaveString:"Save Occurrence",editDialogRepeatSaveSeriesString:"Save Series",editDialogRepeatDeleteString:"Delete Occurrence",editDialogRepeatDeleteSeriesString:"Delete Series",editDialogStatuses:{free:"Free",tentative:"Tentative",busy:"Busy",outOfOffice:"Out of Office"}}}},_updateScrollbars:function(s){var k=false;var e=this;if(e.width==="auto"||e.width===null||e.autowidth){if(e.maxWidth==999999){k=true}}var i=e._views[e._view].type;var h=e._views[e._view];if(i=="monthView"&&e.resources&&e.resources.orientation=="none"){var l=e.vScrollBar[0].style.visibility;e.hScrollBar[0].style.visibility="hidden";e.vScrollBar[0].style.visibility="hidden";if((l!=e.vScrollBar[0].style.visibility)){e._updatecolumnwidths()}return}var c=parseInt(e.scrollBarSize);var t=e.table?e.table.height():0;var j=0;var o="inherit";var l=e.vScrollBar[0].style.visibility;var p=e.hScrollBar[0].style.visibility;if(!s){var g=e.host.height()}else{var g=s}if(!e.columnGroups){g-=e.showHeader?e.columnsHeight:0}else{g-=e.showHeader?e.columnsheader.height():0}if(e.filterable){g-=e.filter.height()}if(e.pageable){g-=e.pagerHeight;if(e.pagerPosition==="both"){g-=e.pagerHeight}}if(e.showToolbar){g-=e.toolbarHeight}if(e.showLegend&&e._resources.length>0){g-=e.legendHeight}var n=false;if(e.height==="auto"||e.height===null||e.autoheight){if(e.maxHeight==999999){n=true}}if(!n&&t>g&&(e.getRows().length>0)){e.vScrollBar[0].style.visibility=o;j=4+parseInt(c);e.vScrollBar.jqxScrollBar({max:t-g})}else{e.vScrollBar[0].style.visibility="hidden"}if((l!=e.vScrollBar[0].style.visibility)){e._updatecolumnwidths()}var q=e.table?e.table.width():0;if(q>4){q-=4}var r=parseInt(e.host.css("border-left-width"))+parseInt(e.host.css("border-right-width"));var m=r+e.host.width()-j;if(q>m&&!k){e.hScrollBar[0].style.visibility=o;e.hScrollBar.jqxScrollBar({max:2+r+q-m});j=4+parseInt(c);if(!n&&t!=g){if(t>g-j+4&&(e.getRows().length>0)){e.hScrollBar.jqxScrollBar({max:r+q-m});var d=e.vScrollBar[0].style.visibility==="hidden";e.vScrollBar[0].style.visibility=o;e._updatecolumnwidths();if(d){e.hScrollBar.jqxScrollBar({max:q-m+r})}var f=e.table?e.table.width():0;if(f>3){f-=3}if(f!=q){if(f<m){e.hScrollBar.jqxScrollBar({max:r+f-m});e.hScrollBar[0].style.visibility="hidden";j=0}else{if(!d){e.hScrollBar.jqxScrollBar({max:q-m+r-c})}}}}if(t-g>0){e.vScrollBar.jqxScrollBar({max:t-g+j})}else{e.vScrollBar[0].style.visibility="hidden"}}}else{e.hScrollBar[0].style.visibility="hidden"}if(e.getRows().length===0){e.vScrollBar[0].style.visibility="hidden";e.bottomRight[0].style.visibility="hidden"}if(e.vScrollBar[0].style.visibility=="hidden"){if(e.vScrollInstance.value!=0){e.vScrollInstance.setPosition(0)}}},_measureElementWidth:function(e){var d=a("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>");d.addClass(this.toTP("jqx-widget"));d.addClass(this.toTP("jqx-grid"));d.addClass(this.toTP("jqx-grid-column-header"));d.addClass(this.toTP("jqx-widget-header"));a(document.body).append(d);var c=d.outerWidth()+20;d.remove();return c},_arrangeAutoHeight:function(e){if(!e){e=0}if(this.height==="auto"||this.height===null||this.autoheight){var h=this.table.height();var g=0;if(!this.columnGroups){g+=this.showHeader?this.columnsHeight:-1}else{g+=this.showHeader?this.columnsheader.height():-1}g+=this.showLegend&&this._resources.length>0?this.legendHeight:0;g+=this.showToolbar?this.toolbarHeight:0;g+=this.pageable?this.pagerHeight:0;if(this.pagerPosition==="both"){g+=this.pageable?this.pagerHeight:0}g+=h;if(this.filterable){var f=this.filter.find(".filterrow");var c=this.filter.find(".filterrow-hidden");var d=1;if(c.length>0){d=0}g+=this.filterHeight-1+this.filterHeight*f.length*d}if(g+e>this.maxHeight){this.host.height(this.maxHeight)}else{this.host.height(g+e)}return true}return false},_arrangeAutoWidth:function(e){if(!e){e=0}if(this.width==="auto"||this.width===null||this.autowidth){var d=0;for(var f=0;f<this.columns.records.length;f++){var c=this.columns.records[f].width;if(this.columns.records[f].hidden){continue}if(c=="auto"){c=this._measureElementWidth(this.columns.records[f].text);d+=c}else{d+=c}}width=d;if(width+e>this.maxWidth){this.host.width(this.maxWidth)}else{this.host.width(width+e)}return true}return false},_measureTopAndHeight:function(){var c=this.host.height();var d=0;if(this.showToolbar){d+=this.toolbarHeight;c-=parseInt(this.toolbarHeight)}if(this.showLegend&&this.legendPosition!="bottom"&&this._resources.length>0){d+=parseInt(this.legendHeight)+1}return{top:d,height:c}},_arrange:function(){if(!this.table){return}this._arrangeAutoHeight();this._arrangeAutoWidth();var e=this.legendHeight;if(this._resources.length==0){e=0}var u=this._hostWidth?this._hostWidth:this.host.width();var r=this._hostHeight?this._hostHeight:this.host.height();var k=r;var j=this;if(this.showLegend&&this.legendPosition=="top"){this.legendbartop[0].style.visibility="inherit"}else{this.legendbartop[0].style.visibility="hidden"}var q=0;if(this.showToolbar){this.toolbar.width(u);this.toolbar[0].style.height=this.toolbarHeight-1+"px";this.toolbar[0].style.top="0px";q+=this.toolbarHeight;r-=parseInt(this.toolbarHeight)}else{this.toolbar[0].style.height="0px"}if(this.showLegend&&this.legendPosition=="bottom"){this.legendbarbottom[0].style.width=u+"px";this.legendbarbottom[0].style.height=e+"px"}else{this.legendbarbottom[0].style.height="0px"}if(this.showLegend&&this.legendPosition=="top"){if(this.legendbartop[0].style.width!=u+"px"){this.legendbartop[0].style.width=parseInt(u)+"px"}if(this.legendbartop[0].style.height!=e+"px"){this.legendbartop[0].style.height=parseInt(e-1)+"px"}if(this.legendbartop[0].style.top!=q+"px"){this.legendbartop[0].style.top=q+"px"}var f=q+e+"px";if(this.content[0].style.top!=f){q=q+e;this.content[0].style.top=q+"px"}}this._updateScrollbars(k);var c=parseInt(this.scrollBarSize);var n=4;var g=2;var h=0;if(this.vScrollBar[0].style.visibility!="hidden"){h=c+n}if(this.hScrollBar[0].style.visibility!="hidden"){g=c+n+2}if("hidden"!=this.vScrollBar[0].style.visibility||"hidden"!=this.hScrollBar[0].style.visibility){var v=this._arrangeAutoHeight(g-2);var s=this._arrangeAutoWidth(h+1);if(v||s){this.legendbartop[0].style.width=parseInt(u)+"px";this.toolbar[0].style.width=parseInt(u)+"px";this.legendbarbottom[0].style.width=parseInt(u)+"px";this.filter[0].style.width=parseInt(u)+"px"}if(v){var x=this._measureTopAndHeight();q=x.top;r=x.height}}var o=0;if(this.showLegend&&this.legendPosition=="bottom"){g+=e;o+=e}else{if(this.showLegend){g+=e}}if(this.hScrollBar[0].style.height!=c+"px"){this.hScrollBar[0].style.height=parseInt(c)+"px"}if(this.hScrollBar[0].style.top!=q+r-n-c-o+"px"||this.hScrollBar[0].style.left!="0px"){this.hScrollBar[0].style.top=q+r-n-c-o-1+"px";this.hScrollBar[0].style.left="0px"}var m=this.hScrollBar[0].style.width;var i=false;var w=false;if(h==0){if(m!=(u-2)+"px"){this.hScrollBar[0].style.width=(u-2)+"px";i=true}}else{if(m!=(u-c-n)+"px"){this.hScrollBar[0].style.width=(u-c-n+"px");i=true}}if(this.vScrollBar[0].style.width!=c+"px"){this.vScrollBar[0].style.width=c+"px";w=true}if(this.vScrollBar[0].style.height!=parseInt(r)-g+"px"){this.vScrollBar[0].style.height=(parseInt(r)-g+"px");w=true}if(this.vScrollBar[0].style.left!=parseInt(u)-parseInt(c)-n+"px"||this.vScrollBar[0].style.top!=q+"px"){this.vScrollBar[0].style.top=q+"px";this.vScrollBar[0].style.left=parseInt(u)-parseInt(c)-n+"px"}if(this.rtl){this.vScrollBar.css({left:"0px",top:q});if(this.vScrollBar.css("visibility")!="hidden"){this.hScrollBar.css({left:c+2})}}var l=this.vScrollInstance;l.disabled=this.disabled;var t=this.hScrollInstance;t.disabled=this.disabled;if(i){t.refresh()}if(w){l.refresh()}var p=function(y){if((y.vScrollBar[0].style.visibility!="hidden")&&(y.hScrollBar[0].style.visibility!="hidden")){y.bottomRight[0].style.visibility="inherit";y.bottomRight[0].style.left=1+parseInt(y.vScrollBar.css("left"))+"px";y.bottomRight[0].style.top=parseInt(y.hScrollBar.css("top"))+"px";if(y.rtl){y.bottomRight.css("left","0px")}y.bottomRight[0].style.width=parseInt(c)+3+"px";y.bottomRight[0].style.height=parseInt(c)+4+"px"}else{y.bottomRight[0].style.visibility="hidden"}};p(this);if(this.content[0].style.width!=u-h+"px"){this.content[0].style.width=u-h+"px"}if(this.content[0].style.height!=r-g+3+"px"){this.content[0].style.height=r-g+3+"px"}if(this.content[0].style.top!=q+"px"){this.content[0].style.top=parseInt(q)+"px"}if(this.rtl){this.content.css("left",h)}if(this.showLegend&&this.legendPosition=="bottom"){this.legendbarbottom.css("top",q-1+r-e-(this.pageable?this.pagerHeight:0));if(this.rtl){if(this.hScrollBar.css("visibility")=="hidden"){this.legendbarbottom.css("left",this.content.css("left"))}else{this.legendbarbottom.css("left","0px")}}}this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length;this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length;if(u!=parseInt(this.dataloadelement[0].style.width)){this.dataloadelement[0].style.width=this.element.style.width}if(r!=parseInt(this.dataloadelement[0].style.height)){this.dataloadelement[0].style.height=this.element.style.height}this._hostWidth=u;this._hostHeight=k;var d=this.schedulercontent.coord();this._tableOffset=d},scrollOffset:function(e,d){if(arguments.length==0||(e!=null&&typeof(e)=="object"&&!e.top)){return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")}}if(e!=null&&typeof(e)=="object"){var d=e.left;var c=e.top;var e=c}if(e==null||d==null||e==undefined||d==undefined){return}this.vScrollBar.jqxScrollBar("setPosition",e);this.hScrollBar.jqxScrollBar("setPosition",d)},scrollleft:function(c){if(c==null||c==undefined){return}if(this.hScrollBar.css("visibility")!="hidden"){this.hScrollBar.jqxScrollBar("setPosition",c)}},scrolltop:function(c){if(c==null||c==undefined){return}if(this.vScrollBar.css("visibility")!="hidden"){this.vScrollBar.jqxScrollBar("setPosition",c)}},beginAppointmentsUpdate:function(){this._appupdating=true},endAppointmentsUpdate:function(){this._appupdating=false;this._renderrows()},beginUpdate:function(){this._updating=true;this._datachanged=false},endUpdate:function(c){this._updating=false;if(c===false){return}this._rendercolumnheaders();this.refresh()},updating:function(){return this._updating},databind:function(i,j,d){if(this.loadingstate===true){return}if(this.host.css("display")=="block"){if(this.autoShowLoadElement){a(this.dataloadelement).css("visibility","visible");a(this.dataloadelement).css("display","block");this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height())}else{a(this.dataloadelement).css("visibility","hidden");a(this.dataloadelement).css("display","none")}}var h=this;if(i==null){i={}}if(i.sortcomparer==undefined||i.sortcomparer==null){i.sortcomparer=null}if(i.filter==undefined||i.filter==null){i.filter=null}if(i.sort==undefined||i.sort==null){i.sort=null}if(i.data==undefined||i.data==null){i.data=null}var f=null;if(i!=null){f=i._source!=undefined?i._source.url:i.url}this.dataview=this.dataview||new a.jqx.scheduler.dataView("dataView");this.resourcesDataView=this.resourcesDataView||new a.jqx.scheduler.dataView("resourcesDataView");this.dataview.pageable=this.pageable;this.dataview.scheduler=this;this.resourcesDataView.scheduler=this;this._loading=true;this.appointments=new Array();this.uiappointments=new Array();var c=1;if(this.resources&&this.resources.source){c=2}var e=0;var g=function(){if(e==c){var l=h._resources.length>1?h._resources.length:1;if(h.resources&&h.resources.orientation==="horizontal"){h.tableColumns=l;h.tableRows=1}else{if(h.resources&&h.resources.orientation==="vertical"){h.tableRows=l;h.tableColumns=1}else{h.tableColumns=1;h.tableRows=1}}h._render();if(h.autoShowLoadElement&&!h._loading){a(h.dataloadelement).css("visibility","hidden");a(h.dataloadelement).css("display","none")}h._updateTouchScrolling();h._raiseEvent("bindingComplete");if(d){d()}if(!h.initializedcall){h.initializedcall=true;h.isInitialized=true;if((h.width!=null&&h.width.toString().indexOf("%")!=-1)||(h.height!=null&&h.height.toString().indexOf("%")!=-1)){h._updatesize(true)}if(h.ready){h.ready()}if(h.host.css("visibility")=="hidden"){var k=a.jqx.browser.msie&&a.jqx.browser.version<8;if(h.vScrollBar.css("visibility")=="visible"){h.vScrollBar.css("visibility","inherit")}if(h.hScrollBar.css("visibility")=="visible"){h.hScrollBar.css("visibility","inherit")}h._intervalTimer=setInterval(function(){if(h.host.css("visibility")=="visible"){h._updatesize(true);clearInterval(h._intervalTimer)}},100)}}}};this.dataview.update=function(B){h._loading=false;h.appointmentsByKey=new Array();var H=h.source._source.datafields;if(h.groups&&h.groups.length>0){var t=Object.prototype.toString;var l=h.groups[0];Object.prototype.toString=(typeof l=="function")?l:function(){return this[l]};if(!h.source.records.sort){var y=new Array();var q=0;a.each(data,function(){y[startindex+q++]=this});data=y}h.source.records.sort(function(L,K){if(L===undefined){L=null}if(K===undefined){K=null}if(L===null&&K===null){return 0}if(L===null&&K!==null){return -1}if(L!==null&&K===null){return 1}var O=0;var N=0;if(L&&L.uid){O=L.uid}if(K&&K.uid){N=K.uid}L=L.toString();K=K.toString();if(a.jqx.dataFormat.isNumber(L)&&a.jqx.dataFormat.isNumber(K)){if(L<K){return -1}if(L>K){return 1}return 0}else{if(a.jqx.dataFormat.isDate(L)&&a.jqx.dataFormat.isDate(K)){if(L<K){return -1}if(L>K){return 1}return 0}else{if(!a.jqx.dataFormat.isNumber(L)&&!a.jqx.dataFormat.isNumber(K)){L=String(L).toLowerCase();K=String(K).toLowerCase()}}}try{if(L<K){return -1}if(L>K){return 1}}catch(M){var P=M}if(typeof(O)=="number"){if(O<N){return -1}if(O>N){return 1}}return 0});Object.prototype.toString=t}var o=["from","to","id","style","description","location","subject","background","color","borderColor","recurrencePattern","recurrenceException","draggable","resizable","tooltip","hidden","allDay","timeZone","ownerId","resourceId"];var m=new Array();for(var C=0;C<h.source.records.length;C++){var p=h.source.records[C];var n={};for(var J in h.appointmentDataFields){var l=h.appointmentDataFields[J];var A=p[l];if(J=="from"||J=="to"){A=new a.jqx.date(A)}if(J=="style"){if(A){var u=h.getAppointmentColors(A);n.color=u.color;n.background=u.background;n.borderColor=u.border}}if(J=="recurrencePattern"){if(A){A=new a.jqx.scheduler.recurrencePattern(A);A.timeZone=p.timeZone||h.timeZone}}if(J=="recurrenceException"){var E=new Array();if(A){if(A.indexOf("EXDATE:")>=0){A=A.substring(A.indexOf("EXDATE:")+7)}var v=new Array();if(A.indexOf(",")>=0){v=A.split(",")}else{v.push(A)}for(var D=0;D<v.length;D++){var z=v[D];if(z.indexOf(";")>=0){var r=z.split(";")[1];z=z.split(";")[0];if(r.toLowerCase().indexOf("display")>=0&&r.toLowerCase().indexOf("none")){n.hidden=true}}try{var G=a.jqx.scheduler.utilities.untilStringToDate(z);if(G!="Invalid Date"){if(n.timeZone){G=new a.jqx.date(G,n.timeZone)}else{if(h.timeZone){G=G.toTimeZone(h.timeZone)}else{G=new a.jqx.date(G)}}}}catch(I){var G=new a.jqx.date(z,h.timeZone)}E.push(G)}}A=E}n[J]=A}for(var w in o){var J=o[w];if(n[J]==undefined){var A="";if(J=="originalData"){continue}if(J=="ownerId"){A=null}if(J=="timeZone"){A=null}if(J=="recurrencePattern"){A=null}if(J=="recurrenceException"){A=null}if(J=="allDay"){A=false}if(J=="draggable"){A=true}if(J=="resizable"){A=true}if(J=="hidden"){A=false}if(J=="resourceId"){A=null}if(J=="from"){A=new a.jqx.date()}if(J=="to"){A=new a.jqx.date().addHours(1)}n[J]=A}}n.originalData=p;if(h.resources&&!h.resources.source){if(m.indexOf(n.resourceId)==-1){m.push(n.resourceId)}}h.appointmentsByKey[p.uid]=n;h.appointments.push(n);var x=new a.jqx.scheduler.appointment(n);if(n.timeZone){x.from=x.from.toTimeZone(n.timeZone);x.to=x.to.toTimeZone(n.timeZone)}if(h.timeZone){if(!n.timeZone){x.timeZone=h.timeZone}x.from=x.from.toTimeZone(h.timeZone);x.to=x.to.toTimeZone(h.timeZone)}else{x.from=x.from.toTimeZone(null);x.to=x.to.toTimeZone(null)}n.jqxAppointment=x;if(n.recurrenceException){for(var F=0;F<n.recurrenceException.length;F++){var G=x.recurrenceException[F];var s=x.clone();s.occurrenceFrom=G;var k=x.duration();if(h.allDay){k=new a.jqx.timeSpan(10000*(h.to-h.from))}s.from=G;s.to=G.add(k);s.rootAppointment=x;s.hidden=true;x.exceptions.push(s)}}x.boundAppointment=n;x.scheduler=h;h.uiappointments.push(x)}h._resources=m;e++;g()};this.resourcesDataView.update=function(k){if(h.resources.dataField){h._resources=new Array();for(var l=0;l<k.length;l++){if(h._resources.indexOf(k[l][h.resources.dataField])>=0){continue}h._resources.push(k[l][h.resources.dataField])}}else{h._resources=k}if(h.resources.orientation==undefined){h.resources.orientation="none"}e++;g()};this.dataview.databind(i);if(this.resources&&this.resources.source){this.resourcesDataView.databind(this.resources.source)}},_raiseEvent:function(h,d){if(d==undefined){d={owner:null}}var e=h;var f=d;f.owner=this;var g=new a.Event(e);g.owner=this;g.args=f;var c=this.host.trigger(g);d=g.args;return c},ensureAppointmentVisible:function(c){if(this.appointmentsByKey[c]){return this._ensureAppointmentVisible(this.appointmentsByKey[c].jqxAppointment)}return false},_ensureAppointmentVisible:function(i){if(this.vScrollBar[0].style.visibility==="hidden"&&this.hScrollBar[0].style.visibility==="hidden"){return false}if(!i){return false}var E=i.id;var r=a('[data-key="'+E+'"]');if(r.length>0){var d=r[0]}else{if(i.elements&&i.elements.length>0){var g=i.elements[0];var d=g.element}else{return false}}var x=this.vScrollInstance.value;var w=this.hScrollInstance.value;if(this.rtl){var w=this.hScrollInstance.max-w}var q=this.element.clientHeight;var t=this.element.clientWidth;var z=0;if(!this.columnGroups){z+=this.showHeader?this.columnsHeight:0}else{z+=this.showHeader?this.columnsheader.height():0}var p=this._views[this._view].type;var m=this._views[this._view];var B=0;if(p=="dayView"||p=="weekView"){var v=this.showAllDayRow;if(m.timeRuler&&(p==="dayView"||p==="weekView")){if(m.timeRuler.showAllDayRow!=undefined){v=m.timeRuler.showAllDayRow}}if(v){if(this.tableRows==1){B=this.table[0].rows[0].clientHeight}else{B=this.table[0].rows[1].clientHeight}}var o=i.duration().days()>=1||i.allDay;if(o&&this.tableRows==1&&this.tableColumns==1){return false}}if(this.showToolbar){z+=this.toolbarHeight}q-=z;if(this.showLegend&&this._resources.length>0){q-=this.legendHeight}var f=0;var k=0;var e=x-f;var A=q+e-B;var u=w-k;var D=t+u;var C=d;C=a(C);var h=C[0].clientHeight;var j=C.position().top-B;var l=j+h;if(j<=e){var y=j;if(y<0){y=0}if(!o||(o&&this.tableRows>1)){this.vScrollBar.jqxScrollBar("setPosition",y)}}else{if(j>=A){var y=j;if(y<0){y=0}if(!o||(o&&this.tableRows>1)){this.vScrollBar.jqxScrollBar("setPosition",y-2)}}}var s=C.position().left;s=Math.round(s);var c=s+C.outerWidth();if(Math.round(C.position().left)===0){this.hScrollBar.jqxScrollBar("setPosition",0)}if(s<=u){var n=s-C.outerWidth()+k;if(n<0){n=0}if(!this.rtl){this.hScrollBar.jqxScrollBar("setPosition",s)}else{this.hScrollBar.jqxScrollBar("setPosition",this.hScrollBar.jqxScrollBar("max")-s)}}if(s>D){if(!this.rtl){this.hScrollBar.jqxScrollBar("setPosition",s)}else{this.hScrollBar.jqxScrollBar("setPosition",this.hScrollBar.jqxScrollBar("max")-s)}}},ensureDateVisible:function(e,m){var h=this;var n=a.type(e)=="date"?e:e.toDate();for(var g=0;g<h.rows.length;g++){for(var f=0;f<h.rows[g].cells.length;f++){var l=h.rows[g].cells[f];if(m){if(l.getAttribute("data-view")!==m){continue}}var k=l.getAttribute("data-date");var c=h._getDateByString;var d=c(k);if(d.valueOf()==n.valueOf()){return h.ensureVisible(l)}}}},ensureVisible:function(c){if(this.vScrollBar[0].style.visibility==="hidden"&&this.hScrollBar[0].style.visibility==="hidden"){return false}var u=this.vScrollBar.jqxScrollBar("value");var t=this.hScrollBar.jqxScrollBar("value");if(this.rtl){t=this.hScrollBar.jqxScrollBar("max")-t}var n=this._hostHeight;var q=this._hostWidth;var x=0;if(!this.columnGroups){x+=this.showHeader?this.columnsHeight:0}else{x+=this.showHeader?this.columnsheader.height():0}if(this.showToolbar){x+=this.toolbarHeight}n-=x;if(this.showLegend&&this._resources.length>0){n-=this.legendHeight}if(this.hScrollBar.css("visibility")!="hidden"){n-=20}var f=0;var i=0;var m=this._views[this._view].type;var k=this._views[this._view];var z=0;if(m=="dayView"||m=="weekView"){var s=this.showAllDayRow;if(k.timeRuler&&(m==="dayView"||m==="weekView")){if(k.timeRuler.showAllDayRow!=undefined){s=k.timeRuler.showAllDayRow}}if(s){if(this.tableRows==1){z=this.table[0].rows[0].clientHeight}else{z=this.table[0].rows[1].clientHeight}}}var e=u-f;var y=n+e-z;var r=t-i;var B=q+r;var A=c;A=a(A);var g=A.position().top-z;var j=g+A.outerHeight();var p=A.position().left;p=Math.round(p);var d=p+A.outerWidth();if(Math.round(A.position().left)===0){this.hScrollBar.jqxScrollBar("setPosition",0)}if(p<=r){var l=p-A.outerWidth()+i;if(l<0){l=0}if(!this.rtl){this.hScrollBar.jqxScrollBar("setPosition",l)}else{this.hScrollBar.jqxScrollBar("setPosition",this.hScrollBar.jqxScrollBar("max")-l)}}if(d>=B){if(!this.rtl){this.hScrollBar.jqxScrollBar("setPosition",2+i+d-q)}else{this.hScrollBar.jqxScrollBar("setPosition",this.hScrollBar.jqxScrollBar("max")-(2+i+d-q))}}var h=A.parent().index();if(this.tableRows>0){h--}if(Math.round(A.position().top)===0||h===0){return this.vScrollBar.jqxScrollBar("setPosition",0)}else{var o=this.table[0].rows.length-1;var w=this.table[0].rows[o];if(w[0]===A.parent()[0]){return this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max"))}}if(g<=e){var v=g;if(v<0){v=0}return this.vScrollBar.jqxScrollBar("setPosition",v)}if(j>=y){return this.vScrollBar.jqxScrollBar("setPosition",4+j-n+z)}},getColumn:function(c){var d=null;if(this.columns.records){a.each(this.columns.records,function(){if(this.datafield==c||this.displayfield==c){d=this;return false}})}return d},_setcolumnproperty:function(d,f,g){if(d==null||f==null||g==null){return null}f=f.toLowerCase();var e=this.getColumn(d);if(e==null){return}var h=e[f];e[f]=g;var c=this.getColumn(d);if(c!=null){c[f]=g}switch(f){case"text":case"hidden":case"hideable":case"renderer":case"align":case"cellsalign":case"contenttype":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":if(f=="align"){this._rendercolumnheaders();this.refresh()}else{if(f=="text"||f=="class"||f=="hidden"||f=="pinned"||f=="resizable"||f=="renderer"){this._rendercolumnheaders();this.refresh()}else{if(f=="width"||f=="maxwidth"||f=="minwidth"){e._width=null;e._percentagewidth=null;this._updatecolumnwidths();this.refresh()}else{this.refresh()}}}break}},getColumnProperty:function(c,e){if(c==null||e==null){return null}e=e.toLowerCase();var d=this.getColumn(c);return d[e]},setColumnProperty:function(c,d,e){this._setcolumnproperty(c,d,e)},hideColumn:function(c){this._setcolumnproperty(c,"hidden",true)},showColumn:function(c){this._setcolumnproperty(c,"hidden",false)},updateBoundData:function(d,c){this.databind(this.source,d,c)},_refreshColumns:function(){this._initializeColumns();this.columnsheader=this.columnsheader||a('<div style="overflow: hidden;"></div>');this.columnsheader.children().remove();var c=this.columnsHeight;c=this._preparecolumnGroups();this.columnsheader.height(c);this._rendercolumnheaders()},_refreshColumnTitles:function(){var q=this._views[this._view].type;var p=this._views[this._view];var m=this;var e=new Array();if(m.columns.records[0].timeColumn){e.push({})}if(p.timeRuler&&p.timeRuler.timeZones){for(var w=0;w<p.timeRuler.timeZones.length;w++){e.push({})}}var r=function(B,H,J){var C="halfHour";if(p.timeRuler&&p.timeRuler.scale){C=p.timeRuler.scale}var L=24;var A=0;var K=23;if(p.timeRuler){if(p.timeRuler.scaleStartHour!=undefined){var A=parseInt(p.timeRuler.scaleStartHour)}if(p.timeRuler.scaleEndHour!=undefined){var K=parseInt(p.timeRuler.scaleEndHour)}if(A<0){A=0}if(K<0){K=23}if(A>23){A=0}if(K>23){K=23}L=K-A+1}var E=60;var I=2;if(C){switch(C){case"sixtyMinutes":case"hour":I=1;break;case"thirdyMinutes":case"halfHour":I=2;break;case"fifteenMinutes":case"quarterHour":I=4;break;case"tenMinutes":I=6;break;case"fiveMinutes":I=12;break}}var N=new Array();var M="auto";if(p.timeRuler&&p.timeRuler.formatString){M=p.timeRuler.formatString}var z=A;var F=L;var j=B.addHours(z);for(var G=0;G<F;G++){var y=j.toDate();if(M==="auto"){if((y.getHours()==0&&y.getMinutes()==0)||(y.getHours()==12&&y.getMinutes()==0)){var D="hh tt"}else{var D="hh:mm"}}else{if(a.isFunction(M)){var D=M(y)}}if(a.jqx.dataFormat.isDate(y)){y=a.jqx.dataFormat.formatdate(y,D,m.schedulerLocalization)}j=j.addMinutes(E);e.push({});m.columns.records[e.length-1].text=y}};var l=this.tableColumns;for(var u=0;u<this.tableColumns;u++){switch(q){case"dayView":var h=this.getViewStart();if(false===p.showWeekends){if(h.dayOfWeek()===0||h.dayOfWeek()===6){h=h.addDays(1)}if(h.dayOfWeek()===0||h.dayOfWeek()===6){h=h.addDays(1)}}e.push({});this.columns.records[e.length-1].text=this._getDayName(h.dayOfWeek());break;case"weekView":case"monthView":for(var w=0;w<7;w++){var v=this.schedulerLocalization.firstDay+w;if(false===p.showWeekends){if(w===0||w===6){continue}}e.push({});this.columns.records[e.length-1].text=this._getDayName(v)}break;case"timelineDayView":var g=m._resources[u]?m._resources[u]:"Resource"+u;r(m.getViewStart(),g);break;case"timelineWeekView":for(var w=0;w<7;w++){var v=this.schedulerLocalization.firstDay+w;if(false===p.showWeekends){if(w===0||w===6){continue}}r(m.getViewStart().addDays(w),this._getDayName(v))}break;case"timelineMonthView":var o=m.getViewStart();var x="auto";if(p.timeRuler&&p.timeRuler.formatString){x=p.timeRuler.formatString}for(var w=0;w<41;w++){var v=o.dayOfWeek();if(false===p.showWeekends){if(v===0||v===6){continue}}var s=o.toDate();if(x==="auto"){var d="dd";s=o.toDate();if(s.getDate()===1){d="MMM dd"}}else{if(a.isFunction(x)){var d=x(s)}}if(a.jqx.dataFormat.isDate(s)){s=a.jqx.dataFormat.formatdate(s,d,m.schedulerLocalization)}o=o.addDays(1);e.push({});m.columns.records[e.length-1].text=s}break}}var k=m.columnsHeight;var c=function(j,y){var i=m.columnGroupslevel*m.columnsHeight;i=i-(y.level*m.columnsHeight);return i};var t=0;for(var w=0;w<this.columns.records.length;w++){var f=this.columns.records[w];if(f.timeColumn){continue}if(m.columnGroups){if(m.columnGroups.length){k=c(f.datafield,f)}}var n=f.renderer!=null?f.renderer(f.text,f.align,k):m._rendercolumnheader(f.text,f.align,k,f);if(n==null){n=m._rendercolumnheader(f.text,f.align,k,m)}if(f.renderer!=null){n=a(n)}a(f.element).html(n)}},refresh:function(d){if(d!=true){var c=this;if(a.jqx.isHidden(c.host)){return}c.table[0].style.top="0px";c.vScrollInstance.setPosition(0);c._renderrows();c._arrange();c._renderhorizontalscroll();c._updateTouchScrolling();c._refreshToolBar();c._updateFocusedCell()}},_updateFocusedCell:function(){var k=this;if(k.focusedCell){k._updateCellsSelection();return}var e=k._views[k._view].type;var h=k._views[k._view];var d=k.showAllDayRow;if(h.timeRuler&&(e==="dayView"||e==="weekView")){if(h.timeRuler.showAllDayRow!=undefined){d=h.timeRuler.showAllDayRow}}if(!d||(e!="dayView"&&e!="weekView")){k.focusedCell=k.rows[0].cells[0];if(k.rtl){k.focusedCell=k.rows[0].cells[k.rows[0].cells.length-1]}}else{k.focusedCell=k.rows[1].cells[0];if(k.rtl){k.focusedCell=k.rows[1].cells[k.rows[1].cells.length-1]}}if(k.focusedCell.className.indexOf("jqx-scheduler-disabled-cell")>=0){k.focusedCell=null;for(var g=0;g<this.rows.length;g++){for(var f=0;f<this.rows[g].cells.length;f++){var c=this.rows[g].cells[f];if(c.className.indexOf("jqx-scheduler-disabled-cell")==-1){k.focusedCell=c;break}}if(k.focusedCell){break}}}k._lastSelectedCell=k.focusedCell;k._updateCellsSelection()},_updateTouchScrolling:function(){var d=this.that;return;if(d.isTouchDevice()){var f=a.jqx.mobile.getTouchEventName("touchstart");var e=a.jqx.mobile.getTouchEventName("touchend");var c=a.jqx.mobile.getTouchEventName("touchmove");if(d.schedulercontent){d.removeHandler(d.schedulercontent,f+".touchScroll");d.removeHandler(d.schedulercontent,c+".touchScroll");d.removeHandler(d.schedulercontent,e+".touchScroll");d.removeHandler(d.schedulercontent,"touchcancel.touchScroll");a.jqx.mobile.touchScroll(d.schedulercontent[0],Math.max(d.vScrollInstance.max,d.hScrollInstance.max),function(i,h){if(d.vScrollBar.css("visibility")!="hidden"){var g=d.vScrollInstance.value;d.vScrollInstance.setPosition(g+h)}if(d.hScrollBar.css("visibility")!="hidden"){var g=d.hScrollInstance.value;d.hScrollInstance.setPosition(g+i)}d.scrolled=new Date();d.vScrollInstance.thumbCapture=true},this.element.id,this.hScrollBar,this.vScrollBar)}}},scrollWidth:function(){return this.hScrollInstance.max},scrollHeight:function(){return this.vScrollInstance.max},scrollLeft:function(c){if(this.hScrollBar[0].style.visibility!="hidden"){this.hScrollInstance.setPosition(c)}},scrollTop:function(c){if(this.vScrollBar[0].style.visibility!="hidden"){this.vScrollInstance.setPosition(c)}},render:function(j){var f="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='legendbartop' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='legendbarbottom' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerHTML=f;this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toTP("jqx-reset"));var h=this.host.find("#verticalScrollBar"+this.element.id);var l=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal"));if(this.vScrollBar){this.vScrollBar.jqxScrollBar("destroy")}if(this.hScrollBar){this.hScrollBar.jqxScrollBar("destroy")}this.vScrollBar=h.jqxScrollBar({vertical:true,rtl:this.rtl,touchMode:this.touchMode,theme:this.theme,_triggervaluechanged:false});this.hScrollBar=l.jqxScrollBar({vertical:false,rtl:this.rtl,touchMode:this.touchMode,theme:this.theme,_triggervaluechanged:false});this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=a.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=a.data(this.hScrollBar[0],"jqxScrollBar").instance;this.pager=this.host.find("#pager");this.pager[0].id="pager"+this.element.id;this.toolbar=this.host.find("#toolbar");this.toolbar[0].id="toolbar"+this.element.id;this.toolbar.addClass(this.toTP("jqx-scheduler-toolbar"));this.toolbar.addClass(this.toTP("jqx-widget-header"));this.legendbarbottom=this.host.find("#legendbarbottom");this.legendbarbottom[0].id="legendbarbottom"+this.element.id;this.legendbarbottom.addClass(this.toTP("jqx-scheduler-legend-bar-bottom"));this.legendbarbottom.addClass(this.toTP("jqx-scheduler-legend-bar"));this.legendbarbottom.addClass(this.toTP("jqx-widget-header"));this.pager.addClass(this.toTP("jqx-grid-pager"));this.pager.addClass(this.toTP("jqx-widget-header"));this.legendbartop=this.host.find("#legendbartop");this.legendbartop.addClass(this.toTP("jqx-scheduler-legend-bar-top"));this.legendbartop.addClass(this.toTP("jqx-scheduler-legend-bar"));this.legendbartop.addClass(this.toTP("jqx-widget-header"));this.schedulertable=null;if(this.localizestrings){this.localizestrings();if(this.localization!=null){this.localizestrings(this.localization,false)}}this._builddataloadelement();this._cachedcolumns=this.columns;var c=this.source.datafields;if(c==null&&this.source._source){c=this.source._source.datafields}if(c){for(var d=0;d<this.columns.length;d++){var e=this.columns[d];if(e&&e.cellsFormat&&e.cellsFormat.length>2){for(var k=0;k<c.length;k++){if(c[k].name==e.datafield&&!c[k].format){c[k].format=e.cellsFormat;break}}}}}this.databind(this.source);if(this.showToolbar){this.toolbar.css("visibility","inherit")}if(this.showLegend){this.legendbarbottom.css("visibility","inherit")}this.tableheight=null;var g=this;var i=function(){if(g.content){g.content[0].scrollTop=0;g.content[0].scrollLeft=0}if(g.schedulercontent){g.schedulercontent[0].scrollLeft=0;g.schedulercontent[0].scrollTop=0}};this.removeHandler(this.content,"scroll");this.removeHandler(this.content,"mousedown");this.addHandler(this.content,"scroll",function(m){i();return false});if(j!==true){this._render()}},_render:function(){var h=this;if(h.dataview==null){return}if(h._loading){return}if(h.columnsHeight!=25||h.columnGroups){h._measureElement("column")}h.rowinfo=new Array();h._removeHandlers();if(h.columns==null){h.columns=new a.jqx.dataCollection(h.element)}else{h._initializeColumns()}h.host.height(h.height);h.host.width(h.width);a.jqx.utilities.html(h.content,"");h.columnsheader=h.columnsheader||a('<div style="overflow: hidden;"></div>');h.columnsheader.remove();h.columnsheader.addClass(h.toTP("jqx-widget-header"));h.columnsheader.addClass(h.toTP("jqx-grid-header"));if(!h.showHeader){h.columnsheader.css("display","none")}else{if(h.columnsheader){h.columnsheader.css("display","block")}}h.schedulercontent=h.schedulercontent||a('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');h.schedulercontent.remove();var f=h.columnsHeight;f=h._preparecolumnGroups();h.columnsheader.height(f);h.content.append(h.columnsheader);h.content.append(h.schedulercontent);h._rendercolumnheaders();h.tableheight=null;h.schedulercontent.find("#contenttable"+h.element.id).remove();if(h.table!=null){h.table.remove();h.table=null}if(h.pinnedtable!=null){h.pinnedtable.remove();h.pinnedtable=null}h.table=a('<div id="contenttable'+h.element.id+'" style="overflow: hidden; position: relative;"></div>');h.pinnedtable=a('<div id="contenttable2'+h.element.id+'" style="display: none; overflow: hidden; position: relative;"></div>');h.schedulercontent.addClass(h.toTP("jqx-grid-content"));h.schedulercontent.addClass(h.toTP("jqx-widget-content"));h.schedulercontent.append(h.table);if(h.tableRows==1){h.schedulercontent.append(h.pinnedtable)}h._renderrows();h._arrange();h._resourcesElements=new Array();var e=function(i,j){var i=a("<div style='margin:5px; position: relative;'></div>").appendTo(i);h._resourcesElements[j]=new Array();a.each(h._resources,function(o){var m=h.getColors(o);var n=this;var p=a("<div data-toggle='on' style='border-color: "+m.border+"; background: "+m.background+";' class='"+h.toThemeProperty("jqx-scheduler-legend")+"'></div>");p.appendTo(i);var l=a("<div class='"+h.toThemeProperty("jqx-scheduler-legend-label")+"'>"+n+"</div>");l.appendTo(i);h._resourcesElements[j][n]=p;var k=function(){if(p.attr("data-toggle")=="on"){h.hideAppointmentsByResource(n)}else{h.showAppointmentsByResource(n)}};h.addHandler(p,"mousedown",function(){k();return false});h.addHandler(l,"mousedown",function(){k();return false})})};e(h.legendbarbottom,"bottom");e(h.legendbartop,"top");if(h.legendPosition=="top"){h.legendbarbottom.hide()}else{h.legendbartop.hide()}if(h._resources.length==0){h.legendbarbottom.hide();h.legendbartop.hide()}if(h.renderToolBar){h.renderToolBar(h.toolbar)}else{h._renderToolBar()}if(h.disabled){h.host.addClass(h.toThemeProperty("jqx-fill-state-disabled"))}h._renderhorizontalscroll();h._addHandlers();h.clearSelection();var d=h._views[h._view].type;var g=h._views[h._view];var c=h.showAllDayRow;if(g.timeRuler&&(d==="dayView"||d==="weekView")){if(g.timeRuler.showAllDayRow!=undefined){c=g.timeRuler.showAllDayRow}}if(!c||(d!="dayView"&&d!="weekView")){h.focusedCell=h.rows[0].cells[0]}else{h.focusedCell=h.rows[1].cells[0]}h._lastSelectedCell=h.focusedCell;h._updateCellsSelection()},clear:function(){if(this.source){this.source.records=new Array();this.source.hierarchy=new Array()}this.dataview._filteredData=new Array();this.databind(null);this._render()},getJQXAppointmentByElement:function(e){var g=this;var f=e.getAttribute?e.getAttribute("data-key"):e.attr("data-key");if(f.indexOf(".")>=0){var d=f.substring(0,f.indexOf("."));var i=f.substring(f.indexOf(".")+1);var h=g.appointmentsByKey[d];var c=h.jqxAppointment.renderedAppointments[f]}else{var h=g.appointmentsByKey[f];var c=h.jqxAppointment}return c},_renderToolBar:function(){var j=this;var c=a('<div style="width: 100%; height: 100%; position: relative;"></div>');var l=(this.toolbarHeight-20)/2;c.css("top",l);j.toolbarLeftButton=a('<div type="button" style="outline: none; padding: 0px; margin-top: 3px; margin-left: 3px; margin-right: 3px; width: 27px; float: left;"></div>');j.toolbarRightButton=a('<div type="button" style="outline: none; padding: 0px; margin-top: 3px; margin-right: 3px; width: 27px; float: left;"></div>');j.toolbarLeftButton.attr("title",j.schedulerLocalization.toolBarPreviousButtonString);j.toolbarRightButton.attr("title",j.schedulerLocalization.toolBarNextButtonString);j.toolbarRightButton.jqxButton({enableHover:false,enableDefault:false,enablePressed:false,cursor:"pointer",disabled:j.disabled,theme:j.theme});j.toolbarLeftButton.jqxButton({enableHover:false,enableDefault:false,enablePressed:false,cursor:"pointer",disabled:j.disabled,theme:j.theme});j.dateTimeInput=a('<div style="outline: none; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: left;"></div>');j.toolbarLeftButton.find(".jqx-icon-arrow-left").remove();j.toolbarRightButton.find(".jqx-icon-arrow-right").remove();var f=a("<div style='outline: none; margin-left: 6px; width: 15px; height: 15px;'></div>");f.addClass(j.toThemeProperty("jqx-icon-arrow-left"));j.toolbarLeftButton.wrapInner(f);var k=a("<div style='outline: none; margin-left: 6px; width: 15px; height: 15px;'></div>");k.addClass(j.toThemeProperty("jqx-icon-arrow-right"));j.toolbarRightButton.wrapInner(k);if(j.rtl){j.toolbarLeftButton.css("float","right");j.toolbarRightButton.css("float","right");j.dateTimeInput.css("float","right")}j.addHandler(j.toolbarRightButton,"mouseenter",function(){k.addClass(j.toThemeProperty("jqx-icon-arrow-right-hover"))});j.addHandler(j.toolbarLeftButton,"mouseenter",function(){f.addClass(j.toThemeProperty("jqx-icon-arrow-left-hover"))});j.addHandler(j.toolbarRightButton,"mouseleave",function(){k.removeClass(j.toThemeProperty("jqx-icon-arrow-right-hover"))});j.addHandler(j.toolbarLeftButton,"mouseleave",function(){f.removeClass(j.toThemeProperty("jqx-icon-arrow-left-hover"))});j.addHandler(j.toolbarRightButton,"mousedown",function(){k.addClass(j.toThemeProperty("jqx-icon-arrow-right-selected"))});j.addHandler(j.toolbarRightButton,"mouseup",function(){k.removeClass(j.toThemeProperty("jqx-icon-arrow-right-selected"))});j.addHandler(j.toolbarLeftButton,"mousedown",function(){f.addClass(j.toThemeProperty("jqx-icon-arrow-left-selected"))});j.addHandler(j.toolbarLeftButton,"mouseup",function(){f.removeClass(j.toThemeProperty("jqx-icon-arrow-left-selected"))});j.addHandler(a(document),"mouseup.pagerbuttons"+j.element.id,function(){k.removeClass(j.toThemeProperty("jqx-icon-arrow-right-selected"));f.removeClass(j.toThemeProperty("jqx-icon-arrow-left-selected"))});j.addHandler(j.toolbarRightButton,"click",function(){if(!j.toolbarRightButton.jqxButton("disabled")){if(!j.rtl){j.navigateForward()}else{j.navigateBackward()}j.focus()}});j.addHandler(j.toolbarLeftButton,"click",function(){if(!j.toolbarLeftButton.jqxButton("disabled")){if(!j.rtl){j.navigateBackward()}else{j.navigateForward()}j.focus()}});j.toolbar.children().remove();j.toolbar.append(c);if(!j.rtl){c.append(j.toolbarLeftButton);c.append(j.dateTimeInput);c.append(j.toolbarRightButton)}else{c.append(j.toolbarRightButton);c.append(j.dateTimeInput);c.append(j.toolbarLeftButton)}j.toolbarDetails=a('<div class="'+j.toTP("jqx-scheduler-toolbar-details")+'" style="margin-left: 7px; margin-top:2px; float: left;"></div>');j.toolbarViews=a('<div style="margin-right: 10px; margin-top:0px; float: right;"></div>');if(j.rtl){j.toolbarDetails.css("float","right");j.toolbarDetails.css("margin-left","0px");j.toolbarDetails.css("margin-right","7px");j.toolbarViews.css("margin-left","10px");j.toolbarViews.css("margin-right","0px");j.toolbarViews.css("float","left")}var i=new Array();if(!j.rtl){i.push(j.toolbarLeftButton);i.push(j.dateTimeInput);i.push(j.toolbarRightButton)}else{i.push(j.toolbarRightButton);i.push(j.dateTimeInput);i.push(j.toolbarLeftButton)}var m=j._views.length-1;a.each(j._views,function(q){var r="";var o=q;if(j.rtl){o=m-q}if(j._views[o].text!=undefined){r=j._views[o].text}else{switch(j._views[o].type){case"dayView":r=j.schedulerLocalization.dayViewString;break;case"weekView":r=j.schedulerLocalization.weekViewString;break;case"monthView":r=j.schedulerLocalization.monthViewString;break;case"agendaView":r=j.schedulerLocalization.agendaViewString;break;case"timelineDayView":r=j.schedulerLocalization.timelineDayViewString;break;case"timelineWeekView":r=j.schedulerLocalization.timelineWeekViewString;break;case"timelineMonthView":r=j.schedulerLocalization.timelineMonthViewString;break}}var p='<span data-type="'+j._views[o].type+'" style="cursor: pointer; outline: none; margin-left: -1px; position: relative;">'+r+"</span>";var n=a(p);n.addClass(j.toTP("jqx-group-button-normal jqx-button jqx-fill-state-normal"));i.push(n);if(o==0){n.addClass(j.toTP("jqx-rc-l"))}if(o==j._views.length-1){n.addClass(j.toTP("jqx-rc-r"))}if(o===j._view){n.addClass(j.toTP("jqx-fill-state-pressed"))}n.mouseenter(function(){n.addClass(j.toTP("jqx-fill-state-hover"))});n.mouseleave(function(){n.removeClass(j.toTP("jqx-fill-state-hover"))});n.mousedown(function(){j._setView(o);j.focus()});a(j.toolbarViews).append(n)});c.append(j.toolbarDetails);c.append(j.toolbarViews);if(j._views.length<2){j.toolbarViews.hide()}j.dateTimeInput.jqxDateTimeInput({rtl:j.rtl,localization:j._getDateTimeInputLocalization(),firstDayOfWeek:j.schedulerLocalization.firstDay,todayString:j.schedulerLocalization.todayString,clearString:j.schedulerLocalization.clearString,showFooter:true,height:19,width:18,renderMode:"simple"});j.addHandler(j.dateTimeInput,"change",function(n){if(!j.fromNavigate){j.navigateTo(new a.jqx.date(n.args.date,j.timeZone));j.focus()}});j.tabKeyElements=i;var h=j._views[j._view].type;var e=function(n){var p=a.jqx.formatDate(j.getViewStart().toDate(),n,j.schedulerLocalization);var o=a.jqx.formatDate(j.getViewEnd().toDate(),n,j.schedulerLocalization);if(h==="dayView"||h==="timelineDayView"){j.toolbarDetails.html(p)}else{j.toolbarDetails.html(p+" - "+o)}if(j.rtl){j.toolbarDetails.addClass("jqx-rtl");j.toolbarDetails.html("<span style='direction:rtl;'>"+o+"<span> - <span style='direction:rtl;'>"+p+"</span>")}else{j.toolbarDetails[0].style.direction="ltr"}};e(j.toolBarRangeFormat);var d=j.toolbarViews.width()+j.toolbarDetails.width()+120;var g=j.toolBarRangeFormat;if(d>j.host.width()){g=j.toolBarRangeFormatAbbr;e(g);var d=j.toolbarViews.width()+j.toolbarDetails.width()+120;if(d>j.host.width()){j.toolbarDetails.hide();var d=j.toolbarViews.width()+120;if(d>j.host.width()){j.toolbarViews.hide()}}}else{j.currentToolbarFormat=j.toolBarRangeFormat}},_setView:function(c){var d=this;d.toolbarViews.find(".jqx-fill-state-pressed").removeClass(d.toTP("jqx-fill-state-pressed"));if(!d.rtl){a(d.toolbarViews.children()[c]).addClass(d.toTP("jqx-fill-state-pressed"))}else{a(d.toolbarViews.children()[d._views.length-1-c]).addClass(d.toTP("jqx-fill-state-pressed"))}if(d._view===c){return}d._view=c;d._refreshColumns();var f=d.hScrollBar[0].style.visibility;d.refresh();var e=d.hScrollBar[0].style.visibility;if(f!==e){d._renderrows()}if(d.selectedJQXAppointment){d._ensureAppointmentVisible(d.selectedJQXAppointment)}},_getDateTimeInputLocalization:function(){var c=this;var d={};d.backString=c.schedulerLocalization.backString;d.forwardString=c.schedulerLocalization.forwardString;d.todayString=c.schedulerLocalization.todayString;d.clearString=c.schedulerLocalization.clearString;d.calendar=c.schedulerLocalization;return d},setView:function(c){switch(c){case"dayView":this._setView(0);break;case"weekView":this._setView(1);break;case"monthView":this._setView(2);break;case"timelineDayView":this._setView(3);break;case"timelineWeekView":this._setView(4);break;case"timelineMonthView":this._setView(5);break}this.view=c},navigateForward:function(){var e=this;var i=this._views[this._view].type;var j=this._views[this._view];var d=new a.jqx.date(this.date,e.timeZone);var k=function(){while((d.dayOfWeek()==0||d.dayOfWeek()==6)&&false===j.showWeekends){d=d.addDays(1)}return d};switch(i){case"dayView":case"timelineDayView":d=d.addDays(1);d=k();break;case"weekView":case"timelineWeekView":d=d.addDays(7);break;case"monthView":case"timelineMonthView":var h=d.day();var f=d.month();var g=d.year();var c=new a.jqx.date(g,f,1);c.timeZone=e.timeZone;d=c.addMonths(1);break}return this.navigateTo(d)},navigateBackward:function(){var e=this;var i=this._views[this._view].type;var j=this._views[this._view];var d=new a.jqx.date(this.date,e.timeZone);var k=function(){while((d.dayOfWeek()==0||d.dayOfWeek()==6)&&false===j.showWeekends){d=d.addDays(-1)}return d};switch(i){case"dayView":case"timelineDayView":d=d.addDays(-1);d=k();break;case"weekView":case"timelineWeekView":d=d.addDays(-7);break;case"monthView":case"timelineMonthView":var h=d.day();var f=d.month();var g=d.year();var c=new a.jqx.date(g,f,1);c.timeZone=e.timeZone;d=c.addMonths(-1);break}return this.navigateTo(d)},_refreshToolBar:function(e){var g=this;var h=g.getViewStart();var f=g.getViewEnd();var d=function(j){var m=a.jqx.formatDate(h.toDate(),j,g.schedulerLocalization);var k=a.jqx.formatDate(f.toDate(),j,g.schedulerLocalization);var i=g._views[g._view].type;var l=g._views[g._view];if(l.showWeekends===false){if(h.dayOfWeek()==0||h.dayOfWeek()==6){h=h.addDays(1)}if(h.dayOfWeek()==0||h.dayOfWeek()==6){h=h.addDays(1)}if(f.dayOfWeek()==0||f.dayOfWeek()==6){f=f.addDays(-1)}if(f.dayOfWeek()==0||f.dayOfWeek()==6){f=f.addDays(-1)}var m=a.jqx.formatDate(h.toDate(),j,g.schedulerLocalization);var k=a.jqx.formatDate(f.toDate(),j,g.schedulerLocalization)}if(i==="dayView"||i==="timelineDayView"){g.toolbarDetails.html(m)}else{g.toolbarDetails.html(m+" - "+k)}if(g.rtl){g.toolbarDetails.addClass("jqx-rtl");g.toolbarDetails.html("<span style='direction:rtl;'>"+k+"<span> - <span style='direction:rtl;'>"+m+"</span>")}else{g.toolbarDetails[0].style.direction="ltr"}};if(e){d(g._lastFormatString||g.toolBarRangeFormat);return}d(g.toolBarRangeFormat);g.toolbarDetails.show();g.toolbarViews.show();var c=g.toolbarViews.width()+g.toolbarDetails.width()+120;if(c>g.host.width()){d(g.toolBarRangeFormatAbbr);var c=g.toolbarViews.width()+g.toolbarDetails.width()+120;if(c>g.host.width()){g.toolbarDetails.hide();var c=g.toolbarViews.width()+120;if(c>g.host.width()){g.toolbarViews.hide()}}}},navigateTo:function(c){var d=this;if(a.type(c)=="date"){c=new a.jqx.date(c)}if(c<this.min){return}if(c>this.max){return}c.timeZone=d.timeZone;d.date=c;d._refreshToolBar(true);d.fromNavigate=true;d.dateTimeInput.val(c.toDate());d.fromNavigate=false;d._refreshColumnTitles();d._renderrows();d._updateFocusedCell()},_preparecolumnGroups:function(){var o=this.columnsHeight;if(this.columnGroups){this.columnshierarchy=new Array();if(this.columnGroups.length){var m=this;for(var g=0;g<this.columnGroups.length;g++){this.columnGroups[g].parent=null;this.columnGroups[g].groups=null}for(var g=0;g<this.columns.records.length;g++){this.columns.records[g].parent=null;this.columns.records[g].groups=null}var n=function(j){for(var t=0;t<m.columnGroups.length;t++){var u=m.columnGroups[t];if(u.name===j){return u}}return null};for(var g=0;g<this.columnGroups.length;g++){var p=this.columnGroups[g];if(!p.groups){p.groups=null}if(p.parentGroup){p.parentgroup=p.parentGroup}if(p.parentgroup){var r=n(p.parentgroup);if(r){p.parent=r;if(!r.groups){r.groups=new Array()}if(r.groups.indexOf(p)===-1){r.groups.push(p)}}}}for(var g=0;g<this.columns.records.length;g++){var p=this.columns.records[g];if(p.columngroup){var r=n(p.columngroup);if(r){if(!r.groups){r.groups=new Array()}p.parent=r;if(r.groups.indexOf(p)===-1){r.groups.push(p)}}}}var q=0;for(var g=0;g<this.columns.records.length;g++){var p=this.columns.records[g];var d=p;p.level=0;while(d.parent){d=d.parent;p.level++}var d=p;var c=p.level;q=Math.max(q,p.level);while(d.parent){d=d.parent;if(d){d.level=--c}}}var l=function(x){var w=new Array();if(x.columngroup){w.push(x)}if(!x.groups){return new Array()}for(var v=0;v<x.groups.length;v++){if(x.groups[v].columngroup){w.push(x.groups[v])}else{if(x.groups[v].groups){var u=l(x.groups[v]);for(var t=0;t<u.length;t++){w.push(u[t])}}}}return w};for(var g=0;g<this.columnGroups.length;g++){var p=this.columnGroups[g];var e=l(p);p.columns=e;var h=new Array();var s=0;for(var f=0;f<e.length;f++){h.push(this.columns.records.indexOf(e[f]));if(e[f].pinned){s++}}if(s!=0){throw new Error("jqxScheduler: Column Groups initialization Error. Please, check the initialization of the jqxScheduler's columns array. The columns in a column group cannot be pinned.")}h.sort(function(j,i){j=parseInt(j);i=parseInt(i);if(j<i){return -1}if(j>i){return 1}return 0});for(var k=1;k<h.length;k++){if(h[k]!=h[k-1]+1){throw new Error("jqxScheduler: Column Groups initialization Error. Please, check the initialization of the jqxScheduler's columns array. The columns in a column group are expected to be siblings in the columns array.");this.host.remove()}}}}this.columnGroupslevel=1+q;o=this.columnGroupslevel*this.columnsHeight}return o},wheel:function(e,d){if(d.editRecurrenceDialog&&d.editRecurrenceDialog.jqxWindow("isOpen")){return true}if(d.editDialog&&d.editDialog.jqxWindow("isOpen")){return true}if(d.autoheight&&d.hScrollBar.css("visibility")=="hidden"){e.returnValue=true;return true}var f=0;if(!e){e=window.event}if(e.originalEvent&&e.originalEvent.wheelDelta){e.wheelDelta=e.originalEvent.wheelDelta}if(e.wheelDelta){f=e.wheelDelta/120}else{if(e.detail){f=-e.detail/3}}if(f){var c=d._handleDelta(f);if(c){if(e.preventDefault){e.preventDefault()}if(e.originalEvent!=null){e.originalEvent.mouseHandled=true}if(e.stopPropagation!=undefined){e.stopPropagation()}}if(c){c=false;e.returnValue=c;return c}else{return false}}if(e.preventDefault){e.preventDefault()}e.returnValue=false},_handleDelta:function(e){if(this.vScrollBar.css("visibility")!="hidden"){var d=this.vScrollInstance.value;if(e<0){this.vScrollInstance.setPosition(this.vScrollInstance.value+2*10)}else{this.vScrollInstance.setPosition(this.vScrollInstance.value-2*10)}var c=this.vScrollInstance.value;if(d!=c){return true}}else{if(this.hScrollBar.css("visibility")!="hidden"){var d=this.hScrollInstance.value;if(e>0){if(this.hScrollInstance.value>2*10){this.hScrollInstance.setPosition(this.hScrollInstance.value-2*10)}else{this.hScrollInstance.setPosition(0)}}else{if(this.hScrollInstance.value<this.hScrollInstance.max){this.hScrollInstance.setPosition(this.hScrollInstance.value+2*10)}else{this.hScrollInstance.setPosition(this.hScrollInstance.max)}}var c=this.hScrollInstance.value;if(d!=c){return true}}}return false},_removeHandlers:function(){var f=this;if(f._mousewheelfunc){f.removeHandler(this.host,"mousewheel",f._mousewheelfunc)}f.removeHandler(a(document),"keydown.scheduler"+f.element.id);f.removeHandler(f.host,"focus");f.removeHandler(f.host,"blur");f.removeHandler(f.host,"dragstart."+f.element.id);f.removeHandler(f.host,"selectstart."+f.element.id);f.removeHandler(a(window),"jqxReady."+f.element.id);f.removeHandler(f.host,"mousewheel",f._mousewheelfunc);var e="mousedown";if(f.isTouchDevice()){e=a.jqx.mobile.getTouchEventName("touchstart");if(a.jqx.browser.msie&&a.jqx.browser.version<10){e="mousedown"}}if(f.table){f.removeHandler(f.table,"mouseleave")}var d="mousemove.scheduler"+f.element.id;var g="mouseup.scheduler"+f.element.id;if(f.isTouchDevice()&&f.touchMode!==true){d=a.jqx.mobile.getTouchEventName("touchmove")+".scheduler"+f.element.id;g=a.jqx.mobile.getTouchEventName("touchend")+".scheduler"+f.element.id}f.removeHandler(a(document),d);f.removeHandler(a(document),g);if(!f.isTouchDevice()){try{if(document.referrer!=""||window.frameElement){if(window.top!=null&&window.top!=window.self){var h=null;if(window.parent&&document.referrer){h=document.referrer}if(h&&h.indexOf(document.location.host)!=-1){f.removeHandler(a(window.top.document),"mouseup.jqxscheduler"+f.element.id)}}}}catch(c){}}f.removeHandler(f.host,d);f.removeHandler(a(document),"keydown.jqxscheduler"+f.element.id);f.removeHandler(f.host,"keydown");if(f.table){f.removeHandler(f.table,"dblclick");f.removeHandler(f.pinnedtable,e);f.removeHandler(f.table,e)}},selectAppointment:function(c){if(this.appointmentsByKey[c]){this._selectAppointment(this.appointmentsByKey[c].jqxAppointment)}},_selectAppointment:function(e,j,g){if(!e){return}var i=this;if(i.selectedAppointment){i.clearAppointmentsSelection()}var f=e.id;var d=a('[data-key="'+f+'"]');if(d.length>0){i.selectedJQXAppointment=e;if(!j){i.selectedAppointment=a(d[0])}else{i.selectedAppointment=a(j)}d.addClass(i.toTP("jqx-scheduler-selected-appointment"));if(e.resizable){d.find(".jqx-scheduler-appointment-resize-indicator").show()}var c=i._views[i._view].type;var h=i._views[i._view];switch(c){case"dayView":case"weekView":break;case"monthView":case"timeLineMonthView":case"timeLineDayView":case"timeLineWeekView":if(d.length>1){a.each(d,function(k){if(!i.rtl){if(k>0){a(this).find(".jqx-scheduler-appointment-left-resize-indicator").hide()}if(k<d.length-1){a(this).find(".jqx-scheduler-appointment-right-resize-indicator").hide()}}else{if(k>0){a(this).find(".jqx-scheduler-appointment-right-resize-indicator").hide()}if(k<d.length-1){a(this).find(".jqx-scheduler-appointment-left-resize-indicator").hide()}}})}break}if(g=="mouse"){i.clearSelection();return}}i.clearSelection()},clearAppointmentsSelection:function(){var e=this;if(e.selectedAppointment){var d=e.selectedAppointment.attr("data-key");var c=a('[data-key="'+d+'"]');c.removeClass(e.toTP("jqx-scheduler-selected-appointment"));c.find(".jqx-scheduler-appointment-resize-indicator").hide();e.selectedAppointment=null;e.selectedJQXAppointment=null}},selectCell:function(d,n,m){var h=this;var o=d.toDate();for(var g=0;g<h.rows.length;g++){for(var f=0;f<h.rows[g].cells.length;f++){var l=h.rows[g].cells[f];if(m){if(l.getAttribute("data-view")!==m){continue}}var k=l.getAttribute("data-date");var c=h._getDateByString;var e=c(k);if(n&&l.getAttribute("data-end-date")){if(e.valueOf()==d.valueOf()){l.setAttribute("data-selected",true);h.focusedCell=l;h._lastSelectedCell=l;h._updateCellsSelection();h.ensureVisible(h.focusedCell);return}}else{if(!n&&l.getAttribute("data-end-date")){continue}}if(e.valueOf()==o.valueOf()){l.setAttribute("data-selected",true);h.focusedCell=l;h._lastSelectedCell=l;h._updateCellsSelection();h.ensureVisible(h.focusedCell);return}}}h._updateCellsSelection()},selectRange:function(n,o,r,q){var l=this;if(n<this.min){n=this.min}if(o>this.max){o=this.max}var g=n.toDate();var e=o.toDate();var h=false;for(var k=0;k<l.rows.length;k++){for(var f=0;f<l.rows[k].cells.length;f++){var p=l.rows[k].cells[f];if(q){if(p.getAttribute("data-view")!==q){continue}}var m=p.getAttribute("data-date");var c=l._getDateByString;var d=c(m);if(r&&p.getAttribute("data-end-date")){if(d.valueOf()>=g.valueOf()&&d.valueOf()<=e.valueOf()){p.setAttribute("data-selected",true)}}else{if(!r&&p.getAttribute("data-end-date")){continue}}if(d.valueOf()>=g.valueOf()&&d.valueOf()<=e.valueOf()){p.setAttribute("data-selected",true);if(!h){l._lastSelectedCell=p;l.focusedCell=p;h=true}}}}l._updateCellsSelection()},_selectRange:function(c,s){var k=this;var l=c;var w=s.getAttribute("data-view");if(c.getAttribute("data-view")!==w){return}var r=s.getAttribute("data-date");var n=l.getAttribute("data-date");if(null==r||null==n){return}var D=s.getAttribute("data-end-date");var G=l.getAttribute("data-end-date");var I=D!=null||G!=null;var t=D!=null&&G!=null;var o=k._getDateByString;var v=o(r);var u=o(n);if(v<this.min.toDate()){v=this.min.toDate()}if(u<this.min.toDate()){u=this.min.toDate()}if(v>this.max.toDate()){v=this.max.toDate()}if(u>this.max.toDate()){u=this.max.toDate()}var x=Math.min(v,u);var B=Math.max(v,u);var q=k.rows;var g=0;var f=0;if(g>0&&k.rtl){g=0;f=1}var e=q.length;if(I){e=1;if(c.getAttribute("data-end-date")==null){u.setHours(0,0,0,0);var C=new a.jqx.date(u,k.timeZone).toString();var F=a(l).parent().index();a.each(q[0].cells,function(){var i=this.getAttribute("data-date");if(i===C){c=this;t=s.getAttribute("data-end-date")!=null&&c.getAttribute("data-end-date")!=null;var J=s.getAttribute("data-date");var j=c.getAttribute("data-date");var L=o(J);var K=o(j);x=Math.min(L,K);B=Math.max(L,K);return false}})}}for(var A=0;A<e;A++){var h=q[A];if(I&&this.tableRows>1){var z=parseInt(c.getAttribute("data-view"));var m=q.length/k.tableRows;var p=(-1+z)*m;d=q[p];h=q[p]}var d=h.cells;for(var y=g;y<d.length-f;y++){if(d[y].getAttribute("data-view")!==w){continue}d[y].removeAttribute("data-selected");if(!t&&d[y].getAttribute("data-end-date")){continue}var H=d[y].getAttribute("data-date");var E=o(H).valueOf();if(x<=E&&E<=B){d[y].setAttribute("data-selected","true")}}}k._updateCellsSelection()},findCell:function(t,q){var l=this;var m=null;if(!l._tableOffset){var d=l.schedulercontent.coord();l._tableOffset=d}var h=l._tableOffset;var f=h.top;var o=h.left;if(q<f){return null}if(t<o){return null}if(q>f+l._hostHeight){return null}if(t>o+l._hostWidth){return null}var r=false;var s=l.table[0].rows;var p=l._views[l._view];var u=p.type;var E=0;var n=l.vScrollInstance.value;var v=l.hScrollInstance.value;for(var C=0;C<s.length;C++){if(r){break}var k=s[C];var e=k.cells;var A=false;if(C==0&&u=="dayView"||u=="weekView"){A=l.showAllDayRow;if(p.timeRuler&&(u==="dayView"||u==="weekView")){if(p.timeRuler.showAllDayRow!=undefined){A=p.timeRuler.showAllDayRow}}if(A){E=l._allDayRowFullHeight}}for(var D=0;D<e.length;D++){var c=e[D];if(D==0&&c.getAttribute("data-time-slot")){continue}if(!c._left){var g=c.offsetLeft+o;var w=c.offsetTop+f;var B=c.offsetWidth;var z=c.offsetHeight;c._left=g;c._top=w;c._width=B;c._height=z}else{var g=c._left;var w=c._top;var B=c._width;var z=c._height}c._left=g;c._top=w;c._width=B;c._height=z;if(B===0||z===0){continue}if(!l.rtl){g-=v}else{if(l.hScrollInstance.element.style.visibility!="hidden"){g-=(l.hScrollInstance.max-v)}}w-=n;if(C==0&&A){w+=n}if(w<=q&&q<w+z){if(g<=t&&t<g+B){m=c;r=true;break}}else{break}}}return m},_removeFeedbackAndStopResize:function(){var e=this;if(!e.feedback){return}e.feedback.remove();e.feedback=null;e.pinnedfeedback.remove();e.pinnedfeedback=null;if(e.feedbacks){for(var d=0;d<e.feedbacks.length;d++){e.feedbacks[d].remove()}}e.feedbacks=new Array();e.leftResize=false;e.rightResize=false;e.topResize=false;e.bottomResize=false;e.overlay.hide();e.resizing=false;e.resizeFrom=null;e._dragCell=null;e._dragStartCell=null;e.resizeTo=null;e.dragOrResize=false;e.isMouseDown=false;if(e.selectedJQXAppointment){var c=a('[data-key="'+e.selectedJQXAppointment.id+'"]');c.removeClass(e.toTP("jqx-scheduler-feedback-appointment jqx-disableselect"))}if(e.openedMonthCellPopup){e.openedMonthCellPopup.remove()}},_saveChangesAfterDragOrResize:function(f,c,s,n){var m=this;if(f===false){if(!c.isException()){if(!c.rootAppointment.recurrenceException){c.rootAppointment.recurrenceException=new Array()}if(c.rootAppointment!=null){c.rootAppointment.exceptions.push(c);c.rootAppointment.recurrenceException.push(c.occurrenceFrom)}else{c.exceptions.push(c);c.recurrenceException.push(c.occurrenceFrom)}}else{var e=c.rootAppointment?c.rootAppointment.exceptions:c.exceptions;for(var k=0;k<e.length;k++){if(e[k].occurrenceFrom.equals(c.occurrenceFrom)){e[k]=c;break}}}}else{if(f===true){if(c.isException()){var e=c.rootAppointment?c.rootAppointment.exceptions:c.exceptions;for(var k=0;k<e.length;k++){if(e[k].occurrenceFrom.equals(c.occurrenceFrom)){for(var h=0;h<c.rootAppointment.recurrenceException.length;h++){if(c.rootAppointment.recurrenceException[h].equals(e[k].occurrenceFrom)){var r=c.from;var g=new a.jqx.date(e[k].occurrenceFrom.year(),e[k].occurrenceFrom.month(),e[k].occurrenceFrom.day(),c.from.hour(),c.from.minute(),c.from.second());c.rootAppointment.recurrenceException[h]=g;break}}e[k]=c;var r=c.from;var g=new a.jqx.date(e[k].occurrenceFrom.year(),e[k].occurrenceFrom.month(),e[k].occurrenceFrom.day(),c.from.hour(),c.from.minute(),c.from.second());e[k].occurrenceFrom=g;break}}}if(c.rootAppointment!=null){c.rootAppointment.recurrencePattern=c.rootAppointment.recurrencePattern.createNewPattern();var q=c.rootAppointment.from;var o=c.rootAppointment.duration();var d=c.rootAppointment.recurrencePattern.freq;var g=null;switch(d){case"daily":g=new a.jqx.date(q.year(),q.month(),q.day(),c.from.hour(),c.from.minute(),c.from.second());break;case"weekly":g=new a.jqx.date(q.year(),q.month(),q.day(),c.from.hour(),c.from.minute(),c.from.second());break;case"monthly":g=new a.jqx.date(q.year(),q.month(),q.day(),c.from.hour(),c.from.minute(),c.from.second());break;case"yearly":g=new a.jqx.date(q.year(),q.month(),q.day(),c.from.hour(),c.from.minute(),c.from.second());break}if(n){c.rootAppointment.from=q;c.rootAppointment.to=q.add(c.duration())}else{c.rootAppointment.from=g;c.rootAppointment.to=g.add(o)}c.rootAppointment.allDay=c.allDay;c.rootAppointment.resourceId=c.resourceId;c.rootAppointment.color=c.color;c.rootAppointment.borderColor=c.borderColor;c.rootAppointment.background=c.background;c.rootAppointment.timezone=c.timezone;c.rootAppointment.subject=c.subject;c.rootAppointment.description=c.description;c.rootAppointment.location=c.location;c.rootAppointment.category=c.category;c.rootAppointment.status=c.status;if(!m.resizing){c.rootAppointment.recurrencePattern.setFrom(g)}else{c.rootAppointment.recurrencePattern.setFrom(q)}}else{c.recurrencePattern=c.recurrencePattern.createNewPattern();c.recurrencePattern.setFrom(c.from)}var p=a(s).attr("data-view");var l=m._resources[parseInt(p)-1];if(l!=null){if(c.rootAppointment!=null){c.rootAppointment.resourceId=l}else{c.resourceId=l}}}}},_handleMouseUp:function(l,j,h){var g=this;clearInterval(g._verticalIntervalDragVelocity);clearInterval(g._horizontalIntervalDragVelocity);clearInterval(g._intervalDrag);clearInterval(g._horizontalIntervalDrag);var c=l;var k=false;if(!h){if(g._dragStartCell==j){k=true}}else{if(g.resizeTo){if(c.to.equals(g.resizeTo)){k=true}}else{if(g.resizeFrom){if(c.from.equals(g.resizeFrom)){k=true}}}}if(k){var i=a('[data-key="'+l.id+'"]');i.removeClass(g.toTP("jqx-scheduler-feedback-appointment jqx-disableselect"));g._removeFeedbackAndStopResize();return}var e=c.duration();var d=c.duration().days()>=1||c.allDay;var f=function(p,m){if(m.allDay||d){var u=g.getMaxAllDayAppointments(g.appointmentsToRender)}if(h){if(g.resizeTo){if(g.resizeTo>g.max){g.resizeTo=g.max}if(g.resizeTo<g.min){g.resizeTo=g.min}m.to=g.resizeTo}else{if(g.resizeFrom){if(g.resizeFrom>g.max){g.resizeFrom=g.max}if(g.resizeFrom<g.min){g.resizeFrom=g.min}m.from=g.resizeFrom}}}else{var z=g._views[g._view].type;var B=g._views[g._view];var q=a(j).attr("data-date");var y=a(j).attr("data-end-date")!=null;var t=new a.jqx.date(q,g.timeZone);if(t<g.min){t=g.min}if(t>g.max){t=g.max}if(g.rtl&&d&&y){m.to=a.jqx.scheduler.utilities.getEndOfDay(t)}else{if(g.rtl&&(z=="monthView"||z=="timelineMonthView")){m.to=a.jqx.scheduler.utilities.getEndOfDay(t)}else{if(g.rtl&&(z=="timelineDayView"||z=="timelineWeekView")){var o=g.getMinutesPerScale();m.to=t.addMinutes(o)}else{m.from=t}}}if(z==="dayView"||z==="weekView"){if(!d&&!y){m.to=t.add(e);m.allDay=false}else{if(!d&&y){m.to=a.jqx.scheduler.utilities.getEndOfDay(t);m.allDay=true}else{if(d&&y&&!g.rtl){m.to=t.add(e);m.allDay=true}else{if(d&&y&&g.rtl){m.from=a.jqx.scheduler.utilities.getStartOfDay(m.to.add(new a.jqx.timeSpan(-e)));m.allDay=true}else{if(d&&!y){var s=30;var r=B.timeRuler&&B.timeRuler.scale;switch(r){case"sixtyMinutes":case"hour":s=60;break;case"fifteenMinutes":case"quarterHour":s=15;break;case"tenMinutes":s=10;break;case"fiveMinutes":s=5;break}m.to=t.addMinutes(s);m.allDay=false}}}}}}else{if(z==="monthView"){if(!g.rtl){m.to=t.add(e)}else{m.from=a.jqx.scheduler.utilities.getStartOfDay(m.to.add(new a.jqx.timeSpan(-e)))}}else{if(z==="timelineDayView"||z==="timelineWeekView"||z==="timelineMonthView"){if(!g.rtl){m.to=t.add(e)}else{if(z=="timelineMonthView"){m.from=a.jqx.scheduler.utilities.getStartOfDay(m.to.add(new a.jqx.timeSpan(-e)))}else{var o=g.getMinutesPerScale();m.from=t.addMinutes(o).add(new a.jqx.timeSpan(-e))}}}}}}g._saveChangesAfterDragOrResize(p,m,j,g.resizing);var z=a(j).attr("data-view");var w=g._resources[parseInt(z)-1];if(w!=null){m.resourceId=w}g.resizing=false;g.resizeFrom=null;g._dragCell=null;g.resizeTo=null;g._raiseEvent("appointmentChange",{appointment:m.boundAppointment});g.changedAppointments[m.id]={type:"Update",appointment:m.boundAppointment};g.table.find(".jqx-icon-arrow-down").hide();if((g._views[g._view].type=="weekView"||g._views[g._view].type=="dayView")&&(m.allDay||d)){if(g.tableRows>1){g._renderrows()}else{var v=g.getViewStart();var A=a.jqx.scheduler.utilities.getEndOfDay(g.getViewEnd());g._prepareAppointmentsInView(v,A);g._renderAppointments(v,A);var x=g.getMaxAllDayAppointments(g.appointmentsToRender);if(x!=u){var n=x*(g._defaultRowHeight-2);if(g.isTouchDevice()){n=Math.max(22+g._defaultRowHeight,17+n)}else{n=Math.max(3*g._defaultRowHeight,17+n)}if(g.tableRows==1){a(a(g.table[0].rows[0]).find("td")).css("height",n+"px")}else{a(a(g.table[0].rows[1]).find("td")).css("height",n+"px")}a(g.oldRow).find("td").css("height",n+"px");g.pinnedtable.height(n);g._updateScrollbars(g._hostHeight?g._hostHeight:g.host.height())}}}else{var v=g.getViewStart();var A=a.jqx.scheduler.utilities.getEndOfDay(g.getViewEnd());g._prepareAppointmentsInView(v,A);g._renderAppointments(v,A)}g._removeFeedbackAndStopResize()};if(c.isRecurrentAppointment()){f(false,c)}else{f(null,c)}},_handleResize:function(O,M,k,P,u){var L=this;var h=L._views[L._view].type;var K=L._views[L._view];if(h==="dayView"||h==="weekView"){var B=u.duration().days()>=1||u.allDay;if(!B&&!k.getAttribute("data-end-date")){var g=function(i){if(i<10){return false}return true};var m=L.findCell(L.feedback.coord().left,M);if(L.topResize){if(!L._lastResizeY){L._lastResizeY=L.mouseDownPosition.top}if(M>L._lastResizeY+a(k).height()/2){var H=L.selectedAppointmentTableBounds.height+L.selectedAppointmentTableBounds.top-P.top-a(k).height()-3;if(g(H)){L.feedback.css("top",2+P.top+a(k).height());L.feedback.height(H);L._lastResizeY=L.feedback.coord().top;var W=new a.jqx.date(m.getAttribute("data-date"),L.timeZone);L.resizeFrom=W.addMinutes(L.getMinutesPerScale())}}else{if(M<L._lastResizeY-a(k).height()/2){var H=L.selectedAppointmentTableBounds.height+L.selectedAppointmentTableBounds.top-P.top-3;if(g(H)){L.feedback.css("top",2+P.top);L.feedback.height(H);L._lastResizeY=L.feedback.coord().top;L.resizeFrom=new a.jqx.date(m.getAttribute("data-date"),L.timeZone)}}}}else{if(L.bottomResize){if(!L._lastResizeY){L._lastResizeY=L.mouseDownPosition.top}if(M>L._lastResizeY+a(k).height()/2){var Q=-5+a(k).height()+P.top-L.selectedAppointmentTableBounds.height-L.selectedAppointmentTableBounds.top;var H=L.selectedAppointmentTableBounds.height+Q;if(g(H)){L.feedback.height(H);L._lastResizeY=L.selectedAppointmentTableBounds.height+Q+L.feedback.coord().top;L.resizeTo=new a.jqx.date(m.getAttribute("data-date"),L.timeZone).addMinutes(L.getMinutesPerScale())}}else{if(M<L._lastResizeY-a(k).height()/2){var Q=-5+P.top-L.selectedAppointmentTableBounds.height-L.selectedAppointmentTableBounds.top;var H=L.selectedAppointmentTableBounds.height+Q;if(g(H)){L.feedback.height(H);L._lastResizeY=L.selectedAppointmentTableBounds.height+Q+L.feedback.coord().top;L.resizeTo=new a.jqx.date(m.getAttribute("data-date"),L.timeZone)}}}}}}else{var A=function(i){if(i<10){return false}return true};if(L.leftResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left-L.cellWidth;if(A(e)){L.feedback.css("left",5+P.left+L.cellWidth);L.feedback.width(e-5);L.feedback.hide();L.pinnedfeedback.css("left",5+P.left+L.cellWidth);L.pinnedfeedback.width(e-5);L._lastResizeX=L.pinnedfeedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(k.getAttribute("data-date"),L.timeZone).addDays(1)}else{L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone)).addDays(-1)}}}else{if(O<L._lastResizeX-a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left;if(A(e)){L.feedback.css("left",5+P.left);L.feedback.width(e-5);L.feedback.hide();L.pinnedfeedback.css("left",5+P.left);L.pinnedfeedback.width(e-5);L._lastResizeX=L.pinnedfeedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(k.getAttribute("data-date"),L.timeZone)}else{L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone))}}}}}else{if(L.rightResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var Q=a(k).width()+P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q;if(A(e)){L.feedback.hide();L.feedback.width(e-6);L.pinnedfeedback.width(e-6);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.pinnedfeedback.coord().left;if(!L.rtl){L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone))}else{L.resizeFrom=new a.jqx.date(k.getAttribute("data-date"),L.timeZone)}}}else{if(O<L._lastResizeX-a(k).width()/2){var Q=P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q;if(A(e)){L.feedback.hide();L.feedback.width(e-6);L.pinnedfeedback.width(e-6);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.pinnedfeedback.coord().left;if(!L.rtl){L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone).addDays(-1))}else{L.resizeFrom=new a.jqx.date(k.getAttribute("data-date"),L.timeZone).addDays(1)}}}}}}}}else{if(h==="timelineMonthView"){var A=function(i){if(i<10){return false}return true};var s=L.findCell(O,L.feedback.coord().top);if(L.leftResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left-a(k).width();if(A(e)){L.feedback.css("left",P.left+a(k).width());L.feedback.width(e);L._lastResizeX=L.feedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addDays(1)}else{L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addDays(-1))}}}else{if(O<L._lastResizeX-a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left;if(A(e)){L.feedback.css("left",P.left);L.feedback.width(e);L._lastResizeX=L.feedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}else{L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(s.getAttribute("data-date"),L.timeZone))}}}}}else{if(L.rightResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var Q=a(k).width()+P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q-5;if(A(e)){L.feedback.width(e);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.feedback.coord().left;if(!L.rtl){L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(s.getAttribute("data-date"),L.timeZone))}else{L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}}}else{if(O<L._lastResizeX-a(k).width()/2){var Q=P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q-5;if(A(e)){L.feedback.width(e);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.feedback.coord().left;if(!L.rtl){L.resizeTo=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addDays(-1))}else{L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addDays(1)}}}}}}}else{if(h==="monthView"){var A=function(i){if(i<10){return false}return true};var v=-5;if(L.tableColumns>1){v=parseInt(-5/L.tableColumns)}for(var V=0;V<L.columns.records.length/L.tableColumns;V++){v+=L.columns.records[V].width}var t=L.selectedJQXAppointment.resourceId;var n=L._resources.indexOf(t);if(L.resources&&L.resources.orientation=="none"){n=-1}var f="0px";if(n!=-1&&L.tableRows==1){f=v*n+"px"}var J=k.offsetWidth;var T=k.offsetHeight;var I=18;if(L.isTouchDevice()){I=2}for(var V=0;V<6;V++){L.feedbacks[V][0].style.left=f;L.feedbacks[V][0].style.width=v+"px";L.feedbacks[V][0].style.display="block";L.feedbacks[V][0].style.top=parseInt(L.rows[V].top)+I+"px";if(L.tableRows>1){L.feedbacks[V][0].style.top=parseInt(L.rows[6*n+V].top)+I+"px"}a(L.feedbacks[V][0]).find(".jqx-scheduler-appointment-resize-indicator").css("visibility","inherit")}var o=L.selectedJQXAppointment.elements;var c=o[0].cells[0].cell;var N=o[o.length-1];var S=N.lastCellY;var l=N.lastCellX;var q=o[0].cellY;var E=o[0].cellX;var z=parseInt(P.top);var X=parseInt(P.left);if(!L.rtl){if(L.leftResize){for(var V=0;V<6;V++){var F=L.feedbacks[V];var D=parseInt(F[0].style.top)-I;var C=parseInt(F[0].style.left);if(D<z){F[0].style.width=v+"px"}else{for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.width=o[U].width+"px";F[0].style.top=o[U].y+"px"}}}var w=o[0];var p=parseInt(w.x);if(D==q){F[0].style.left=p+"px";if(z==q){F[0].style.left=1+P.left+"px";F[0].style.width=-1+w.x+w.width-P.left+"px"}else{if(z>q){F[0].style.left=p+"px";F[0].style.width=w.width+"px"}else{if(z<q){F[0].style.left=f;F[0].style.width=w.x+w.width-parseInt(f)+"px"}}}}else{if(D==z){F[0].style.width=v-P.left+parseInt(f)+"px";F[0].style.left=P.left+"px"}}if(D>S){F[0].style.display="none"}if(D<z){F[0].style.display="none"}if(z>=S){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(z>S||(z==S&&X>l)){if(r==D){F[0].style.display="block";F[0].style.width=o[U].width+"px";F[0].style.left=o[U].x+"px"}}else{if(z==S&&X<=l){if(q!=S){F[0].style.width=o[U].width-P.left+parseInt(f)+"px"}}}}}}var G=new a.jqx.date(k.getAttribute("data-date"),L.timeZone);if(G<L.selectedJQXAppointment.to){L.resizeFrom=G}else{L.resizeFrom=L.selectedJQXAppointment.from}}else{if(L.rightResize){for(var V=0;V<6;V++){var F=L.feedbacks[V];var D=parseInt(F[0].style.top)-I;var C=parseInt(F[0].style.left);if(D<z){F[0].style.width=v+"px"}for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.top=o[U].y+"px"}}var w=o[0];var p=parseInt(w.x);if(D==q){F[0].style.left=p+"px";if(z==q){if(X>=E){F[0].style.width=X+J-E-5+"px"}else{F[0].style.width=w.width+"px"}}else{if(z<q){F[0].style.left=p+"px";F[0].style.width=w.width+"px"}else{if(z>q){F[0].style.left=p+"px";F[0].style.width=v-E+parseInt(f)+"px"}}}}else{if(D==z){F[0].style.width=X+J-5-parseInt(f)+"px"}}if(D<q){F[0].style.display="none"}if(D>z&&D>q){F[0].style.display="none"}if(z<=q){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(z<q||(z==q&&X<E)){if(r==D){F[0].style.display="block";F[0].style.width=o[U].width+"px"}}}}}var G=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone));if(G>L.selectedJQXAppointment.from){L.resizeTo=G}else{L.resizeTo=L.selectedJQXAppointment.to}}}}else{if(L.leftResize){for(var V=0;V<6;V++){var F=L.feedbacks[V];var D=parseInt(F[0].style.top)-I;var C=parseInt(F[0].style.left);if(D<z){F[0].style.width=v+"px"}else{for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.width=o[U].width+"px";F[0].style.top=o[U].y+"px"}}}var w=o[0];var p=parseInt(w.x);if(D==q){F[0].style.left=p+"px";if(z==q){F[0].style.left=1+P.left+"px";F[0].style.width=-1+w.x+w.width-P.left+"px"}else{if(z<q){F[0].style.left=p+"px";F[0].style.width=w.width+"px"}else{if(z>q){F[0].style.left=f;F[0].style.width=w.x+w.width-parseInt(f)+"px"}}}}else{if(D==z){F[0].style.width=v-P.left+parseInt(f)+"px";F[0].style.left=P.left+"px"}}if(D<q){F[0].style.display="none"}if(D>z){F[0].style.display="none"}if(z<q){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.display="block";F[0].style.width=o[U].width+"px";F[0].style.left=o[U].cellX+"px"}}}if(z==q){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(z<q||(z==q)){if(r==D&&q!=S){F[0].style.left=1+P.left+parseInt(f)+"px";if(1+P.left+parseInt(f)>w.x+w.width){F[0].style.left=w.x+"px"}F[0].style.width=-1+w.x+w.width-P.left+"px"}}}}}var G=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(k.getAttribute("data-date"),L.timeZone));if(G>L.selectedJQXAppointment.from){L.resizeTo=G}else{L.resizeTo=L.selectedJQXAppointment.to}}else{if(L.rightResize){for(var V=0;V<6;V++){var F=L.feedbacks[V];var D=parseInt(F[0].style.top)-I;var C=parseInt(F[0].style.left);if(D<z){F[0].style.width=v+"px"}for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.top=o[U].y+"px"}}var w=o[0];var p=parseInt(w.x);if(D==q){F[0].style.left=p+"px";if(z==q){if(X>=E){F[0].style.width=X+J-E-5+"px"}else{F[0].style.width=w.width+"px"}}else{if(z>q){F[0].style.left=p+"px";F[0].style.width=w.width+"px"}else{if(z<q){F[0].style.left=p+"px";F[0].style.width=v-E+parseInt(f)+"px"}}}}else{if(D==z){F[0].style.width=X+J-5-parseInt(f)+"px"}}if(D>S){F[0].style.display="none"}if(D<z){F[0].style.display="none"}if(z>S){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(r==D){F[0].style.display="block"}if(D==S){F[0].style.width=o[U].width+"px";F[0].style.left=o[U].cellX+"px"}}}if(z<=S){if(D==S){for(var U=0;U<o.length;U++){var r=o[U].cellY;if(D!=z&&r==D&&q!=S){F[0].style.width=o[U].width+"px";F[0].style.left=o[U].cellX+"px"}else{if(D==z&&r==D&&q!=S){F[0].style.left=o[U].cellX+"px";F[0].style.width=X+J-5-parseInt(f)-o[U].cellX+"px"}}}}}}var G=new a.jqx.date(k.getAttribute("data-date"),L.timeZone);if(G<L.selectedJQXAppointment.to){L.resizeFrom=G}else{L.resizeFrom=L.selectedJQXAppointment.from}}}}var d=new Array();for(var V=0;V<6;V++){var F=L.feedbacks[V];if(F[0].style.display=="block"){d.push(F)}}a.each(d,function(i){if(!L.rtl){if(i>0){a(this).find(".jqx-scheduler-appointment-left-resize-indicator")[0].style.visibility="hidden"}if(i<d.length-1){a(this).find(".jqx-scheduler-appointment-right-resize-indicator")[0].style.visibility="hidden"}}else{if(i>0){a(this).find(".jqx-scheduler-appointment-right-resize-indicator")[0].style.visibility="hidden"}if(i<d.length-1){a(this).find(".jqx-scheduler-appointment-left-resize-indicator")[0].style.visibility="hidden"}}})}else{if(h==="timelineDayView"||h==="timelineWeekView"){var R=L.getMinutesPerScale();var A=function(i){if(i<10){return false}return true};var s=L.findCell(O,L.feedback.coord().top);if(L.leftResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left-a(k).width();if(A(e)){L.feedback.css("left",2+P.left+a(k).width());L.feedback.width(e);L._lastResizeX=L.feedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addMinutes(R)}else{L.resizeTo=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}}}else{if(O<L._lastResizeX-a(k).width()/2){var e=L.selectedAppointmentTableBounds.width+L.selectedAppointmentTableBounds.left-P.left;if(A(e)){L.feedback.css("left",2+P.left);L.feedback.width(e);L._lastResizeX=L.feedback.coord().left;if(!L.rtl){L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}else{L.resizeTo=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addMinutes(R)}}}}}else{if(L.rightResize){if(!L._lastResizeX){L._lastResizeX=L.mouseDownPosition.left}if(O>L._lastResizeX+a(k).width()/2){var Q=a(k).width()+P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q;if(A(e)){L.feedback.width(e);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.feedback.coord().left;if(!L.rtl){L.resizeTo=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addMinutes(R)}else{L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}}}else{if(O<L._lastResizeX-a(k).width()/2){var Q=P.left-L.selectedAppointmentTableBounds.width-L.selectedAppointmentTableBounds.left;var e=L.selectedAppointmentTableBounds.width+Q;if(A(e)){L.feedback.width(e);L._lastResizeX=L.selectedAppointmentTableBounds.width+Q+L.feedback.coord().left;if(!L.rtl){L.resizeTo=new a.jqx.date(s.getAttribute("data-date"),L.timeZone)}else{L.resizeFrom=new a.jqx.date(s.getAttribute("data-date"),L.timeZone).addMinutes(R)}}}}}}}}}}if(h==="timelineDayView"||h==="timelineMonthView"||h==="timelineWeekView"){clearInterval(L._horizontalIntervalDrag);L._horizontalIntervalDrag=setInterval(function(){var j=L.host.width();var y=L.host.coord().left;var i=y+25;var x=j+i-45;if(!L.rtl){if(O<i){L.hScrollInstance.setPosition(L.hScrollInstance.value-5)}else{if(O>x){L.hScrollInstance.setPosition(L.hScrollInstance.value+5)}}}else{if(O>x){L.hScrollInstance.setPosition(L.hScrollInstance.value-5)}else{if(O<i){L.hScrollInstance.setPosition(L.hScrollInstance.value+5)}}}},5)}else{if(h==="dayView"||h==="weekView"){clearInterval(L._intervalDrag);L._intervalDrag=setInterval(function(){var Y=L.host.height();var j=0;if(!L.columnGroups){j+=L.showHeader?L.columnsHeight:0}else{j+=L.showHeader?L.columnsheader.height():0}if(L.showToolbar){j+=L.toolbarHeight}Y-=j;var y=L.legendHeight;if(L._resources.length==0){y=0}if(L.showLegend){Y-=y}var ab=j+L.host.coord().top;var i=L.showAllDayRow;if(K.timeRuler&&(h==="dayView"||h==="weekView")){if(K.timeRuler.showAllDayRow!=undefined){i=K.timeRuler.showAllDayRow}}var x=u.duration().days()>=1||u.allDay;if(i&&x){ab-=20}else{if(i&&L.resizing){ab+=a(L.table[0].rows[0]).height();Y-=a(L.table[0].rows[0]).height()}}var aa=ab+25;var Z=Y+aa-45;if(M<aa){L.vScrollInstance.setPosition(L.vScrollInstance.value-5)}else{if(M>Z){L.vScrollInstance.setPosition(L.vScrollInstance.value+5)}}},5)}}L.resizing=true},_startTimers:function(c,i,e){var g=this;var h=g.host.coord();var f=0;var d=0;if(g.hScrollInstance.element.style.visibility!="hidden"){clearInterval(g._horizontalIntervalDragVelocity);g._horizontalIntervalDragVelocity=setInterval(function(){f++;if(f>40){f=40}},100);clearInterval(g._horizontalIntervalDrag);g._horizontalIntervalDrag=setInterval(function(){var k=g._hostWidth;var m=h.left;var j=m+30;var l=k+j-60;if(!g.rtl){if(c<j){g.hScrollInstance.setPosition(g.hScrollInstance.value-10-f)}else{if(c>l){g.hScrollInstance.setPosition(g.hScrollInstance.value+10+f)}else{f=0}}}else{if(c<j){g.hScrollInstance.setPosition(g.hScrollInstance.value+10+f)}else{if(c>l){g.hScrollInstance.setPosition(g.hScrollInstance.value-10-f)}else{f=0}}}},10)}if(g.vScrollInstance.element.style.visibility!="hidden"){clearInterval(g._verticalIntervalDragVelocity);g._verticalIntervalDragVelocity=setInterval(function(){d++;if(d>40){d=40}},100);clearInterval(g._intervalDrag);g._intervalDrag=setInterval(function(){var n=g._hostHeight;var p=0;if(!g.columnGroups){p+=g.showHeader?g.columnsHeight:0}else{p+=g.showHeader?g.columnsheader.height():0}var q=g._views[g._view].type;var s=g._views[g._view];if(g.showToolbar){p+=g.toolbarHeight}n-=p;if(g.showLegend&&g._resources.length>0){n-=g.legendHeight}var l=h.top;var r=p+l;if(q=="dayView"||q=="weekView"){var k=g.showAllDayRow;if(s.timeRuler&&(q==="dayView"||q==="weekView")){if(s.timeRuler.showAllDayRow!=undefined){k=s.timeRuler.showAllDayRow}}var m=e.duration().days()>=1||e.allDay;if(k&&m){r-=20}else{if(k&&g.resizing){r+=a(g.table[0].rows[0]).height()}}}var o=r+30;var j=l+n+p-30;if(i<o){g.vScrollInstance.setPosition(g.vScrollInstance.value-10-d)}else{if(i>j){g.vScrollInstance.setPosition(g.vScrollInstance.value+10+d)}else{d=0}}},10)}},_hoverCell:function(c){var d=this;if(!d.enableHover){return true}if(d._resources.length>0){if(c.className.indexOf("pinned")>=0){return true}}if(c.className.indexOf("time-column")>=0){return true}if(c.className.indexOf("jqx-scheduler-disabled-cell")>=0){return true}d.hoveredCell=c;if(!c){return true}c.className+=" "+d.toTP("jqx-fill-state-hover")+" "+d.toTP("jqx-grid-cell-hover")+" "+d.toTP("jqx-scheduler-cell-hover")},_removeHoveredCell:function(){var e=this;if(e.hoveredCell){var d=e.hoveredCell;var c=function(f){var g=d.className;g=g.replace(" "+e.toTP("jqx-fill-state-hover"),"");g=g.replace(" "+e.toTP("jqx-grid-cell-hover"),"");g=g.replace(" "+e.toTP("jqx-scheduler-cell-hover"),"");d.className=g};c(d)}e.hoveredCell=null},_addHandlers:function(){var i=this;this._mousewheelfunc=this._mousewheelfunc||function(m){i.wheel(m,i);return false};this.focused=false;var f=false;this.addHandler(a(document),"keydown.scheduler"+i.element.id,function(m){f=false;if(m.keyCode===9&&m.shiftKey&&!i.focused){f=true}});this.addHandler(this.host,"focus",function(n){if(i.focusedCell&&!i.selectedAppointment&&!f){a(i.focusedCell).addClass(i.toThemeProperty("jqx-scheduler-cell-focus"))}i.focused=true;if(f){if(i.appointmentsToRender.length>0){var m=i.appointmentsToRender[i.appointmentsToRender.length-1];i._selectAppointment(m);i._lastSelectedAppointment=m}else{if(!i.focusedCell){i._updateFocusedCell()}else{if(i.focusedCell){if(i.focusedCell.className.indexOf("-focus")==-1){i._updateCellsSelection();return false}}}}}});this.addHandler(this.host,"blur",function(m){if(i.focusedCell){if(document.activeElement==i.element){return true}if(a(document.activeElement).ischildof(i.host)){return true}a(i.focusedCell).removeClass(i.toThemeProperty("jqx-scheduler-cell-focus"));i.focused=false}});this.addHandler(this.host,"dragstart."+this.element.id,function(m){return false});this.addHandler(this.host,"selectstart."+this.element.id,function(m){if(i.enableBrowserSelection){return true}if(i.showToolBar){if(a(m.target).ischildof(i.toolbar)){return true}}if(i.rowDetails){if(a(m.target).parents("[data-role=details]").length>0){return true}}if(undefined==i.editKey){return false}});this.addHandler(a(window),"jqxReady."+this.element.id,function(){});this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);this.vScrollInstance.valueChanged=function(m){if(i._timer){clearTimeout(i._timer)}i._timer=setTimeout(function(){if(i.table){i.table[0].style.top=0-i.vScrollInstance.value+"px"}},1)};this.hScrollInstance.valueChanged=function(m){if(i._htimer){clearTimeout(i._htimer)}i._htimer=setTimeout(function(){if(i.table){i._renderhorizontalscroll()}},1)};var d="mousedown";if(this.isTouchDevice()){d=a.jqx.mobile.getTouchEventName("touchstart");if(a.jqx.browser.msie&&a.jqx.browser.version<10){d="mousedown"}}this.addHandler(this.table,"mouseleave",function(m){i._removeHoveredCell()});if(i.isTouchDevice()){i.enableHover=false}var g="mousemove.scheduler"+this.element.id;var e="mouseup.scheduler"+this.element.id;if(this.isTouchDevice()&&this.touchMode!==true){g=a.jqx.mobile.getTouchEventName("touchmove")+".scheduler"+this.element.id;e=a.jqx.mobile.getTouchEventName("touchend")+".scheduler"+this.element.id}this.addHandler(a(document),g,function(P){var B=P.pageX;var A=P.pageY;if(i.isTouchDevice()){var W=a.jqx.position(P);B=W.left;A=W.top;if(isNaN(B)||isNaN(A)){var W=a.jqx.position(P.originalEvent);B=W.left;A=W.top}}if(i.disabled||P.which===3){return true}if(!i.isMouseDown){return true}if(i.hScrollInstance.isScrolling()||i.vScrollInstance.isScrolling()){return true}if(i._hostWidth){var o=i.host.coord();if(o.left+i._hostWidth<B||B<o.left){return true}if(o.top+i._hostHeight<A||A<o.top){return true}}if(i.mouseDownPosition){if((Math.abs(i.mouseDownPosition.left-B)>=3&&Math.abs(i.mouseDownPosition.left-B)<=10)||(Math.abs(i.mouseDownPosition.top-A)>=3&&Math.abs(i.mouseDownPosition.top-A)<=10)){i.dragOrResize=true}}if(i.selectedAppointment&&i.dragOrResize){var s=null;if(i._hasOpenedMenu){return true}if(i.editRecurrenceDialog.jqxWindow("isOpen")){return true}var F=i._views[i._view].type;var z=i._views[i._view];var E=false;if(P.target.nodeName.toLowerCase()==="td"){var u=P.target}else{var u=i.findCell(B,A)}if(!u){return true}if(u.getAttribute("data-time-slot")!=undefined){return true}if(u.className.indexOf("jqx-grid-cell-pinned")>=0){return true}if(!i.feedback){s=i.getJQXAppointmentByElement(i.selectedAppointment);if(!s.draggable&&!s.resizable){s=null;return true}if(i.beginDrag){var T=i.beginDrag(s);if(!T){return true}}var p=a('[data-key="'+s.id+'"]');var N=i.selectedAppointment.position();i.feedback=i.selectedAppointment.clone(true);i.pinnedfeedback=i.selectedAppointment.clone(true);var U=!(i.selectedAppointment[0].style.cursor=="row-resize"||i.selectedAppointment[0].style.cursor=="col-resize"||i.resizing);var r=function(x){if(U){x.find(".jqx-scheduler-appointment-resize-indicator").hide()}p.addClass(i.toTP("jqx-scheduler-feedback-appointment jqx-disableselect"));x.addClass(i.toTP("jqx-scheduler-feedback-appointment"));x.addClass(i.toTP("jqx-scheduler-feedback-drag-appointment"));if(!U){x.css("z-index",400)}else{x.css("z-index",401)}};r(i.feedback);r(i.pinnedfeedback);if(i._views[i._view].type!="monthView"||U){i.table.append(i.feedback);if(i.tableRows==1){i.pinnedtable.append(i.pinnedfeedback)}else{i.table.append(i.pinnedfeedback)}i.feedback.css("left",N.left);i.feedback.css("top",N.top);i.pinnedfeedback.css("left",N.left);i.pinnedfeedback.css("top",N.top);if(i._views[i._view].type=="monthView"&&i.isTouchDevice()){i.feedbacks=new Array();for(var R=0;R<6;R++){i.feedbacks.push(i.feedback.clone(true));a(i.feedbacks[R]).hide();i.table.append(a(i.feedbacks[R]))}}}else{i.feedbacks=new Array();for(var R=0;R<6;R++){i.feedbacks.push(i.feedback.clone(true));a(i.feedbacks[R]).hide();i.table.append(a(i.feedbacks[R]))}}}if(i.dragging){var T=i.dragging(s,u,i.feedback);if(false===T){return true}}var W=a(u).position();if(i.endDrag){var q=i.feedback.css("left");var n=i.feedback.css("top");var I=i.feedback.width();var v=i.feedback.height}if(!s){s=i.selectedJQXAppointment}var H=s.resourceId;var Q=i._resources.indexOf(H);if(i.resources&&i.resources.orientation=="none"){Q=-1}var K=false;var S=i.isTouchDevice();if(S&&i.touchMode!==true&&i._dragCell==null&&!(i.leftResize||i.rightResize||i.topResize||i.bottomResize||i.resizing)){switch(F){case"dayView":case"weekView":var E=s.duration().days()>=1||s.allDay;if(!E){if(A>=i.selectedAppointmentBounds.top-15&&A<=i.selectedAppointmentBounds.top+15){K=true;i.topResize=true}if(A>=i.selectedAppointmentBounds.top-15+i.selectedAppointmentBounds.height&&A<=i.selectedAppointmentBounds.top+i.selectedAppointmentBounds.height+15){K=true;i.bottomResize=true}}else{if(B>=i.selectedAppointmentBounds.left-15&&B<=i.selectedAppointmentBounds.left+15){K=true;i.leftResize=true}if(B>=i.selectedAppointmentBounds.left+i.selectedAppointmentBounds.width-15&&B<=i.selectedAppointmentBounds.left+i.selectedAppointmentBounds.width+15){K=true;i.rightResize=true}}break;default:if(B>=i.selectedAppointmentBounds.left-15&&B<=i.selectedAppointmentBounds.left+15){K=true;i.leftResize=true}if(B>=i.selectedAppointmentBounds.left+i.selectedAppointmentBounds.width-15&&B<=i.selectedAppointmentBounds.left+i.selectedAppointmentBounds.width+15){K=true;i.rightResize=true}break}}if(S&&(i.leftResize||i.rightResize||i.topResize||i.bottomResize||i.resizing)||K){if(u.getAttribute("data-view")!=Q+1){if(i.resources.orientation!="none"){return true}}var w=i._getDateByString(u.getAttribute("data-date"));if(w<i.min.toDate()||w>i.max.toDate()){return}i._handleResize(B,A,u,W,s);i._oldResizeTD=u}else{if(!S&&i.selectedAppointment[0].style.cursor=="row-resize"||i.selectedAppointment[0].style.cursor=="col-resize"||i.resizing){if(u.getAttribute("data-view")!=Q+1){if(i.resources&&i.resources.orientation!="none"){return true}}var w=i._getDateByString(u.getAttribute("data-date"));if(w<i.min.toDate()||w>i.max.toDate()){return}i._handleResize(B,A,u,W,s);i._oldResizeTD=u}else{if(!s.draggable){i._removeFeedbackAndStopResize();return true}if(i._dragCell==u){i._startTimers(B,A,s);if(i.isTouchDevice()&&i.touchMode!==true){P.stopPropagation();return false}else{return}}var w=i._getDateByString(u.getAttribute("data-date"));if(w<i.min.toDate()||w>i.max.toDate()){return}var m=s.duration();if(F.indexOf("month")>=0&&new a.jqx.date(w).add(m)>i.max){return}var D=i.vScrollBar[0].style.visibility=="hidden"?0:6+i.vScrollBar.outerWidth();i._dragCell=u;i.feedback[0].style.left=2+W.left+"px";i.feedback[0].style.top=2+W.top+"px";if(F==="dayView"||F==="weekView"){i.pinnedfeedback.css("left",2+W.left);i.pinnedfeedback.css("top",2+W.top);var M=0;if(u.getAttribute("data-end-date")){var J=i.appointmentsMinHeight;if(i.isTouchDevice()){J=i.touchAppointmentsMinHeight}if(z.appointmentHeight){J=z.appointmentHeight}E=s.duration().days()>=1||s.allDay;i.feedback.css("top",2+W.top+J);i.pinnedfeedback.css("top",2+W.top+18);if(E){i.pinnedfeedback.css("top",s.elements[0].y);M=i.selectedAppointment.width();if(2+W.left+M>i.host.width()-D){var C=2+W.left+M-i.host.width()+D+6;M-=C}i.feedback.width(M);i.feedback.height(J);i.pinnedfeedback.width(M);i.pinnedfeedback.height(J)}else{M=a(u).width()-4;i.feedback.width(M);i.feedback.height(J);i.pinnedfeedback.width(M);i.pinnedfeedback.height(J)}i.feedback.hide();i.pinnedfeedback.show()}else{i.feedback.show();i.pinnedfeedback.hide();var t=2;var O=30;var V=z.timeRuler&&z.timeRuler.scale;switch(V){case"sixtyMinutes":case"hour":t=1;break;case"thirdyMinutes":case"halfHour":t=2;break;case"fifteenMinutes":case"quarterHour":t=4;break;case"tenMinutes":t=6;break;case"fiveMinutes":t=12;break}M=a(u).width()-4;i.feedback.width(M);E=s.duration().days()>=1||s.allDay;if(E){i.feedback.height((a(u).height())-6)}else{i.feedback.height(i.selectedAppointment.height())}}i._startTimers(B,A,s)}else{if(F==="monthView"){i.feedback.css("left",1+W.left);var G=i.selectedAppointmentTableBounds;var L=parseInt(G.top);if(L>W.top&&L<W.top+u.offsetHeight){i.feedback.css("top",L+"px")}else{i.feedback.css("top",i.selectedAppointment.height()+W.top-2)}if(i.isTouchDevice()){i.feedback.css("top",W.top+2)}M=i.selectedAppointment.width();i.feedback.width(M);i.feedback.height(i.selectedAppointment.height());i._startTimers(B,A,s)}else{if(F==="timelineDayView"||F==="timelineMonthView"||F==="timelineWeekView"){var G=i.selectedAppointmentTableBounds;var L=parseInt(G.top);if(L>W.top&&L<W.top+u.offsetHeight){i.feedback.css("top",L+"px")}i._startTimers(B,A,s)}}}}}if(i.endDrag){var T=i.endDrag(s,u,i.feedback);if(!T){i.feedback.width(I)}i.feedback.height(v);i.feedback.css("top",n);i.feedback.css("left",q);return true}if(i.isTouchDevice()&&i.touchMode!==true){P.stopPropagation();return false}}});var l=function(m){i.isMouseDown=false;i.dragOrResize=false;if(i.contextMenu&&i.menu&&m.which!==3){i.menu.jqxMenu("close");i._hasOpenedMenu=false}if(m.which===3){return true}if(i.selectedAppointment&&i.feedback){if(i.editRecurrenceDialog.jqxWindow("isOpen")){return}i._handleMouseUp(i.selectedJQXAppointment,i._dragCell,i.resizing)}};this.addHandler(a(document),e,function(m){return l(m)});if(!this.isTouchDevice()){try{if(document.referrer!=""||window.frameElement){if(window.top!=null&&window.top!=window.self){var c=null;if(window.parent&&document.referrer){c=document.referrer}if(c&&c.indexOf(document.location.host)!=-1){var h=function(m){if(!self.disabled){return l(m)}};i.addHandler(a(window.top.document),"mouseup.jqxscheduler"+i.element.id,h)}}}}catch(k){}}this.addHandler(this.host,g,function(o){var C=o.pageX;var A=o.pageY;if(i.disabled||o.which===3){return true}if(i.selectedAppointment&&i.isMouseDown){return true}if(i.hScrollInstance.isScrolling()||i.vScrollInstance.isScrolling()){return true}if(i._hasOpenedMenu){return true}if(i.overlay[0].style.display!=="none"){return true}var n=null;if(o.target.className.indexOf("jqx-scheduler-appointment")>=0&&o.target.className.indexOf("jqx-scheduler-appointment-inner-content")==-1&&o.target.className.indexOf("jqx-scheduler-appointment-content")==-1&&o.target.className.indexOf("jqx-scheduler-appointment-resize-indicator")==-1){n=o.target}var u=o.target;for(var v=0;v<4;v++){if(u.parentNode){if(u.className.indexOf("jqx-scheduler-appointment")>=0&&u.className.indexOf("jqx-scheduler-appointment-innter-content")==-1&&u.className.indexOf("jqx-scheduler-appointment-content")==-1&&u.className.indexOf("jqx-scheduler-appointment-resize-indicator")==-1){n=u}u=u.parentNode}else{break}}if(n){var B=i._views[i._view].type;var E=i._views[i._view];var D=i.getJQXAppointmentByElement(n);if(D.resizable){var t=D.duration();var p=D.allDay||t.days()>=1||(t.hours()==23&&t.minutes==59&&t.seconds==59);var z=a(n).coord();var w=a(n).position();i.selectedAppointmentBounds={top:z.top,left:z.left,width:a(n).width(),height:a(n).height()};i.selectedAppointmentTableBounds={top:w.top,left:w.left,width:a(n).width(),height:a(n).height()};var m=i.selectedAppointmentBounds;if(B=="weekView"||B=="dayView"){if(!p){if(A>=m.top-3&&A<=m.top+6){n.style.cursor="row-resize";i.topResize=true;i.bottomResize=false}else{if(A>=m.top+m.height-6&&A<=m.top+m.height+3){n.style.cursor="row-resize";i.topResize=false;i.bottomResize=true}else{n.style.cursor="pointer"}}}else{if(C>=m.left-3&&C<=m.left+6){n.style.cursor="col-resize";i.leftResize=true;i.rightResize=false}else{if(C>=m.left+m.width-6&&C<=m.left+m.width+3){n.style.cursor="col-resize";i.leftResize=false;i.rightResize=true}else{n.style.cursor="pointer"}}}}else{if(B=="monthView"&&D.elements.length>1){var s=i.table.coord();for(var v=0;v<D.elements.length;v++){var q=D.elements[v];var m={top:s.top+q.y,left:s.left+q.x,width:q.width,height:q.height};if((v==0&&!i.rtl)||(v==D.elements.length-1&&i.rtl)){if(C>=m.left-3&&C<=m.left+6){if(A>=m.top&&A<=m.top+m.height){n.style.cursor="col-resize";i.leftResize=true;i.rightResize=false;i.selectedAppointment=a(n);break}else{n.style.cursor="pointer"}}else{n.style.cursor="pointer"}}else{if((v==D.elements.length-1&&!i.rtl)||(v==0&&i.rtl)){if(C>=m.left+m.width-6&&C<=m.left+m.width+3){if(A>=m.top&&A<=m.top+m.height){n.style.cursor="col-resize";i.leftResize=false;i.rightResize=true;i.selectedAppointment=a(n);break}else{n.style.cursor="pointer"}}else{n.style.cursor="pointer"}}}}}else{if(C>=m.left-3&&C<=m.left+6){n.style.cursor="col-resize";i.leftResize=true;i.rightResize=false}else{if(C>=m.left+m.width-6&&C<=m.left+m.width+3){n.style.cursor="col-resize";i.leftResize=false;i.rightResize=true}else{n.style.cursor="pointer"}}}}}}if(!i.enableHover){return true}if(o.target.nodeName.toLowerCase()==="td"){var r=o.target}else{var r=i.findCell(C,A)}if(!r){return true}i._removeHoveredCell();if(i.renderedRecords&&i.renderedRecords.length===0){return true}if(i.isMouseDown){if(Math.abs(i.mousecaptureposition.left-C)>3||Math.abs(i.mousecaptureposition.top-A)>3){if(i.mousecaptureposition.clickedcell.length===0){i.selectionarea[0].style.visibility="hidden";return}if(i.lastHoveredCell!=r){if(i._selectRangeTimer){clearTimeout(i._selectRangeTimer)}i._selectRangeTimer=setTimeout(function(){i._selectRange(r,i.mousecaptureposition.clickedcell[0])},1)}i.lastHoveredCell=r}}else{if(!n){i._hoverCell(r)}}return true});this.addHandler(a(document),"keydown.jqxscheduler"+i.element.id,function(m){if(i.focused&&m.ctrlKey){if(m.keyCode==68){return false}}});this.addHandler(this.host,"keydown",function(m){return i._handleKey(m)});if(a.jqx.browser.msie&&a.jqx.browser.version<9){this.addHandler(this.table,"dblclick",function(m){i.table.trigger("mousedown",m)})}var j=function(G){var H=G.target;var t=null;if(i.disabled){return true}if(!i.menu&&G.which==3){i._initMenu()}var m=i.table.coord();var z=G.pageX;var v=G.pageY;if(a.jqx.browser.msie&&a.jqx.browser.version<9){if(arguments&&arguments.length==2){z=arguments[1].pageX;v=arguments[1].pageY}}if(i.isTouchDevice()){var I=a.jqx.position(G);z=I.left;v=I.top;if(isNaN(z)||isNaN(v)){var I=a.jqx.position(G.originalEvent);z=I.left;v=I.top}}var t=i.findCell(z,v);if(G.target.nodeName.toLowerCase()==="td"){var t=G.target}else{var t=i.findCell(z,v)}if(G.target.nodeName.toLowerCase()==="span"&&(G.target.className.indexOf("jqx-icon-arrow-down")>=0||G.target.className.indexOf("jqx-icon-close")>=0)){if(G.target.mousedown){G.target.mousedown()}return true}var r=a(t).parent();var K=r.attr("data-key");i.mousecaptureposition={left:G.pageX,top:G.pageY,clickedrow:a(r).index(),clickedcell:a(t)};if(G.which!==3){i.isMouseDown=true}else{i.isMouseDown=false}if(i.contextMenu&&i.menu&&G.which!==3){i.menu.jqxMenu("close");i._hasOpenedMenu=false}var q=function(y){if(G.which===3){if(i.contextMenu&&i.menu){if(y){i.menu.find("li:first").show()}else{i.menu.find("li:first").hide()}var x=i.menu.coord();if(i.menu.css("display")=="block"&&x.left==G.pageX&&x.top==G.pageY){i._hasOpenedMenu=true;G.preventDefault();G.stopPropagation();return}i.menu.jqxMenu("open",G.pageX,G.pageY);i._hasOpenedMenu=true;G.preventDefault();G.stopPropagation();setTimeout(function(){i.menu.jqxMenu("focus")},50)}}};var F=function(){for(var L=0;L<w.length;L++){var y=w[L].cells;for(var x=0;x<y.length;x++){y[x].removeAttribute("data-selected")}}};var p=G.target.className.indexOf("jqx-scheduler-appointment")>=0&&G.target.className.indexOf("jqx-scheduler-appointment-inner-content")==-1&&G.target.className.indexOf("jqx-scheduler-appointment-status")==-1&&G.target.className.indexOf("jqx-scheduler-appointment-resize-indicator")==-1&&G.target.className.indexOf("jqx-scheduler-appointment-content")==-1?a(G.target):a(G.target).parents(".jqx-scheduler-appointment");if(p.length==0){p=null}if(p&&p[0].className.indexOf("feedback")==-1){if(p.parents(".jqx-scheduler-month-cell-popup").length>0){return true}i.mouseDownPosition={top:v,left:z};var E=a(p).coord();i.selectedAppointmentBounds={top:E.top,left:E.left,width:a(p).width(),height:a(p).height()};var I=a(p).position();i.selectedAppointmentTableBounds={top:I.top,left:I.left,width:a(p).width(),height:a(p).height()};if(!i._dragStartCell){i._dragStartCell=i.findCell(E.left,E.top)}var o=i.getJQXAppointmentByElement(p);i._selectAppointment(o,p,"mouse");i._raiseEvent("appointmentClick",{appointment:o.boundAppointment});i.clearSelection();var s=new Date().getTime();var C=300;if(a.jqx.browser.msie&&a.jqx.browser.version<9){C=1000}if(!i.clickTime){i.clickTime=new Date()}if((s-i.clickTime.getTime()<C)&&i._lastSelectedAppointment&&o.id==i._lastSelectedAppointment.id&&G.which!=3){if(!o.readOnly&&!i.editRecurrenceDialog.jqxWindow("isOpen")){var A=i._initDialog(o);if(A!==false){i._openDialog()}}i.mouseDownPosition=null;i.isMouseDown=false;if(G.preventDefault){G.preventDefault()}i._raiseEvent("appointmentDoubleClick",{appointment:o.boundAppointment})}else{i.focus()}i._lastSelectedAppointment=o;if(G.preventDefault){G.preventDefault()}G.stopPropagation();i.clickTime=new Date();if(!o.readOnly){if(G.which==3){q(true)}}return}else{if(G.which===3){var J=i.getSelection();if(J!==null){q(false)}else{i.clearAppointmentsSelection();t.setAttribute("data-selected","true");i._lastSelectedCell=t;i.focusedCell=t;i._updateCellsSelection(t);q(false);i._raiseEvent("cellClick",{cell:t})}}else{if(G.which!=3){i.clearAppointmentsSelection()}}}var B=function(){if(!i.enableBrowserSelection){if(G.preventDefault){G.preventDefault()}}var x=a(document).scrollTop();i.host.focus();a(document).scrollTop(x)};if(K!==undefined&&G.which!=3){i.clickedTD=t;i._raiseEvent("cellClick",{cell:t});var n=i.rowinfo[K];var D=false;if(n){var s=new Date().getTime();var C=300;if(!i.clickTime){i.clickTime=new Date()}i.focus();if(i._lastSelectedCell&&i._lastSelectedCell.getAttribute("data-selected")=="true"&&t.getAttribute("data-selected")==="true"&&(s-i.clickTime.getTime()<C)){i._raiseEvent("cellDoubleClick",{cell:t});D=true;i._initDialog();i._openDialog();if(G.preventDefault){G.preventDefault()}}}var w=i.table[0].rows;if(t.getAttribute("data-selected")!="true"||G.shiftKey||s-i.clickTime.getTime()>C){if(t.getAttribute("data-time-slot")=="true"){return}if(!G.shiftKey){i.shiftSelectedCell=null}if(G.shiftKey&&i._lastSelectedCell){if(!i.shiftSelectedCell){i.shiftSelectedCell=i._lastSelectedCell}if(t.getAttribute("data-view")===i.shiftSelectedCell.getAttribute("data-view")){F()}i._selectRange(t,i.shiftSelectedCell)}if(!G.shiftKey){F();var u=i._getDateByString(t.getAttribute("data-date"));if(u>=i.min.toDate()&&u<=i.max.toDate()){t.setAttribute("data-selected","true")}else{t.setAttribute("data-selected","false")}}a('[data-key="'+K+'"]').removeClass(i.toTP("jqx-scheduler-selected-appointment"));i.selectedAppointment=null;var u=i._getDateByString(t.getAttribute("data-date"));if(u>=i.min.toDate()&&u<=i.max.toDate()){i._lastSelectedCell=t;i.focusedCell=t}i._updateCellsSelection(t);if(i.openedMonthCellPopup){i.openedMonthCellPopup.remove()}}i.clickTime=new Date();if(G.stopPropagation){G.stopPropagation()}}};this.addHandler(this.pinnedtable,d,function(n){var m=j(n);if(m!=undefined){return m}});this.addHandler(this.table,d,function(n){var m=j(n);if(m!=undefined){return m}})},moveAppointment:function(l,d,h,g,k){var i=this;var j=g.getAttribute("data-end-date");if(l){if(i.editRecurrenceDialog.jqxWindow("isOpen")){return}clearInterval(i._verticalIntervalDragVelocity);clearInterval(i._horizontalIntervalDragVelocity);clearInterval(i._intervalDrag);clearInterval(i._horizontalIntervalDrag);var e=l.duration();var c=l.duration().days()>=1||l.allDay;var f=function(s){if(!k){var m=i._views[i._view].type;var p=i._views[i._view];var q=d;l.from=q;if(m==="dayView"||m==="weekView"){if(!c&&!j){l.to=q.add(e);l.allDay=false}else{if(!c&&j){l.to=a.jqx.scheduler.utilities.getEndOfDay(q);l.allDay=true}else{if(c&&j){l.to=q.add(e)}else{if(c&&!j){var o=30;var r=p.timeRuler&&p.timeRuler.scale;switch(r){case"sixtyMinutes":case"hour":o=60;break;case"fifteenMinutes":case"quarterHour":o=15;break;case"tenMinutes":o=10;break;case"fiveMinutes":o=5;break}l.to=q.addMinutes(o);l.allDay=false}}}}}else{if(m==="monthView"){l.to=q.add(e)}else{if(m==="timelineDayView"||m==="timelineWeekView"||m==="timelineMonthView"){l.to=q.add(e)}}}}i._saveChangesAfterDragOrResize(s,l,g,k);if(h!=null){l.resourceId=h}i.table.find(".jqx-icon-arrow-down").hide();if(l.allDay||c){i._renderrows()}else{var t=i.getViewStart();var n=a.jqx.scheduler.utilities.getEndOfDay(i.getViewEnd());i._prepareAppointmentsInView(t,n);i._renderAppointments(t,n)}i._raiseEvent("appointmentChange",{appointment:l.boundAppointment});i.changedAppointments[l.id]={type:"Update",appointment:l.boundAppointment};i._ensureAppointmentVisible(i.selectedJQXAppointment)};if(l.isRecurrentAppointment()){f(false)}else{f(null)}}},getAppointmentProperty:function(e,c){var f=this;var d=null;if(this.appointmentsByKey[e]){d=this.appointmentsByKey[e].jqxAppointment}if(!d){return}return d[c]},setAppointmentProperty:function(f,c,h){var g=this;var d=null;if(this.appointmentsByKey[f]){d=this.appointmentsByKey[f].jqxAppointment}if(!d){return}d[c]=h;g.changedAppointments[f]={type:c,appointment:d.boundAppointment};switch(f){case"draggable":case"resizable":break;case"background":case"color":case"borderColor":case"status":case"tooltip":case"subject":case"location":case"description":case"style":var i=g.getViewStart();var e=a.jqx.scheduler.utilities.getEndOfDay(g.getViewEnd());g._prepareAppointmentsInView(i,e);g._renderAppointments(i,e);break;case"hidden":case"timeZone":if(d.isAllDayAppointment()){g._renderrows()}else{var i=g.getViewStart();var e=a.jqx.scheduler.utilities.getEndOfDay(g.getViewEnd());g._prepareAppointmentsInView(i,e);g._renderAppointments(i,e)}break;default:g._renderrows()}},deleteAppointment:function(c){if(this.appointmentsByKey[c]){this._deleteAppointment(this.appointmentsByKey[c].jqxAppointment)}},_deleteAppointment:function(c){var h=this;if(c.rootAppointment){if(!c.isException()){if(c.rootAppointment!=null){c.rootAppointment.exceptions.push(h.editAppointment);c.rootAppointment.recurrenceException.push(h.editAppointment.occurrenceFrom)}else{c.exceptions.push(h.editAppointment);c.recurrenceException.push(h.editAppointment.occurrenceFrom)}}else{var g=c.rootAppointment?c.rootAppointment.exceptions:c.exceptions;for(var f=0;f<g.length;f++){if(g[f].occurrenceFrom.equals(h.editAppointment.occurrenceFrom)){g[f]=c;break}}}c.hidden=true;h._renderrows();return}h._raiseEvent("appointmentDelete",{appointment:c.boundAppointment});var e=c.id;delete h.appointmentsByKey[e];var d=-1;for(var f=0;f<h.appointments.length;f++){if(h.appointments[f]==c.boundAppointment||h.appointments[f].id==c.boundAppointment.id){d=f;break}}if(d!=-1){h.appointments.splice(d,1)}d=-1;for(var f=0;f<h.uiappointments.length;f++){if(h.uiappointments[f]==c||h.uiappointments[f].id==c.id){d=f;break}}if(d!=-1){h.uiappointments.splice(d,1)}if(h.selectedJQXAppointment==c){h.clearAppointmentsSelection();if(h.uiappointments[d+1]){h.selectAppointment(h.uiappointments[d+1].id)}else{if(h.uiappointments[d-1]){h.selectAppointment(h.uiappointments[d-1].id)}else{if(h.uiappointments[0]){h.selectAppointment(h.uiappointments[0].id)}}}}h.changedAppointments[e]={type:"Delete",appointment:c.boundAppointment};h._renderrows()},addAppointment:function(n){var h=this;if(!n.scheduler){n.scheduler=this}if(!n.duration){if(!n.from&&!n.to){var g=n;var e={};var f=["from","to","id","style","description","location","subject","background","color","borderColor","recurrencePattern","recurrenceException","draggable","resizable","tooltip","hidden","allDay","timeZone","ownerId","resourceId"];for(var u in h.appointmentDataFields){var c=h.appointmentDataFields[u];var p=g[c];if(u=="from"||u=="to"){p=new a.jqx.date(p)}if(u=="style"){if(p){var k=h.getAppointmentColors(p);e.color=k.color;e.background=k.background;e.borderColor=k.border}}if(u=="recurrencePattern"){if(p){p=new a.jqx.scheduler.recurrencePattern(p);p.timeZone=g.timeZone||h.timeZone}}if(u=="recurrenceException"){var r=new Array();if(p){if(p.indexOf("EXDATE:")>=0){p=p.substring(p.indexOf("EXDATE:")+7)}var l=new Array();if(p.indexOf(",")>=0){l=p.split(",")}else{l.push(p)}for(var q=0;q<l.length;q++){var o=l[q];if(o.indexOf(";")>=0){var i=o.split(";")[1];o=o.split(";")[0];if(i.toLowerCase().indexOf("display")>=0&&i.toLowerCase().indexOf("none")){e.hidden=true}}try{var s=a.jqx.scheduler.utilities.untilStringToDate(o);if(s!="Invalid Date"){if(e.timeZone){s=new a.jqx.date(s,e.timeZone)}else{if(h.timeZone){s=s.toTimeZone(h.timeZone)}else{s=new a.jqx.date(s)}}}}catch(t){var s=new a.jqx.date(o,h.timeZone)}r.push(s)}}p=r}e[u]=p}for(var m in f){var u=f[m];if(e[u]==undefined){var p="";if(u=="originalData"){continue}if(u=="ownerId"){p=null}if(u=="timeZone"){p=null}if(u=="recurrencePattern"){p=null}if(u=="recurrenceException"){p=null}if(u=="allDay"){p=false}if(u=="draggable"){p=true}if(u=="resizable"){p=true}if(u=="hidden"){p=false}if(u=="resourceId"){p=null}if(u=="from"){p=new a.jqx.date()}if(u=="to"){p=new a.jqx.date().addHours(1)}e[u]=p}}e.originalData=g;var n=new a.jqx.scheduler.appointment(e);if(e.timeZone){n.from=n.from.toTimeZone(e.timeZone);n.to=n.to.toTimeZone(e.timeZone)}if(h.timeZone){if(!e.timeZone){n.timeZone=h.timeZone}n.from=n.from.toTimeZone(h.timeZone);n.to=n.to.toTimeZone(h.timeZone)}else{n.from=n.from.toTimeZone(null);n.to=n.to.toTimeZone(null)}}else{var j=new a.jqx.scheduler.appointment();for(var u in n){j[u]=n[u]}n=j}}var u=h.dataview.generatekey();n.id=u;h.appointmentsByKey[u]=n;h.appointments.push(n);var d={};for(var u in h.appointmentDataFields){var c=h.appointmentDataFields[u];var p=n[u];if(u=="from"||u=="to"){p=p.toDate()}d[c]=p}n.boundAppointment=d;n.jqxAppointment=n;h._raiseEvent("appointmentAdd",{appointment:n.boundAppointment});h.uiappointments.push(n);h.changedAppointments[u]={type:"Add",appointment:n.boundAppointment};if(h.hiddenResources&&h.hiddenResources[n.resourceId]){h.hideAppointmentsByResource(n.resourceId)}else{h._renderrows()}h._selectAppointment(n);h._lastSelectedAppointment=n},initRepeatPanels:function(i,k,d){var j=this;var c=a("<div></div>");k.append(c);var l=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatString+"</div>").appendTo(c);var n=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(c);var m=a("<div></div>").appendTo(n);var s=a("<div></div>");k.append(s);var o=a("<div></div>");s.append(o);var q=function(I,B){var v=a("<div></div>").appendTo(I);var F=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatEndString+"</div>").appendTo(v);var E=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(v);var H=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+j.schedulerLocalization.editDialogRepeatNeverString+"</span></div>").appendTo(E);H.jqxRadioButton({rtl:j.rtl,groupName:"end"+B,theme:j.theme,width:200,height:25,checked:true});j.editDialogFields[B].repeatEndNever=H;j.editDialogFields[B].repeatEndNeverLabel=F;var A=a("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(v);var z=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(v);var G=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+j.schedulerLocalization.editDialogRepeatAfterString+"</span></div>").appendTo(z);G.jqxRadioButton({rtl:j.rtl,groupName:"end"+B,theme:j.theme,width:60,height:25,checked:false});var C=a("<div style='margin-left: 3px; float:left;'></div>").appendTo(z);C.jqxNumberInput({rtl:j.rtl,decimal:10,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});var w=a("<div style='float: left; margin-left: 5px; line-height:25px;'>"+j.schedulerLocalization.editDialogRepeatOccurrencesString+"</div>").appendTo(z);j.editDialogFields[B].repeatEndAfter=G;j.editDialogFields[B].repeatEndAfterValue=C;j.editDialogFields[B].repeatEndAfterLabel=A;var y=a("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(v);var x=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(v);var u=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+j.schedulerLocalization.editDialogRepeatOnString+"</span></div>").appendTo(x);u.jqxRadioButton({rtl:j.rtl,groupName:"end"+B,theme:j.theme,height:25,checked:false});var D=a("<div style='margin-left: 3px; float:left;'></div>").appendTo(x);D.jqxDateTimeInput({rtl:j.rtl,localization:j._getDateTimeInputLocalization(),firstDayOfWeek:j.schedulerLocalization.firstDay,todayString:j.schedulerLocalization.todayString,clearString:j.schedulerLocalization.clearString,value:d,formatString:j.editDialogDateFormatString,height:25,width:150,theme:j.theme});var t=D.jqxDateTimeInput("getInstance");j.editDialogFields[B].repeatEndOn=u;j.editDialogFields[B].repeatEndOnValue=D;j.editDialogFields[B].repeatEndOnLabel=y;return v};o.detach();j.editDialogFields.repeatEndPanel={};j.editDialogFields.repeatEndPanelContainer=o;q(o,"repeatEndPanel");var r=function(){var A=a("<div style='visibility: hidden;'></div>").appendTo(a(document.body));var ae=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(A);var az=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(A);var an=a("<div style='float:left;'></div>").appendTo(az);an.jqxNumberInput({rtl:j.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});var W=a("<div style='float: left; margin-left: 5px; line-height:25px;'>"+j.schedulerLocalization.editDialogRepeatEveryDayString+"</div>").appendTo(az);j.editDialogFields.daily={};j.editDialogFields.daily.repeatDayInterval=an;j.editDialogFields.daily.repeatDayLabel=ae;j.editDialogFields.daily.panel=A;A.detach();j.editDialogFields.weekly={};var F=a("<div style='visibility: hidden;'></div>").appendTo(a(document.body));var ah=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(F);var u=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(F);var au=a("<div style='float:left;'></div>").appendTo(u);au.jqxNumberInput({rtl:j.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});var X=a("<div style='float: left; margin-left: 5px; line-height:25px;'>"+j.schedulerLocalization.editDialogRepeatEveryWeekString+"</div>").appendTo(u);j.editDialogFields.weekly.repeatWeekInterval=au;j.editDialogFields.weekly.repeatWeekIntervalLabel=ah;var G=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(F);var aa=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(F);var U=a("<div style='float:left;'></div>").appendTo(aa);j.editDialogFields.weekly.repeatDaysLabel=G;j.editDialogFields.weekly.repeatDays=new Array();for(var ax=0;ax<7;ax++){var Q=j._getDayName(ax,"firstTwoLetters");var C=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+Q+"</span></div>");U.append(C);var Z=ax==1?true:false;C.jqxCheckBox({rtl:j.rtl,height:25,checked:Z,width:50,theme:j.theme});j.editDialogFields.weekly.repeatDays.push(C)}j.editDialogFields.weekly.panel=F;F.detach();j.editDialogFields.monthly={};var V=a("<div style='visibility: hidden;'></div>").appendTo(a(document.body));var aw=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(V);var N=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(V);var B=a("<div style='float:left;'></div>").appendTo(N);B.jqxNumberInput({rtl:j.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});var aj=a("<div style='float: left; margin-left: 5px; line-height:25px;'>"+j.schedulerLocalization.editDialogRepeatEveryMonthString+"</div>").appendTo(N);j.editDialogFields.monthly.repeatMonth=B;j.editDialogFields.monthly.repeatMonthLabel=aw;var ao=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(V);var I=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(V);var y=a("<div style='float:left;'></div>").appendTo(I);var am=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+j.schedulerLocalization.editDialogRepeatEveryMonthDayString+"</span></div>").appendTo(y);am.jqxRadioButton({rtl:j.rtl,groupName:"month",height:25,width:60,checked:true,theme:j.theme});var ap=a("<div style='float:left;'></div>").appendTo(y);ap.jqxNumberInput({rtl:j.rtl,decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});j.editDialogFields.monthly.repeatMonthDay=ap;j.editDialogFields.monthly.repeatMonthDayBool=am;j.editDialogFields.monthly.repeatMonthDayLabel=ao;var P=a("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(V);var ak=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(V);var ab=a("<div style='float:left;'></div>").appendTo(ak);var H=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(ab);H.jqxRadioButton({groupName:"month",height:25,width:25,checked:false,theme:j.theme});var M=a("<div style='float:left;'></div>").appendTo(ab);var R=new Array();R.push(j.schedulerLocalization.editDialogRepeatFirstString);R.push(j.schedulerLocalization.editDialogRepeatSecondString);R.push(j.schedulerLocalization.editDialogRepeatThirdString);R.push(j.schedulerLocalization.editDialogRepeatFourthString);R.push(j.schedulerLocalization.editDialogRepeatLastString);M.jqxDropDownList({dropDownWidth:150,selectedIndex:0,source:R,autoDropDownHeight:true,height:25,width:"auto",theme:j.theme});var T=a("<div style='margin-left: 5px; float:left;'></div>").appendTo(ab);var ad=new Array();for(var ax=0;ax<7;ax++){var Q=j._getDayName(ax);ad.push(Q)}T.jqxDropDownList({rtl:j.rtl,dropDownWidth:150,autoDropDownHeight:true,selectedIndex:1,source:ad,height:25,width:"auto",theme:j.theme});j.editDialogFields.monthly.repeatDayOfWeekBool=H;j.editDialogFields.monthly.repeatDayOfWeek=T;j.editDialogFields.monthly.repeatDayOfWeekLabel=P;j.editDialogFields.monthly.repeatDayOfWeekType=M;j.editDialogFields.monthly.panel=V;V.detach();j.editDialogFields.yearly={};var ar=a("<div style='visibility: hidden;'></div>").appendTo(a(document.body));var S=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(ar);var al=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ar);var ac=a("<div style='float:left;'></div>").appendTo(al);ac.jqxNumberInput({decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});var E=a("<div style='float: left; margin-left: 5px; line-height:25px;'>"+j.schedulerLocalization.editDialogRepeatEveryYearString+"</div>").appendTo(al);j.editDialogFields.yearly.repeatYear=ac;j.editDialogFields.yearly.repeatYearLabel=S;var O=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(ar);var ai=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ar);var Y=a("<div style='float:left;'></div>").appendTo(ai);var ag=a("<div style='position:relative; top: 6px; float:left;'></span></div>").appendTo(Y);ag.jqxRadioButton({rtl:j.rtl,groupName:"year",height:25,width:25,checked:true,theme:j.theme});j.editDialogFields.yearly.repeatYearBool=ag;j.editDialogFields.yearly.repeatYearBoolLabel=O;var w=a("<div style='float:left;'></div>").appendTo(Y);var aq=new Array();for(var ax=0;ax<12;ax++){var ay=j.schedulerLocalization.months.names[ax];aq.push(ay)}w.jqxDropDownList({selectedIndex:0,height:25,dropDownWidth:150,width:"auto",source:aq,theme:j.theme});j.editDialogFields.yearly.repeatYearMonth=w;var z=a("<div style='margin-left: 5px; float:left;'></div>").appendTo(Y);z.jqxNumberInput({decimal:1,min:1,inputMode:"simple",height:25,width:50,spinButtons:true,decimalDigits:0,theme:j.theme});j.editDialogFields.yearly.repeatYearDay=z;var af=a("<div class='jqx-scheduler-edit-dialog-label'></div>").appendTo(ar);var t=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ar);var at=a("<div style='float:left;'></div>").appendTo(t);var D=a("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(at);D.jqxRadioButton({rtl:j.rtl,groupName:"year",height:25,width:25,checked:false,theme:j.theme});var av=a("<div style='float:left;'></div>").appendTo(at);j.editDialogFields.yearly.repeatDayOfWeekBool=D;j.editDialogFields.yearly.repeatDayOfWeekType=av;j.editDialogFields.yearly.repeatDayOfWeekLabel=af;var L=new Array();L.push(j.schedulerLocalization.editDialogRepeatFirstString);L.push(j.schedulerLocalization.editDialogRepeatSecondString);L.push(j.schedulerLocalization.editDialogRepeatThirdString);L.push(j.schedulerLocalization.editDialogRepeatFourthString);L.push(j.schedulerLocalization.editDialogRepeatLastString);av.jqxDropDownList({dropDownWidth:150,selectedIndex:0,source:L,autoDropDownHeight:true,height:25,width:"auto",theme:j.theme});var J=a("<div style='margin-left: 5px; float:left;'></div>").appendTo(at);j.editDialogFields.yearly.repeatDayOfWeek=J;var v=new Array();for(var ax=0;ax<7;ax++){var Q=j._getDayName(ax);v.push(Q)}J.jqxDropDownList({rtl:j.rtl,dropDownWidth:150,selectedIndex:1,autoDropDownHeight:true,source:v,height:25,width:"auto",theme:j.theme});var aq=new Array();var K=a("<div style='line-height:25px; height: 25px; margin-left: 5px; float:left;'>"+j.schedulerLocalization.editDialogRepeatOfString+"</div>").appendTo(at);var x=a("<div style='margin-left: 5px; float:left;'></div>").appendTo(at);for(var ax=0;ax<12;ax++){var ay=j.schedulerLocalization.months.names[ax];aq.push(ay)}j.editDialogFields.yearly.repeatDayOfWeekMonth=x;x.jqxDropDownList({rtl:j.rtl,dropDownWidth:150,selectedIndex:0,source:aq,height:25,width:"auto",theme:j.theme});j.editDialogFields.yearly.panel=ar;ar.detach()};if(j.editAppointment&&j.editAppointment.rootAppointment){r()}else{r()}var h=a("<div></div>");k.append(h);var g=a("<div class='jqx-scheduler-edit-dialog-label'>"+j.schedulerLocalization.editDialogExceptionsString+"</div>").appendTo(h);var f=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(h);var e=a("<div style='position:relative; top: 6px;'>"+j.schedulerLocalization.editDialogResetExceptionsString+"</div>").appendTo(f);e.jqxCheckBox({height:25,width:25,theme:j.theme});h.hide();j.editDialogFields.resetExceptions=e;j.editDialogFields.resetExceptionsLabel=g;j.editDialogFields.resetExceptionsContainer=h;var p=new Array();p.push(j.schedulerLocalization.editDialogRepeatNeverString);p.push(j.schedulerLocalization.editDialogRepeatDailyString);p.push(j.schedulerLocalization.editDialogRepeatWeeklyString);p.push(j.schedulerLocalization.editDialogRepeatMonthlyString);p.push(j.schedulerLocalization.editDialogRepeatYearlyString);m.jqxDropDownList({rtl:j.rtl,width:"100%",height:25,autoDropDownHeight:true,theme:j.theme,source:p,selectedIndex:0});j.editDialogFields.repeat=m;j.editDialogFields.repeatLabel=l;j.editDialogFields.repeatContainer=c;j.editDialogFields.repeatPanel=s;this.addHandler(m,"change",function(v){var u=v.args.item.index;var t=function(){s.children().detach();switch(u){case 0:break;case 1:j.editDialogFields.daily.panel.css("visibility","visible");s.append(j.editDialogFields.daily.panel);break;case 2:j.editDialogFields.weekly.panel.css("visibility","visible");s.append(j.editDialogFields.weekly.panel);break;case 3:j.editDialogFields.monthly.panel.css("visibility","visible");s.append(j.editDialogFields.monthly.panel);break;case 4:j.editDialogFields.yearly.panel.css("visibility","visible");s.append(j.editDialogFields.yearly.panel);break}s.append(o);if(u==0){j.editDialogFields.repeatEndPanelContainer.hide()}else{j.editDialogFields.repeatEndPanelContainer.show()}if(!j.isTouchDevice()){i.jqxWindow({height:150});i.jqxWindow({height:k[0].scrollHeight+40})}}()})},_initDialog:function(c,d){var o=this;var l=null;if(c&&c.isRecurrentAppointment()&&!o.editRecurrenceDialog.jqxWindow("isOpen")){var n=o.host.coord();var q=n.top+o.host.height()/2-o.editRecurrenceDialog.height()/2;var h=n.left+o.host.width()/2-o.editRecurrenceDialog.width()/2;o.editRecurrenceDialog.find("button:first").focus();setTimeout(function(){o.editRecurrenceDialog.find("button:first").focus()},25);o.editRecurrenceDialog.jqxWindow("move",h,q);o.editRecurrenceDialog.jqxWindow("open");o.editSeries=function(i){if(i){o._initDialog(c.rootAppointment);o._openDialog()}else{o._initDialog(c);o._openDialog()}};o.overlay.show();o.overlay.width(o.host.width());o.overlay.height(o.host.height());var n=o.host.coord();o.overlay.offset(n);if(!o.editDialog){o._initDialog()}return false}o.editAppointment=c;if(!c){l=o.getSelection();if(!l){o.focus();o.focusedCell.setAttribute("data-selected","true");o._lastSelectedCell=o.focusedCell;o._updateCellsSelection(o.focusedCell);l=o.getSelection()}}if(l||c){var e=l?l.from:c.from;var j=l?l.to:c.to;var p=o.getSelectedCells();if(p.length>0){var g=p[p.length-1].getAttribute("data-end-date");if(g){j=a.jqx.scheduler.utilities.getEndOfDay(j)}}o._editStart=e;o._editEnd=j}if(o.editDialogFields&&o.editDialogFields.resourceContainer&&o._resources.length>0){var f=new Array();for(var k=0;k<o._resources.length;k++){f.push(o._resources[k])}var s=true;if(f.length>10){s=false}o.editDialogFields.resource.jqxDropDownList({source:f,selectedIndex:0,autoDropDownHeight:s});if(!c){o.editDialogFields.resource.val(l.resourceId)}}if(o.editDialogFields&&o.editDialogFields.repeatContainer){if(c&&c.rootAppointment){o.editDialogFields.repeatContainer.hide();o.editDialogFields.repeatPanel.hide()}else{o.editDialogFields.repeatContainer.show();o.editDialogFields.repeatPanel.show()}}if(o.editDialog==null){o.editDialog=null;var r=c==null?o.schedulerLocalization.editDialogCreateTitleString:o.schedulerLocalization.editDialogTitleString;var m=a("<div><div>"+r+"</div><div id='dialog"+this.element.id+"'></div></div>");a(m).jqxWindow({rtl:o.rtl,autoFocus:false,autoOpen:false,animationType:"none",theme:o.theme,width:530,maxHeight:800,minHeight:110,resizable:false,initContent:function(){o.editDialogFields={};if(e==null&&j==null&&o._editStart&&o._editEnd){e=o._editStart;j=o._editEnd}m.jqxWindow("setTitle",r);var I=a(m.children()[1]);var B=a("<div></div>");I.append(B);var D=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogSubjectString+"</div>").appendTo(B);var ae=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(B);var V=a("<input/>").appendTo(ae);V.jqxInput({rtl:o.rtl,width:"100%",height:25,theme:o.theme});o.editDialogFields.subject=V;o.editDialogFields.subjectLabel=D;o.editDialogFields.subjectContainer=B;var Q=a("<div></div>");I.append(Q);var A=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogLocationString+"</div>").appendTo(Q);var aa=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(Q);var U=a("<input/>").appendTo(aa);U.jqxInput({rtl:o.rtl,width:"100%",height:25,theme:o.theme});o.editDialogFields.location=U;o.editDialogFields.locationLabel=A;o.editDialogFields.locationContainer=Q;var M=a("<div></div>");I.append(M);var Y=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogFromString+"</div>").appendTo(M);var aw=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(M);var ar=a("<div></div>").appendTo(aw);var W=null;if(!e){var az=new Date();az.setHours(9,0,0);W=az}else{W=e.toDate()}ar.jqxDateTimeInput({rtl:o.rtl,localization:o._getDateTimeInputLocalization(),firstDayOfWeek:o.schedulerLocalization.firstDay,todayString:o.schedulerLocalization.todayString,clearString:o.schedulerLocalization.clearString,value:W,formatString:o.editDialogDateTimeFormatString,width:"100%",showTimeButton:true,height:25,theme:o.theme});o.editDialogFields.from=ar;o.editDialogFields.fromLabel=Y;o.editDialogFields.fromContainer=M;var aD=a("<div></div>");I.append(aD);var z=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogToString+"</div>").appendTo(aD);var Z=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(aD);var T=a("<div></div>").appendTo(Z);var y=null;if(!j){var az=new Date();az.setHours(10,0,0);y=az}else{y=j.toDate()}T.jqxDateTimeInput({rtl:o.rtl,localization:o._getDateTimeInputLocalization(),firstDayOfWeek:o.schedulerLocalization.firstDay,todayString:o.schedulerLocalization.todayString,clearString:o.schedulerLocalization.clearString,value:y,formatString:o.editDialogDateTimeFormatString,width:"100%",showTimeButton:true,height:25,theme:o.theme});o.editDialogFields.to=T;o.editDialogFields.toLabel=z;o.editDialogFields.toContainer=aD;o._changeFromUser=true;o.addHandler(ar,"change",function(aI){if(!o._changeFromUser){return}var aG=aI.args;var aL=aI.args.oldValue;var aK=T.val("date");var aF=new a.jqx.date(aK)-new a.jqx.date(aL);if(aF>0){var aH=aF*10000;var aJ=a.jqx.timeSpan(aH);var i=new a.jqx.date(aI.args.newValue).add(aJ);T.val(i.toDate())}});o.addHandler(T,"change",function(aF){if(!o._changeFromUser){return}var i=aF.args;var aH=aF.args.oldValue;var aG=T.val("date");if(ar.val("date")>=aG){T.val(aH)}});var u=a("<div></div>");I.append(u);var S=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogAllDayString+"</div>").appendTo(u);var at=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(u);var aj=a("<div style='position:relative; top: 6px;'></div>").appendTo(at);aj.jqxCheckBox({rtl:o.rtl,height:25,width:25,theme:o.theme});o.editDialogFields.allDay=aj;o.editDialogFields.allDayLabel=S;o.editDialogFields.allDayContainer=u;o.addHandler(u,"change",function(i){if(i.args.checked){T.jqxDateTimeInput({showTimeButton:false,formatString:o.editDialogDateFormatString});ar.jqxDateTimeInput({showTimeButton:false,formatString:o.editDialogDateFormatString})}else{T.jqxDateTimeInput({showTimeButton:true,formatString:o.editDialogDateTimeFormatString});ar.jqxDateTimeInput({showTimeButton:true,formatString:o.editDialogDateTimeFormatString})}});if(a.jqx.scheduler.utilities.getStartOfDay(e).equals(e)&&a.jqx.scheduler.utilities.getEndOfDay(j).equals(j)){o.editDialogFields.allDay.val(true)}if(o._views[o._view].type.indexOf("month")>=0||(e&&e.equals(j))||(j&&j.equals(a.jqx.scheduler.utilities.getEndOfDay(j)))){o.editDialogFields.allDay.val(true)}var x=a("<div></div>");I.append(x);var X=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogTimeZoneString+"</div>").appendTo(x);var au=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(x);var ap=a("<div></div>").appendTo(au);var v=new Array();v.push({displayName:o.schedulerLocalization.editDialogSelectTimeZoneString,id:null});v=v.concat(o.timeZones);for(var ax=0;ax<v.length;ax++){var av=v[ax];var H=av.displayName.indexOf(")");if(H>=0){var ag=av.displayName.substring(2+H)}else{var ag=av.displayName}av.searchName=ag}ap.jqxDropDownList({rtl:o.rtl,placeHolder:o.schedulerLocalization.editDialogSelectTimeZoneString,width:"100%",height:25,theme:o.theme,searchMember:"searchName",source:v,displayMember:"displayName",valueMember:"id"});o.editDialogFields.timeZone=ap;o.editDialogFields.timeZoneLabel=X;o.editDialogFields.timeZoneContainer=x;o.initRepeatPanels(m,I,j.toDate());if(o.editDialogFields&&o.editDialogFields.repeatContainer){if(o.editAppointment&&o.editAppointment.rootAppointment){o.editDialogFields.repeatContainer.hide();o.editDialogFields.repeatPanel.hide()}else{o.editDialogFields.repeatContainer.show();o.editDialogFields.repeatPanel.show()}}var L=a("<div></div>");I.append(L);var aB=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogDescriptionString+"</div>").appendTo(L);var P=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(L);var E=a("<textarea resizable='off' style='position:relative; top: 3px;'></textarea>").appendTo(P);E.jqxInput({rtl:o.rtl,height:40,width:"100%",theme:o.theme});o.editDialogFields.description=E;o.editDialogFields.descriptionLabel=aB;o.editDialogFields.descriptionContainer=L;var ad=a("<div></div>");I.append(ad);var aE=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogColorString+"</div>").appendTo(ad);var R=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ad);var G=a("<div></div>").appendTo(R);var J=function(aF){if(aF==-1){return""}var i=o.colors[aF];var aG="";var aG="";aG+="<div style='margin-top: 1px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+i+"; margin-left: 2%;'></div>";return aG};var ao=function(aH,aF){if(aF<0){aH.css("top","4px");aH.css("position","relative");return aH[0].outerHTML}var i=o.colors[aF];var aG="";aG+="<div style='margin-top: 2px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+i+"; margin-left: 2%;'></div>";return aG};G.jqxDropDownList({rtl:o.rtl,selectedIndex:-1,placeHolder:o.schedulerLocalization.editDialogColorPlaceHolderString,selectionRenderer:ao,renderer:J,source:o.colors,height:25,width:"100%",theme:o.theme});o.editDialogFields.color=G;o.editDialogFields.colorLabel=aE;o.editDialogFields.colorContainer=ad;var ai=a("<div></div>");I.append(ai);var aA=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogStatusString+"</div>").appendTo(ai);var O=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ai);var C=a("<div></div>").appendTo(O);C.jqxDropDownList({rtl:o.rtl,selectedIndex:2,autoDropDownHeight:true,source:o.schedulerLocalization.editDialogStatuses,height:25,width:"100%",theme:o.theme});o.editDialogFields.status=C;o.editDialogFields.statusLabel=aA;o.editDialogFields.statusContainer=ai;var ah=a("<div></div>");I.append(ah);var N=a("<div class='jqx-scheduler-edit-dialog-label'>"+o.schedulerLocalization.editDialogResourceIdString+"</div>").appendTo(ah);var an=a("<div class='jqx-scheduler-edit-dialog-field'></div>").appendTo(ah);var ac=a("<div></div>").appendTo(an);var F=new Array();for(var ax=0;ax<o._resources.length;ax++){F.push(o._resources[ax])}var w=true;if(F.length>10){w=false}ac.jqxDropDownList({rtl:o.rtl,source:F,selectedIndex:0,autoDropDownHeight:w,height:25,width:"100%",theme:o.theme});o.editDialogFields.resource=ac;o.editDialogFields.resourceLabel=N;o.editDialogFields.resourceContainer=ah;if(F.length==0){ah.hide()}if(!c&&l){o.editDialogFields.resource.val(l.resourceId)}var af=a("<div></div>");I.append(af);var am=a("<div style='width:100%;' class='jqx-scheduler-edit-dialog-field'></div>").appendTo(af);var aq=a("<button style='margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogCancelString+"</button>").appendTo(am);var ak=a("<button style='margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogDeleteString+"</button>").appendTo(am);var al=a("<button style='display: none; margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogRepeatDeleteSeriesString+"</button>").appendTo(am);var K=a("<button style='display: none; margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogRepeatDeleteString+"</button>").appendTo(am);var ab=a("<button style='margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogSaveString+"</button>").appendTo(am);var aC=a("<button style='display: none; margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogRepeatSaveSeriesString+"</button>").appendTo(am);var t=a("<button style='display: none; margin-left: 5px; float:right;'>"+o.schedulerLocalization.editDialogRepeatSaveString+"</button>").appendTo(am);var ay=25;if(o.isTouchDevice()){ay=null}ak.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});al.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});K.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});ab.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});aq.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});aC.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});t.jqxButton({rtl:o.rtl,theme:o.theme,height:ay});aC.hide();t.hide();o.editDialogFields.saveOccurrenceButton=t;o.editDialogFields.saveSeriesButton=aC;o.editDialogFields.saveButton=ab;o.editDialogFields.cancelButton=aq;o.editDialogFields.deleteButton=ak;o.editDialogFields.deleteSeriesButton=al;o.editDialogFields.deleteExceptionsButton=K;o.editDialogFields.buttons=am;o.addHandler(ak,"click",function(){m.jqxWindow("close");o.overlay.hide();o._deleteAppointment(o.editAppointment)});o.addHandler(aq,"click",function(){m.jqxWindow("close");o.overlay.hide()});o.addHandler(t,"click",function(){if(!o.editAppointment.isException()){if(o.editAppointment.rootAppointment!=null){o.editAppointment.rootAppointment.exceptions.push(o.editAppointment);o.editAppointment.rootAppointment.recurrenceException.push(o.editAppointment.occurrenceFrom)}else{o.editAppointment.exceptions.push(o.editAppointment);o.editAppointment.recurrenceException.push(o.editAppointment.occurrenceFrom)}}else{var aH=o.editAppointment.rootAppointment?o.editAppointment.rootAppointment.exceptions:o.editAppointment.exceptions;for(var aG=0;aG<aH.length;aG++){if(aH[aG].occurrenceFrom.equals(o.editAppointment.occurrenceFrom)){aH[aG]=o.editAppointment;break}}}var aF=o._setAppointmentPropertiesFromDialog(o.editAppointment,"occurrence");if(!aF){return}o.changedAppointments[o.editAppointment.id]={type:"Update",appointment:o.editAppointment.boundAppointment};o._raiseEvent("appointmentChange",{appointment:o.editAppointment.boundAppointment});o._renderrows();m.jqxWindow("close");o.overlay.hide()});o.addHandler(aC,"click",function(){var aF=o.editAppointment;if(aF.rootAppointment){aF=aF.rootAppointment}var i=o._setAppointmentPropertiesFromDialog(aF,"series");if(!i){return}o.changedAppointments[aF.id]={type:"Update",appointment:aF.boundAppointment};o._raiseEvent("appointmentChange",{appointment:aF.boundAppointment});o._renderrows();m.jqxWindow("close");o.overlay.hide()});o.addHandler(ab,"click",function(){var i=true;if(o.editAppointment==null){var aF=new a.jqx.scheduler.appointment();i=o._setAppointmentPropertiesFromDialog(aF,"none");if(i){o.addAppointment(aF)}}else{if(o.editAppointment.rootAppointment){t.trigger("click");i=false}else{if(o.editAppointment.isRecurrentAppointment()){aC.trigger("click");i=false}else{i=o._setAppointmentPropertiesFromDialog(o.editAppointment,"none");if(i){o.changedAppointments[o.editAppointment.id]={type:"Update",appointment:o.editAppointment?o.editAppointment.boundAppointment:null};o._raiseEvent("appointmentChange",{appointment:o.editAppointment.boundAppointment});o._renderrows()}}}}if(i){m.jqxWindow("close");o.overlay.hide()}});o.addHandler(m,"close",function(i){o.overlay.hide();o.focus();if(o.editDialogClose){o.editDialogClose(m,o.editDialogFields,o.editAppointment?o.editAppointment.boundAppointment:null)}o._raiseEvent("editDialogClose",{dialog:m,fields:o.editDialogFields,appointment:o.editAppointment?o.editAppointment.boundAppointment:null})});if(o.editDialogCreate){o.editDialogCreate(m,o.editDialogFields,o.editAppointment)}o._raiseEvent("editDialogCreate",{dialog:m,fields:o.editDialogFields,appointment:o.editAppointment?o.editAppointment.boundAppointment:null});m.jqxWindow({height:I[0].scrollHeight+40})}});o.editDialog=m}if(!o.dialogOpenings){o.dialogOpenings=0}o.removeHandler(o.editDialog,"open");o.addHandler(o.editDialog,"open",function(u){if(o.editDialogOpen&&o.editDialogFields){var i=o.editDialogOpen(m,o.editDialogFields,o.editAppointment?o.editAppointment.boundAppointment:null);if(i==true){return}}o._raiseEvent("editDialogOpen",{dialog:m,fields:o.editDialogFields,appointment:o.editAppointment?o.editAppointment.boundAppointment:null});var t=function(){setTimeout(function(){if(!d){o.editDialogFields.subject.focus();o.editDialogFields.subject.select()}else{o.editDialogFields.deleteButton.focus()}},1)};if(0==o.dialogOpenings&&!c){o.dialogOpenings++;if(!o.isTouchDevice()){o.editDialog.jqxWindow({height:150});o.editDialog.jqxWindow({height:a(o.editDialog.children())[1].scrollHeight+40})}t();return}if(o.editDialogFields){o.editDialogFields.subject.val("");t();o.editDialogFields.resetExceptions.val(false);o.editDialogFields.description.val("");if(!c){o.editDialogFields.deleteButton.hide()}if(c){o.dialogOpenings++;o.editDialogFields.deleteButton.show();o.editDialogFields.subject.val(c.subject);o.editDialogFields.description.val(c.description);o.editDialogFields.timeZone.val(c.timeZone);if(o.colors.indexOf(c.borderColor)>=0){o.editDialogFields.color.val(c.borderColor)}else{o.editDialogFields.color.jqxDropDownList("clearSelection")}o.editDialogFields.allDay.val(c.allDay);o.editDialogFields.resource.val(c.resourceId);o.editDialogFields.status.val(c.status);if(c.timeZone){c.from=c.from.toTimeZone(c.timeZone);c.to=c.to.toTimeZone(c.timeZone)}e=c.from;j=c.to;if(a.jqx.scheduler.utilities.getStartOfDay(e).equals(e)&&a.jqx.scheduler.utilities.getEndOfDay(j).equals(j)){o.editDialogFields.allDay.val(true)}o._setAppointmentPropertiesToDialog(c,e,j,l?l.resourceId:null)}else{o.editDialogFields.saveButton.show();o._setAppointmentPropertiesToDialog(null,e,j,l?l.resourceId:null)}if(e&&j){o._changeFromUser=false;o.editDialogFields.from.val(e.toDate());o.editDialogFields.to.val(j.toDate());o._changeFromUser=true}if(!o.isTouchDevice()){o.editDialog.jqxWindow({height:150});o.editDialog.jqxWindow({height:a(o.editDialog.children())[1].scrollHeight+40})}}});o.removeHandler(o.editDialog,"keydown");o.addHandler(o.editDialog,"keydown",function(t){if(o.editDialogKeyDown){var i=o.editDialogKeyDown(m,o.editDialogFields,o.editAppointment,t);if(i!=undefined){return i}}if(t.keyCode==13){if(a(document.activeElement).ischildof(o.editDialog)){if(document.activeElement.nodeName.toLowerCase()=="button"){return true}if(c){if(c.isException()||c.rootAppointment){o.editDialogFields.saveOccurrenceButton.trigger("click")}else{if(c.isRecurrentAppointment()){o.editDialogFields.saveSeriesButton.trigger("click")}else{o.editDialogFields.saveButton.trigger("click")}}}else{o.editDialogFields.saveButton.trigger("click")}}}else{if(t.keyCode==27){o.editDialogFields.cancelButton.trigger("click")}}})},openMenu:function(e,c){var d=this;if(!d.menu){d._initMenu()}if(d.contextMenu&&d.menu){if(!d.selectedAppointment){d.menu.jqxMenu("hideItem","editAppointment")}else{d.menu.jqxMenu("showItem","editAppointment")}if(arguments.length<2){if(d.selectedAppointment){var f=d.selectedAppointment.coord();e=f.left;c=f.top}else{if(d.focusedCell){var f=a(d.focusedCell).coord()}}e=f.left;c=f.top}d.menu.jqxMenu("open",e,c);d._hasOpenedMenu=true}},closeMenu:function(){var c=this;if(c.contextMenu&&c.menu){setTimeout(function(){c.menu.jqxMenu("close")})}},closeDialog:function(){that.editDialog.jqxWindow("close")},openDialog:function(d,e){var f=this;if(f.selectedJQXAppointment){var c=f._initDialog(f.selectedJQXAppointment);if(c!==false){f._openDialog(d,e)}}else{if(f.getSelection()==null){f.focus();f.focusedCell.setAttribute("data-selected","true");f._lastSelectedCell=f.focusedCell;f._updateCellsSelection(f.focusedCell)}f._initDialog();f._openDialog(d,e)}},_openDialog:function(c,e){var f=this;var j=f.host.coord();f.overlay.show();f.overlay.css("z-index",9999999);f.overlay.width(f.host.width());f.overlay.height(f.host.height());f.overlay.offset(j);var i=f.isTouchDevice();if(i){f.editDialog.jqxWindow("move",j.left,j.top);f.editDialog.jqxWindow({draggable:false,maxWidth:f.host.width(),maxHeight:f.host.height()});f.editDialog.jqxWindow({width:f.host.width(),height:f.host.height()});f.editDialog.jqxWindow("open")}else{if(c!=undefined&&e!=undefined){f.editDialog.jqxWindow("move",c,e);f.editDialog.jqxWindow("open")}else{var d=f.editDialog.height();if(d<400){d=400}var h=j.top+f.host.height()/2-d/2;var g=j.left+f.host.width()/2-f.editDialog.width()/2;f.editDialog.jqxWindow("move",g,h);f.editDialog.jqxWindow("open")}}setTimeout(function(){f.overlay.css("z-index",999)},50)},_setAppointmentPropertiesFromDialog:function(d,e){var f=this;var c=function(m){var v=f._views[f._view].type;var s=f._views[f._view];var x=f.editDialogFields.from.val("date");var h=f.editDialogFields.to.val("date");if(x>h){f.editDialogFields.from.jqxDateTimeInput("focus");return false}if(x==h){if(v.indexOf("month")>=0){return true}return false}m.resourceId=f.editDialogFields.resource.val();m.description=f.editDialogFields.description.val();m.allDay=f.editDialogFields.allDay.val();m.status=f.editDialogFields.status.val();m.location=f.editDialogFields.location.val();m.timeZone=f.editDialogFields.timeZone.val();if(m.timeZone==""&&f.timeZone!=""){m.timeZone=f.timeZone}m.from=new a.jqx.date(x,m.timeZone);m.to=new a.jqx.date(h,m.timeZone);if(f.timeZone){m.from=m.from.toTimeZone(f.timeZone);m.to=m.to.toTimeZone(f.timeZone)}else{m.from=m.from.toTimeZone(null);m.to=m.to.toTimeZone(null)}if(m.allDay){m.from=a.jqx.scheduler.utilities.getStartOfDay(m.from);m.to=a.jqx.scheduler.utilities.getEndOfDay(m.to)}if(f.editDialogFields.color.val()){var t=f.getAppointmentColors(f.editDialogFields.color.val());m.color=t.color;m.background=t.background;m.borderColor=t.border}m.subject=f.editDialogFields.subject.val();var g=f.editDialogFields.repeat.jqxDropDownList("selectedIndex");var q=new a.jqx.scheduler.recurrencePattern();var j=f.editDialogFields.repeatEndPanel;q.timeZone=f.timeZone;q.from=m.from.clone();if(e=="occurrence"){if(m.rootAppointment){q.from=m.rootAppointment.from.clone()}}if(f.editDialogFields.resetExceptions.val()){m.exceptions=new Array();m.recurrenceException=new Array()}if(j.repeatEndNever.val()){q.count=1000;q.to=new a.jqx.date(9999,12,31)}else{if(j.repeatEndAfter.val()){q.count=j.repeatEndAfterValue.val();q.to=new a.jqx.date(9999,12,31)}else{if(j.repeatEndOn.val()){q.count=1000;var h=new a.jqx.date(j.repeatEndOnValue.jqxDateTimeInput("getDate"),f.timeZone);q.to=h}}}switch(g){case 0:default:m.clearRecurrence();break;case 1:var k=f.editDialogFields.daily;var C=k.repeatDayInterval.val();q.interval=C;q.freq="daily";break;case 2:var u=f.editDialogFields.weekly;var C=u.repeatWeekInterval.val();var p=[{Sunday:0},{Monday:1},{Tuesday:2},{Wednesday:3},{Thursday:4},{Friday:5},{Saturday:6}];var o=u.repeatDays;var n=new Array();q.weekDays={};for(var z=0;z<7;z++){var y=o[z].val();if(y){if(z==0){n.push(6)}else{n.push(z-1)}a.extend(q.weekDays,p[z])}}q.freq="weekly";q.byweekday=n;q.interval=C;break;case 3:var A=f.editDialogFields.monthly;var C=A.repeatMonth.val();if(A.repeatMonthDayBool.val()){q.day=A.repeatMonthDay.val();q.bymonthday=new Array();q.bymonthday.push(q.day)}else{var w=A.repeatDayOfWeek.jqxDropDownList("selectedIndex");var r=new Array();if(w==0){w=6}else{w--}var l=A.repeatDayOfWeekType.jqxDropDownList("selectedIndex");var B="";switch(l){case 0:B=1;break;case 1:B=2;break;case 2:B=3;break;case 3:B=4;break;case 4:B=-1;break}r.push([w,B]);q.bynweekday=r}q.freq="monthly";q.interval=C;break;case 4:var D=f.editDialogFields.yearly;var C=D.repeatYear.val();if(D.repeatYearBool.val()){q.day=D.repeatYearDay.val();q.month=D.repeatYearMonth.jqxDropDownList("selectedIndex");q.bymonth=new Array();q.bymonth.push(1+q.month);q.byyearday=new Array();q.byyearday.push(q.day)}else{q.month=D.repeatDayOfWeekMonth.jqxDropDownList("selectedIndex");q.bymonth=new Array();q.bymonth.push(1+q.month);var w=D.repeatDayOfWeek.jqxDropDownList("selectedIndex");var r=new Array();if(w==0){w=6}else{w--}var l=D.repeatDayOfWeekType.jqxDropDownList("selectedIndex");var B="";switch(l){case 0:B=1;break;case 1:B=2;break;case 2:B=3;break;case 3:B=4;break;case 4:B=-1;break}r.push([w,B]);q.bynweekday=r}q.freq="yearly";q.interval=C;break}if(m.rootAppointment){m.rootAppointment.recurrencePattern=q}else{if(g>0){m.recurrencePattern=q}}return true}(d);return c},_setAppointmentPropertiesToDialog:function(f,i,e,h){var g=this;var d=function(){var p=g.editDialogFields.repeatEndPanel;p.repeatEndNever.jqxRadioButton({checked:true});p.repeatEndAfterValue.val(1);p.repeatEndOnValue.val(l);var l=e.toDate();if(g.editDialogFields.daily){var j=g.editDialogFields.daily;j.repeatDayInterval.val(1)}if(g.editDialogFields.weekly){var o=g.editDialogFields.weekly;for(var m=0;m<o.repeatDays.length;m++){if(m==1){o.repeatDays[m].jqxCheckBox({checked:true})}else{o.repeatDays[m].jqxCheckBox({checked:false})}}o.repeatWeekInterval.val(1)}if(g.editDialogFields.monthly){var n=g.editDialogFields.monthly;n.repeatDayOfWeek.jqxDropDownList("selectIndex",1);n.repeatDayOfWeekBool.jqxRadioButton({checked:false});n.repeatDayOfWeekType.jqxDropDownList("selectIndex",0);n.repeatMonthDayBool.jqxRadioButton({checked:true});n.repeatMonthDay.val(1);n.repeatMonth.val(1)}if(g.editDialogFields.yearly){var k=g.editDialogFields.yearly;k.repeatDayOfWeekMonth.jqxDropDownList("selectIndex",0);k.repeatDayOfWeekBool.jqxRadioButton({checked:false});k.repeatDayOfWeekType.jqxDropDownList("selectIndex",0);k.repeatDayOfWeek.jqxDropDownList("selectIndex",1);k.repeatYear.val(1);k.repeatYearMonth.jqxDropDownList("selectIndex",0);k.repeatYearDay.val(1);k.repeatYearBool.val(true)}};d();if(f&&f.isRecurrentAppointment()){if(!f.rootAppointment){g.editDialogFields.resetExceptionsContainer.show()}else{g.editDialogFields.resetExceptionsContainer.hide()}}else{if(f){g.editDialogFields.resetExceptionsContainer.hide();g.editDialogFields.repeat.jqxDropDownList("selectIndex",0)}}if(!f){g.editDialogFields.timeZone.jqxDropDownList("clearSelection");if(!h){g.editDialogFields.resource.jqxDropDownList("selectIndex",0)}else{g.editDialogFields.resource.val(h)}g.editDialogFields.allDay.val(false);if(g._views[g._view].type.indexOf("month")>=0||(i&&i.equals(e))||(e&&e.equals(a.jqx.scheduler.utilities.getEndOfDay(e)))){g.editDialogFields.allDay.val(true)}g.editDialogFields.color.jqxDropDownList("clearSelection");g.editDialogFields.description.val("");g.editDialogFields.subject.val("");g.editDialogFields.repeat.jqxDropDownList("selectIndex",0);return}var c=function(j){var r=j.recurrencePattern;if(j.rootAppointment){var r=j.rootAppointment.recurrencePattern}if(r==null){return}var k=r.freq;var p=0;if(k=="daily"){p=1}if(k=="weekly"){p=2}if(k=="monthly"){p=3}if(k=="yearly"){p=4}var n=g.editDialogFields.repeatEndPanel;if(r.count!=1000){n.repeatEndAfter.jqxRadioButton({checked:true});n.repeatEndAfterValue.val(r.count)}else{if(r.to.year()!=9999){n.repeatEndOn.jqxRadioButton({checked:true});n.repeatEndOnValue.val(r.to.toDate())}else{n.repeatEndNever.jqxRadioButton({checked:true})}}g.editDialogFields.repeat.jqxDropDownList("selectIndex",p);switch(p){case 1:var l=r.interval;var q=g.editDialogFields.daily;q.repeatDayInterval.val(l);break;case 2:var l=r.interval;var z=g.editDialogFields.weekly;z.repeatWeekInterval.val(l);var y=r.byweekday;for(var o=0;o<7;o++){var w=z.repeatDays[o];w.val(false)}for(var o=0;o<y.length;o++){var w=y[o];if(w==6){z.repeatDays[0].val(true)}else{z.repeatDays[w+1].val(true)}}break;case 3:var u=g.editDialogFields.monthly;u.repeatMonth.val(r.interval);if(r.bymonthday.length>0){u.repeatMonthDayBool.jqxRadioButton({checked:true});u.repeatMonthDay.val(r.day)}else{u.repeatDayOfWeekBool.jqxRadioButton({checked:true});var s=r.bynweekday;var m=s[0][0];m++;if(m==7){m=0}u.repeatDayOfWeek.jqxDropDownList("selectIndex",m);var x=s[0][1];var v="";switch(x){case 1:v=0;break;case 2:v=1;break;case 3:v=2;break;case 4:v=3;break;case -1:v=4;break}u.repeatDayOfWeekType.jqxDropDownList("selectIndex",v)}break;case 4:var t=g.editDialogFields.yearly;if(r.byyearday&&r.byyearday.length>0){t.repeatYearDay.val(r.byyearday[0]);t.repeatYearBool.val(true)}if(r.bymonth&&r.bymonth.length>0){t.repeatYearMonth.val(r.bymonth[0]);t.repeatYearBool.val(true)}if(!r.byyearday||(r.byyearday&&r.byyearday.length==0)){t.repeatDayOfWeekMonth.val(r.bymonth[0]);t.repeatDayOfWeekBool.jqxRadioButton({checked:true});var s=r.bynweekday;var m=s[0][0];m++;if(m==7){m=0}t.repeatDayOfWeek.jqxDropDownList("selectIndex",m);var x=s[0][1];var v="";switch(x){case 1:v=0;break;case 2:v=1;break;case 3:v=2;break;case 4:v=3;break;case -1:v=4;break}t.repeatDayOfWeekType.jqxDropDownList("selectIndex",v)}break}};c(f)},_updateCellsSelection:function(){var g=this;var m=g.rows;var c=0;var d=0;if(c>0&&g.rtl){c=0;d=1}for(var f=0;f<m.length;f++){var l=m[f].cells;for(var e=c;e<l.length-d;e++){var k=l[e];if(k.getAttribute("data-selected")=="true"){var h=k.jqxClassName||k.className;if(h.indexOf("jqx-fill-state-pressed")>=0){if(k!=g.focusedCell){h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"")}else{if(k==g.focusedCell&&g.focused){h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"");if(!g.selectedAppointment){h=h+=" "+g.toTP("jqx-scheduler-cell-focus")}}}if(k.className!=h){k.className=h}k.jqxClassName=h;continue}h=h.replace(" jqx-fill-state-pressed","");h=h.replace(" jqx-fill-state-pressed-"+g.theme,"");h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"");h=h.replace(" jqx-grid-cell-selected","");h=h.replace(" jqx-grid-cell-selected-"+g.theme,"");h=h.replace(" jqx-scheduler-cell-selected","");h=h.replace(" jqx-scheduler-cell-selected-"+g.theme,"");h=h+=" "+g.toTP("jqx-fill-state-pressed jqx-grid-cell-selected jqx-scheduler-cell-selected");if(k==g.focusedCell&&g.focused&&!g.selectedAppointment){h=h+=" "+g.toTP("jqx-scheduler-cell-focus")}if(k.className!=h){k.className=h}k.jqxClassName=h}else{var h=k.jqxClassName||k.className;if(h.indexOf("jqx-fill-state-pressed")==-1){if(k!=g.focusedCell){h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"")}else{if(k==g.focusedCell&&g.focused){h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"");if(!g.selectedAppointment){h=h+=" "+g.toTP("jqx-scheduler-cell-focus")}}}if(k.className!=h){k.className=h}k.jqxClassName=h;continue}else{if(k==g.focusedCell&&g.focused){h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"");if(!g.selectedAppointment){h=h+=" "+g.toTP("jqx-scheduler-cell-focus")}if(k.className!=h){k.className=h}k.jqxClassName=h}}h=h.replace(" jqx-fill-state-pressed","");h=h.replace(" jqx-fill-state-pressed-"+g.theme,"");h=h.replace(" jqx-scheduler-cell-focus","");h=h.replace(" jqx-scheduler-cell-focus-"+g.theme,"");h=h.replace(" jqx-grid-cell-selected","");h=h.replace(" jqx-grid-cell-selected-"+g.theme,"");h=h.replace(" jqx-scheduler-cell-selected","");h=h.replace(" jqx-scheduler-cell-selected-"+g.theme,"");if(k==g.focusedCell&&g.focused&&!g.selectedAppointment){h=h+=" "+g.toTP("jqx-scheduler-cell-focus")}if(k.className!=h){k.className=h}k.jqxClassName=h;k.removeAttribute("data-selected")}}}},_getuikey:function(d,g){var f=null;var e=this.table[0].rows;f=a(e[d]).attr("data-key");if(a(e[d]).attr("data-role")){var c=a(e[d]);if(g=="next"){while(c){c=c.next();if(c){var h=c.attr("data-role");if(!h){f=c.attr("data-key");return f}}}}else{if(g=="prev"){while(c){c=c.prev();if(c){var h=c.attr("data-role");if(!h){f=c.attr("data-key");return f}}}}}return null}return f},getRows:function(){var j=this._views[this._view].type;var l=this._views[this._view];var e="halfHour";if(l.timeRuler&&l.timeRuler.scale){e=l.timeRuler.scale}var k=24;var c=this.showAllDayRow;if(l.timeRuler&&(j==="dayView"||j==="weekView")){var d=0;var g=23;if(l.timeRuler.scaleStartHour!=undefined){var d=parseInt(l.timeRuler.scaleStartHour)}if(l.timeRuler.scaleEndHour!=undefined){var g=parseInt(l.timeRuler.scaleEndHour)}if(d<0){d=0}if(g<0){g=23}if(d>23){d=0}if(g>23){g=23}k=g-d+1;if(l.timeRuler.showAllDayRow!=undefined){c=l.timeRuler.showAllDayRow}}var m=new Array();var h=0;switch(j){case"dayView":case"weekView":default:var h=k*2;if(e==="hour"||e==="sixtyMinutes"){var h=k}else{if(e==="quarterHour"||e==="fifteenMinutes"){var h=k*4}else{if(e==="tenMinutes"){var h=k*6}else{if(e==="fiveMinutes"){var h=k*12}}}}if(c){h++}break;case"monthView":var h=6;break;case"timelineDayView":case"timelineWeekView":case"timelineMonthView":var h=1;break;case"agendaView":var h=this.appointments?this.appointments.length:0;break}for(var f=0;f<h;f++){m.push({uid:f})}return m},getKey:function(c){var d=this.getRows();if(d){return d[c].uid}else{return -1}},_getkey:function(e){if(this._loading){throw new Error("jqxScheduler: "+this.loadingErrorMessage);return false}var f=null;var d=function(){var l=this.table[0].rows;var k=null;var n=0;if(this.pageable){n-=this.dataview.pagenum*this.dataview.pagesize}if(this.groups.length>0){var h=0;for(var j=0;j<l.length;j++){var o=a(l[j]);var m=o.children()[0].getAttribute("colspan");if(m>0){continue}if(h===n+e){k=o.attr("data-key");return k}h++}return k}if(this.rowDetails){var h=0;for(var j=0;j<l.length;j++){if(h===e+n){k=a(l[j]).attr("data-key");return k}if(j%2==1){h++}}}else{k=a(l[n+e]).attr("data-key")}return k};f=d.call(this);if(f==null){if(this.pageable){var c=Math.floor(e/this.dataview.pagesize);if(this.dataview.pagenum!=c){var g=this.getRows()[e];if(g&&g.uid!=null){return g.uid}else{if(isNaN(c)){return null}this.goToPage(c);f=d.call(this)}}}}return f},_getDateByString:function(k){var f=k.split(" ");var m=f[0].split("-");var i=f[1].split(":");var h=parseInt(m[0],10);var g=parseInt(m[1],10)-1;var j=parseInt(m[2],10);var e=parseInt(i[0],10);var d=parseInt(i[1],10);var l=parseInt(i[2],10);var c=new Date(h,g,j,e,d,l);if(h<1970){c.setFullYear(h,g,j)}return c},_getCellByDate:function(c,e,d){var n=this.table[0].rows;if(e===undefined){e=false}if(d===undefined){if(this.focusedCell){d=this.focusedCell.getAttribute("data-view")}}for(var h=0;h<n.length;h++){var m=n[h];if(m.getAttribute("data-group-row")){continue}for(var g=0;g<m.cells.length;g++){var l=m.cells[g];if(l.getAttribute("rowspan")!=null){continue}if(l.getAttribute("data-view")!==d){continue}if(l.getAttribute("data-time-slot")){continue}if(e&&l.getAttribute("data-end-date")!=null){continue}var k=l.getAttribute("data-date");var f=this._getDateByString(k);if(f.valueOf()==c.valueOf()){return l}}}},_handleKey:function(t){if(this._loading){return true}var u=t.shiftKey;var n=t.ctrlKey||t.metaKey;var j=this;var x=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(j._hasOpenedMenu){if(x==27){j.closeMenu()}else{j.menu.jqxMenu("focus")}return true}if(x===13||(j.selectedAppointment&&x==46)){if(j.editRecurrenceDialog&&j.editRecurrenceDialog.jqxWindow("isOpen")){return true}if(j.editDialog&&j.editDialog.jqxWindow("isOpen")){return true}if(!j.selectedAppointment){j._initDialog();j._openDialog()}else{var d=j.getJQXAppointmentByElement(j.selectedAppointment);if(!d.readOnly){var p=j._initDialog(d,"delete");if(p!==false){j._openDialog()}}}}if(x===27){if(j.dragOrResize){j.table.find(".jqx-icon-arrow-down").hide();var g=j.getViewStart();var f=a.jqx.scheduler.utilities.getEndOfDay(j.getViewEnd());j._prepareAppointmentsInView(g,f);j._renderAppointments(g,f);j._removeFeedbackAndStopResize();return false}}var s=function(A){var C=j.selectedAppointment;var z=j.getJQXAppointmentByElement(C);var y=z.elements[0].cells[0].cell;var M=z.elements[z.elements.length-1].cells[z.elements[z.elements.length-1].cells.length-1].cell;var F=j.rows[j.rows.length-1].cells[j.rows[j.rows.length-1].cells.length-1];if(u||(!u&&!n&&(A=="down"||A=="right"))){y=M}var I=j._views[j._view].type;var H=j._views[j._view];var J=y;switch(A){case"left":var E=j.rowByCell[y.getAttribute("data-key")];var G=E.indexOf(y);if(G>0&&!u){J=E.cells[G-1]}else{if(I=="monthView"&&!u){var B=E.aboveRow;if(B){J=B.cells[B.cells.length-1]}}}break;case"right":var E=j.rowByCell[y.getAttribute("data-key")];var G=E.indexOf(y);if(G<E.cells.length-1){J=E.cells[G+1]}else{if(I=="monthView"){var Q=E.belowRow;if(Q){J=Q.cells[0]}}}if(I=="monthView"&&!u&&n&&M==F){J=y}break;case"up":var E=j.rowByCell[y.getAttribute("data-key")];var G=E.indexOf(y);var B=E.aboveRow;if(B&&!u){J=B.cells[G]}break;case"down":var E=j.rowByCell[y.getAttribute("data-key")];var G=E.indexOf(y);var Q=E.belowRow;if(Q){J=Q.cells[G]}break}var O=J.getAttribute("data-date");var N=new a.jqx.date(O,j.timeZone);var I=a(J).attr("data-view");var K=j._resources[parseInt(I)-1];if(u){var I=j._views[j._view].type;var H=j._views[j._view];var D=false;if(I==="dayView"||I==="weekView"){if(y.getAttribute("data-end-date")){if(A=="left"&&(z.elements[0].cells.length>1||j.rtl)){if(!j.rtl){z.to=a.jqx.scheduler.utilities.getEndOfDay(N.addDays(-1))}else{z.to=a.jqx.scheduler.utilities.getEndOfDay(N.addDays(1))}D=true}else{if(A=="right"){if(!j.rtl||(j.rtl&&z.elements[0].cells.length>1)){z.to=a.jqx.scheduler.utilities.getEndOfDay(N)}D=true}}}else{if(A=="up"&&z.elements[0].cells.length>1){z.to=N;D=true}else{if(A=="down"){z.to=N.addMinutes(j.getMinutesPerScale());D=true}}}}else{if(I.indexOf("month")>=0){if(A=="left"&&(z.elements[0].cells.length>1||z.elements.length>1)){z.to=a.jqx.scheduler.utilities.getEndOfDay(N.addDays(-1));D=true}else{if(A=="right"){z.to=a.jqx.scheduler.utilities.getEndOfDay(N);D=true}}}else{if((!j.rtl&&A=="left"&&z.elements[0].cells.length>1)||(j.rtl&&A=="right"&&z.elements[0].cells.length>1)){z.to=N;if(j.rtl){z.to=N.addMinutes(j.getMinutesPerScale())}D=true}else{if((!j.rtl&&A=="right")||(j.rtl&&A=="left")){z.to=N.addMinutes(j.getMinutesPerScale());if(j.rtl){z.to=z.to.addMinutes(j.getMinutesPerScale())}D=true}}}}if(D){j.moveAppointment(z,N,K,J,true)}}else{if(n){j.moveAppointment(z,N,K,J)}else{j.clearAppointmentsSelection();var L=true;if(A=="down"){L=false}j.selectCell(N,L,I);j.ensureVisible(J)}}if(j.selectedAppointment){j.selectedAppointment.removeClass(j.toTP("jqx-scheduler-selected-appointment"));var P=j.selectedAppointment.attr("data-key");a('[data-key="'+P+'"]').addClass(j.toTP("jqx-scheduler-selected-appointment"));j.clearSelection()}};if(t.altKey&&j._resourcesElements&&j._resources&&j._resources.length>0){var h=function(y){var z=j._resourcesElements.bottom[y];if(z.attr("data-toggle")=="on"){j.hideAppointmentsByResource(y)}else{j.showAppointmentsByResource(y)}};var k=x>=49&&x<=58?k=x-48:-1;if(k>=1){a.each(j._resources,function(y,z){if(y==k-1){h(z);return false}});return false}}if(t.ctrlKey){if(!j.selectedAppointment){if(x==37){j.toolbarLeftButton.trigger("click");j.ensureVisible(j.focusedCell);return false}else{if(x==39){j.toolbarRightButton.trigger("click");j.ensureVisible(j.focusedCell);return false}}}if(x==49){j._setView(0);return false}else{if(x==50){j._setView(1);return false}else{if(x==51){j._setView(2);return false}else{if(x==52){j._setView(3);return false}else{if(x==53){j._setView(4);return false}else{if(x==54){j._setView(5);return false}else{if(x==68){j.dateTimeInput.jqxDateTimeInput("open");return false}else{if(x==77){j.openMenu();return false}}}}}}}}}if(x==9){if(!t.shiftKey){if(j.selectedAppointment){j.clearSelection();var e=j.selectedAppointment;var d=j.getJQXAppointmentByElement(e);var i=j.tabKeyAppointments.indexOf(d);if(i<j.tabKeyAppointments.length-1){d=j.tabKeyAppointments[i+1];j._selectAppointment(d);j._lastSelectedAppointment=d;j._ensureAppointmentVisible(d);return false}else{j.clearAppointmentsSelection();return true}}else{var d=j.tabKeyAppointments[0];if(d){j._selectAppointment(d);j._lastSelectedAppointment=d;j._ensureAppointmentVisible(d);return false}else{if(!j.focusedCell){j._updateFocusedCell();j.ensureVisible(j.focusedCell);return false}else{if(j.focusedCell){if(j.focusedCell.className.indexOf("-focus")==-1){j._updateCellsSelection();j.ensureVisible(j.focusedCell);return false}}}}}}else{if(j.selectedAppointment){j.clearSelection();var e=j.selectedAppointment;var d=j.getJQXAppointmentByElement(e);if(d){var i=j.tabKeyAppointments.indexOf(d);if(i>0){d=j.tabKeyAppointments[i-1];j._selectAppointment(d);j._lastSelectedAppointment=d;j._ensureAppointmentVisible(d);return false}else{j.clearAppointmentsSelection();if(!j.focusedCell){j._updateFocusedCell();j.ensureVisible(j.focusedCell);return false}else{if(j.focusedCell){if(j.focusedCell.className.indexOf("-focus")==-1){j._updateCellsSelection();j.ensureVisible(j.focusedCell);return false}}}return true}}}else{if(!j.focusedCell){j._updateFocusedCell();j.ensureVisible(j.focusedCell)}else{if(j.focusedCell){if(j.focusedCell.className.indexOf("-focus")==-1){j._updateCellsSelection();j.ensureVisible(j.focusedCell);return false}}}}}}if(j.selectedAppointment){if(x==37){s("left")}else{if(x==38){s("up")}else{if(x==40){s("down")}else{if(x==39){s("right")}}}}if(x>=37&&x<=40){return false}return}var l=this._lastSelectedCell;if(!l){return}if(!a(this._lastSelectedCell).parent()[0]){this._lastSelectedCell=this.rows[0].cells[0];l=this._lastSelectedCell}var o=this.table[0].rows;var q=this._views[this._view].type;var m=this._views[this._view];var w="halfHour";if(m.timeRuler&&m.timeRuler.scale){w=m.timeRuler.scale}var r=function(K,G){var C=30;switch(w){case"sixtyMinutes":case"hour":C=60;break;case"thirdyMinutes":case"halfHour":C=30;break;case"fifteenMinutes":case"quarterHour":C=15;break;case"tenMinutes":C=10;break;case"fiveMinutes":C=5;break}var I=K.getAttribute("data-date");var H=function(U,N,P){if(U&&U.getAttribute("rowspan")==null&&U.getAttribute("data-time-slot")==null){if(P<j.min||P>j.max){return}var S=j.table[0].rows;var R=j._lastSelectedCell;j._lastSelectedCell=U;if(t.shiftKey&&j._lastSelectedCell){if(!j.shiftSelectedCell){j.shiftSelectedCell=l}}else{if(!t.shiftKey){j.shiftSelectedCell=null}}if(!j.shiftSelectedCell){for(var Q=0;Q<S.length;Q++){var T=S[Q];if(T.getAttribute("data-group-row")){continue}for(var O=0;O<T.cells.length;O++){var N=T.cells[O];N.removeAttribute("data-selected","false")}}U.setAttribute("data-selected","true");j.focusedCell=U}else{if(U.getAttribute("data-end-date")&&j.shiftSelectedCell.getAttribute("data-end-date")){j.focusedCell=U;j._selectRange(U,j.shiftSelectedCell)}else{if(!U.getAttribute("data-end-date")&&!j.shiftSelectedCell.getAttribute("data-end-date")){j.focusedCell=U;j._selectRange(U,j.shiftSelectedCell)}else{j.focusedCell=R;j._lastSelectedCell=R}}}j.ensureVisible(j.focusedCell)}};var z=new a.jqx.date(I,j.timeZone);var A=K.getAttribute("data-view");switch(G){case"left":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);if(F>0){var D=M.cells[F-1];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone)}H(D,K,J);break;case"right":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);if(F<M.cells.length-1){var D=M.cells[F+1];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone)}H(D,K,J);break;case"up":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);var y=M.aboveRow;if(y){var D=y.cells[F];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone);H(D,K,J)}break;case"down":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);var E=M.belowRow;if(E){var D=E.cells[F];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone);H(D,K,J)}break;case"home":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);var B=j.rows[0];var D=B.cells[F];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone);H(D,K,J);break;case"end":var M=j.rowByCell[K.getAttribute("data-key")];var F=M.indexOf(K);var L=j.rows[j.rows.length-1];var D=L.cells[F];var J=new a.jqx.date(D.getAttribute("data-date"),j.timeZone);H(D,K,J);break}j._updateCellsSelection()};var v=function(){r(l,"home")};var c=function(){r(l,"end")};if(x==36||(n&&x==38)){v();return false}else{if(x==35||(n&&x==40)){c();return false}else{if(x==37){if(j.selectedAppointment){s(l,"left")}else{r(l,"left")}return false}else{if(x==38){if(j.selectedAppointment){s(l,"up")}else{r(l,"up")}return false}else{if(x==40){if(j.selectedAppointment){s(l,"down")}else{r(l,"down")}return false}else{if(x==39){if(j.selectedAppointment){s(l,"right")}else{r(l,"right")}return false}}}}}}},getSelectedCells:function(){var h=this;var k=h.table[0].rows;var g=k.length;var c=new Array();for(var f=0;f<g;f++){var e=k[f].cells;for(var d=0;d<e.length;d++){if(e[d].getAttribute("data-selected")){c.push(e[d])}}}return c.sort(function(i,j){return h._sortByDate(i,j)})},getSelection:function(){var f=this;var c=f.getSelectedCells();if(c.length==0){return null}var i=c[0].getAttribute("data-date");var h=c[c.length-1].getAttribute("data-date");var e=f.getMinutesPerScale();var d=f._views[f._view].type;if(d.toLowerCase().indexOf("month")>=0){e=0}if(c[0].getAttribute("data-end-date")){e=0}h=new a.jqx.date(h,f.timeZone).addMinutes(e);var d=parseInt(c[0].getAttribute("data-view"))-1;var g=f._resources[d];if(f._views[f._view].type.toLowerCase().indexOf("month")>=0){return{from:new a.jqx.date(i,f.timeZone),to:a.jqx.scheduler.utilities.getEndOfDay(h),resourceId:g}}return{from:new a.jqx.date(i,f.timeZone),to:h,resourceId:g}},clearSelection:function(){var g=this;var h=g.table[0].rows;var f=h.length;for(var e=0;e<f;e++){var d=h[e].cells;for(var c=0;c<d.length;c++){d[c].removeAttribute("data-selected")}}g._updateCellsSelection()},_getvirtualcolumnsindexes:function(d,l,h,k,c){if(this.rtl){d=this.hScrollInstance.max-d}var e=0;var i=-1;var f=h+k;if(this.autorowheight){return{start:0,end:h+k}}if(!c){for(var g=0;g<h+k;g++){var m=g;if(!this.columns.records[g].hidden){e+=this.columns.records[g].width}if(e>=d&&i==-1){i=g}if(e>l+d){f=g;break}}}f++;if(f>h+k){f=h+k}if(i==-1){i=0}return{start:i,end:f}},_renderhorizontalscroll:function(){var l=this;var h=l.hScrollInstance;var j=h.value;if(l.hScrollBar[0].style.visibility==="hidden"){h.value=0;j=0}var e=parseInt(j);if(l.table==null){return}var c=function(t){if(t.parentNode&&t.parentNode.nodeName!="#document-fragment"){return true}return false};var k=l._getvirtualcolumnsindexes(e,l._hostWidth,0,l.columns.records.length,false);var n=k.start;var q=k.end;var g=l.table[0].rows;for(var s=0;s<n;s++){var r=s;var d=l.columns.records[r].element[0];if(c(d)){d.parentNode.removeChild(d)}}for(var s=q;s<l.columns.records.length;s++){var r=s;var d=l.columns.records[r].element[0];if(c(d)){d.parentNode.removeChild(d)}}for(var s=n;s<q;s++){var r=s;d=l.columns.records[r].element[0];if(!c(d)){l.columnsrow[0].appendChild(d)}}var p=l.columnsrow;var i=0;var o=l.columns.records.length-i;var f=l.columns.records;var m=l.source.records.length==0;if(l.rtl){if(l.hScrollBar.css("visibility")!="hidden"){e=h.max-e}}l.table[0].style.left=-e+"px";if(l.pinnedtable[0].style.display=="block"){l.pinnedtable[0].style.left=-e+"px"}p[0].style.marginLeft=-e+"px"},_getDayName:function(c,e){if(c>=7){c-=7}if(!e){e=this.dayNameFormat;if(this.isTouchDevice()){e=this.touchDayNameFormat}}var d=this.schedulerLocalization.days.names[c];switch(e){case"full":d=this.schedulerLocalization.days.names[c];break;case"abbr":d=this.schedulerLocalization.days.namesAbbr[c];break;case"shortest":d=this.schedulerLocalization.days.namesShort[c];break;case"firstTwoLetters":d=d.substring(0,2);break;case"firstLetter":d=d.substring(0,1);break}return d},_initializeColumns:function(){if(this._views.length===0){this._views.push({type:"dayView"})}var o=this._views[this._view].type;var m=this._views[this._view];if(this.columns&&this.columns.records){for(var x=0;x<this.columns.records.length;x++){this._removecolumnhandlers(this.columns.records[x])}}this.columns=new Array();var z=new Array();var k=this;var p=function(F,L){var G="halfHour";if(m.timeRuler&&m.timeRuler.scale){G=m.timeRuler.scale}var O=24;var E=0;var N=23;if(m.timeRuler){if(m.timeRuler.scaleStartHour!=undefined){var E=parseInt(m.timeRuler.scaleStartHour)}if(m.timeRuler.scaleEndHour!=undefined){var N=parseInt(m.timeRuler.scaleEndHour)}if(E<0){E=0}if(N<0){N=23}if(E>23){E=0}if(N>23){N=23}O=N-E+1}var I=60;var M=2;if(G){switch(G){case"sixtyMinutes":case"hour":M=1;break;case"thirdyMinutes":case"halfHour":M=2;break;case"fifteenMinutes":case"quarterHour":M=4;break;case"tenMinutes":M=6;break;case"fiveMinutes":M=12;break}}var Q=new Array();var P="auto";if(m.timeRuler&&m.timeRuler.formatString){P=m.timeRuler.formatString}var D=E;var J=O;var B=F.addHours(D);var j="auto";if(m.columnWidth){j=M*m.columnWidth}else{j=M*80}for(var K=0;K<J;K++){var C=B.toDate();if(P==="auto"){if((C.getHours()==0&&C.getMinutes()==0)||(C.getHours()==12&&C.getMinutes()==0)){var H="hh tt"}else{var H="hh:mm"}}else{if(a.isFunction(P)){var H=P(C)}}if(a.jqx.dataFormat.isDate(C)){C=a.jqx.dataFormat.formatdate(C,H,k.schedulerLocalization)}B=B.addMinutes(I,false);k.columns.push({columnGroup:L,text:C,width:j})}};for(var v=0;v<this.tableColumns;v++){if(this.tableColumns>1){var g=k._resources[v]?k._resources[v]:"Resource"+v;z.push({text:g,name:g})}var u="left";if(this.rtl){u="right"}switch(o){case"dayView":var h=this.getViewStart();if(false===m.showWeekends){if(h.dayOfWeek()===0||h.dayOfWeek()===6){h=h.addDays(1)}if(h.dayOfWeek()===0||h.dayOfWeek()===6){h=h.addDays(1)}}var t="auto";if(m&&m.columnWidth){t=m.columnWidth}var g=k._resources[v]?k._resources[v]:"Resource"+v;this.columns.push({align:u,width:t,columnGroup:g,text:this._getDayName(h.dayOfWeek())});break;case"weekView":case"monthView":for(var x=0;x<7;x++){var w=this.schedulerLocalization.firstDay+x;if(false===m.showWeekends){if(x===0||x===6){continue}}var t="auto";if(m&&m.columnWidth){t=m.columnWidth}var g=k._resources[v]?k._resources[v]:"Resource"+v;this.columns.push({align:o=="weekView"?u:"center",width:t,columnGroup:g,text:this._getDayName(w)})}break;case"timelineDayView":var g=k._resources[v]?k._resources[v]:"Resource"+v;p(k.getViewStart(),g);break;case"timelineWeekView":for(var x=0;x<7;x++){var w=this.schedulerLocalization.firstDay+x;if(false===m.showWeekends){if(x===0||x===6){continue}}var g=k._resources[v]?k._resources[v]:"Resource"+v;z.push({align:k.rtl?"right":"left",parentGroup:g,name:this._getDayName(w)+v,text:this._getDayName(w)});p(k.getViewStart().addDays(x),this._getDayName(w)+v)}break;case"timelineMonthView":var l=k.getViewStart();var y="auto";if(m.timeRuler&&m.timeRuler.formatString){y=m.timeRuler.formatString}for(var x=0;x<41;x++){var w=l.dayOfWeek();if(false===m.showWeekends){if(w===0||w===6){continue}}var t="auto";if(m.columnWidth){t=m.columnWidth}else{t=100}var q=l.toDate();if(y==="auto"){var d="dd";q=l.toDate();if(q.getDate()===1){d="MMM dd"}}else{if(a.isFunction(y)){var d=y(q)}}if(a.jqx.dataFormat.isDate(q)){q=a.jqx.dataFormat.formatdate(q,d,k.schedulerLocalization)}l=l.addDays(1);var g=k._resources[v]?k._resources[v]:"Resource"+v;k.columns.push({columnGroup:g,text:q,width:t})}break;case"agendaView":k.columns.push({text:k.schedulerLocalization.agendaDateColumn});k.columns.push({text:k.schedulerLocalization.agendaTimeColumn});k.columns.push({text:k.schedulerLocalization.agendaAppointmentColumn});break}}if(z.length>0){this.columnGroups=z}var k=this;var r=new a.jqx.dataCollection(this.element);var e=0;this._columns=this.columns;var A="left";var f=new b(k,this);f.visibleindex=e++;f.text="";f.width=k.timeRulerWidth;f.editable=false;f.timeColumn=true;A="left";f.text="";f.hidden=false;f.width=k.timeRulerWidth;var c=false;if(m.timeRuler&&(o==="dayView"||o==="weekView")){f._text=m.timeRuler.text||"";A=m.timeRuler.position||"left";f.hidden=m.timeRuler.hidden||false;f.width=m.timeRuler.width||k.timeRulerWidth;if(m.timeRuler.timeZones){c=true}}else{if(o!=="dayView"&&o!=="weekView"){f.hidden=true}}var n=function(i){var j=new b(k,k);j.visibleindex=e++;j.text="";j.width=k.timeRulerWidth;j.editable=false;j.timeColumn=true;A="left";j.text="";j.hidden=false;j.timeZone=m.timeRuler.timeZones[i].id;j.width=k.timeRulerWidth;if(m.timeRuler&&(o==="dayView"||o==="weekView")){j._text=m.timeRuler.timeZones[x].text||"";j.hidden=m.timeRuler.hidden||false;j.width=m.timeRuler.width||k.timeRulerWidth;r.add(j)}};if(A==="left"&&(o==="dayView"||o==="weekView")){if(m.timeRuler&&m.timeRuler.timeZones){for(var x=0;x<m.timeRuler.timeZones.length;x++){n(x)}}r.add(f)}var s=new Array();a.each(this.columns,function(i){if(k.columns[i]!=undefined){var j=new b(k,this);j.visibleindex=e++;r.add(j)}});if(A==="right"&&(o==="dayView"||o==="weekView")){if(m.timeRuler){for(var x=0;x<m.timeRuler.timeZones.length;x++){n(x)}}r.add(f)}if(this.rtl){r.records.reverse()}this.columns=r},_getColumnsLengthPerView:function(){var c=this._views[this._view].type;var e=this._views[this._view];var d=1;switch(c){case"dayView":d=1;break;case"weekView":if(e.showWeekends!==false){d=7}else{d=5}break;case"monthView":if(e.showWeekends!==false){d=7}else{d=5}break;case"timelineDayView":case"timelineWeekView":case"timelineMonthView":d=this.columns.records.length;break;case"agendaView":d=this.columns.records.length;break}return d},shadeColor:function(c,h){var i=parseInt(c.slice(1),16),d=h<0?0:255,j=h<0?h*-1:h,g=i>>16,e=i>>8&255,k=i&255;return"#"+(16777216+(Math.round((d-g)*j)+g)*65536+(Math.round((d-e)*j)+e)*256+(Math.round((d-k)*j)+k)).toString(16).slice(1)},hexToRgba:function(d,f){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);var e=function(){var g=a.jqx.browser.msie&&a.jqx.browser.version<10;if(this.alpha==undefined||g){return"rgb("+this.r+", "+this.g+", "+this.b+")"}if(this.alpha>1){this.alpha=1}else{if(this.alpha<0){this.alpha=0}}return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};if(f==undefined){return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16),toString:e}:null}if(f>1){f=1}else{if(f<0){f=0}}return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16),alpha:f,toString:e}:null},getAppointmentColors:function(g){var f="";var e="";var d="";f=this.hexToRgba(g,this.appointmentOpacity).toString();e=g;var c=function(i){var h=105;var j=(i.r*0.299)+(i.g*0.587)+(i.b*0.114);var k=(255-j<h)?"Black":"White";return k};d=c(this.hexToRgba(g,0.7));return{background:f,color:d,border:e}},getColors:function(h){if(h==-1){h=0}var d="";var f="";var g="";var j=this.resources?this.resources.colorScheme:null;if(!j){j="scheme01"}var c=new Array();for(var e=0;e<this.colorSchemes.length;e++){if(this.colorSchemes[e].name==j){c=this.colorSchemes[e].colors;break}}while(h>c.length-1){var k=parseInt(j.substring(6));if(k>=27){k=0}c=c.concat(this.colorSchemes[k].colors);k++}d=c[h];d=this.hexToRgba(c[h],0.7).toString();f=c[h];var i=function(m){var l=105;var n=(m.r*0.299)+(m.g*0.587)+(m.b*0.114);var o=(255-n<l)?"Black":"White";return o};g=i(this.hexToRgba(c[h],0.7));return{background:d,color:g,border:f}},_renderrows:function(){var T=this;if(T._loading){return}if(T._updating||T._appupdating){return}if(T.rendering){T.rendering()}var T=this;var aC=T._views[T._view].type;var F=T._views[T._view];var ax=1;var e=T.getViewStart();var aK=a.jqx.scheduler.utilities.getEndOfDay(T.getViewEnd());T._prepareAppointmentsInView(e,aK);if(aC==="weekView"||aC==="dayView"){var ax=T.getMaxAllDayAppointments(T.appointmentsToRender)}var Y=T.tableRows>1?T.tableRows:0;var aI="halfHour";var A=null;var aM;if(F.rowHeight){A=F.rowHeight}if(F&&F.allDayRowHeight){aM=F.allDayRowHeight}if(F.timeRuler&&F.timeRuler.scale){aI=F.timeRuler.scale}var aJ=0;T.table[0].rows=new Array();T.rows=new Array();var a1=T.toTP("jqx-cell")+" "+T.toTP("jqx-widget-content");if(T.rtl){a1+=" "+T.toTP("jqx-cell-rtl")}var d=T.columns.records.length;var at=T._getColumnsLengthPerView();var U=a.jqx.browser.msie&&a.jqx.browser.version<8;if(U){T.host.attr("hideFocus","true")}T._lastSelectedCell=null;T.focusedCell=null;var D=new Array();var aA=T.source.records;aA=T.dataview.evaluate(aA);T.dataViewRecords=aA;T.cells=new Array();var D=T.dataViewRecords;T.renderedRecords=T.getRows();var aV=T.tableZIndex;var ag=T.getRows().length;var o=0;var aE=0;if(U){for(var V=0;V<d;V++){var aa=T.columns.records[V];var aH=aa.width;if(aH<aa.minwidth){aH=aa.minwidth}if(aH>aa.maxwidth){aH=aa.maxwidth}var aG=a('<table><tr><td role="gridcell" style="max-width: '+aH+"px; width:"+aH+'px;" class="'+a1+'"></td></tr></table>');a(document.body).append(aG);var aq=aG.find("td");o=1+parseInt(aq.css("padding-left"))+parseInt(aq.css("padding-right"));aG.remove();break}}var J=T.rtl?" "+T.toTP("jqx-grid-table-rtl"):"";var G="<table cellspacing='0' cellpadding='0' class='"+T.toTP("jqx-grid-table")+J+"' id='table"+T.element.id+"'><colgroup>";var aU=0;var a0=d;var aO=2;var al=30;switch(aI){case"sixtyMinutes":case"hour":al=60;aO=1;break;case"thirtyMinutes":case"halfHour":al=30;aO=2;break;case"fifteenMinutes":case"quarterHour":al=15;aO=4;break;case"tenMinutes":al=10;aO=6;break;case"fiveMinutes":al=5;aO=12;break}var aZ=1;if(aC==="timelineDayView"||aC==="timelineWeekView"){d=aO*d;aZ=aO;at=d/T.tableColumns}else{if(aC==="timelineMonthView"){at=d/T.tableColumns}else{if(aC==="monthView"){at=d/T.tableColumns}}}var h=function(i){var c=T.columns.records[i];if(c){return c}while(i>=T.columns.records.length){i-=T.columns.records.length}var c=T.columns.records[i];return c};for(var V=0;V<d;V++){var aa=h(V);if(aa.hidden){aU++;a0--;continue}var aH=aa.width/aZ;if(aH<aa.minwidth){aH=aa.minwidth/aZ}if(aH>aa.maxwidth){aH=aa.maxwidth/aZ}aH-=o;if(aH<0){aH=0}if(U){var N=aH;if(V==aU){N++}G+="<col style='max-width: "+N+"px; width: "+N+"px;'>"}else{G+="<col style='max-width: "+aH+"px; width: "+aH+"px;'>"}aE+=aH}G+="</colgroup>";T._hiddencolumns=false;if(ag===0){var s='<tr role="row">';var y=T.host.height();if(T.pageable){y-=T.pagerHeight;if(T.pagerPosition==="both"){y-=T.pagerHeight}}y-=T.columnsHeight;if(T.showLegend&&T._resources.length>0){y-=T.legendHeight}if(y<25){y=25}if(T.hScrollBar[0].style.visibility!="hidden"){y-=T.hScrollBar.outerHeight()}if(T.height==="auto"||T.height===null||T.autoheight){y=300}var aG='<td colspan="'+T.columns.records.length+'" role="gridcell" style="border: none; min-height: '+y+"px; height: "+y+"px; max-width:"+aE+"px; width:"+aE+"px;";var a1=T.toTP("jqx-cell")+" "+T.toTP("jqx-grid-cell")+" "+T.toTP("jqx-item");if(T.rtl){a1+=" "+T.toTP("jqx-cell-rtl")}a1+=" "+T.toTP("jqx-center-align");aG+='" class="'+a1+'">';aG+=T.schedulerLocalization.emptyDataString;aG+="</td>";s+=aG;G+=s;T.table[0].style.width=aE+2+"px";aJ=aE}var ar=T.getRows();var e=T.getViewStart();var y=T._hostHeight?T._hostHeight:T.host.height();var aY=0;if(!T.columnGroups){aY+=T.showHeader?T.columnsHeight:0}else{aY+=T.showHeader?T.columnsheader.height():0}if(T.showToolbar){aY+=T.toolbarHeight}if(T.showLegend&&T._resources.length>0){aY+=T.legendHeight}var g=T.showAllDayRow;var n=23;if(F.resourceHeaderRowHeight){n=F.resourcesRowHeight}n+=2;if(F.showAllDayRow!=undefined){g=F.showAllDayRow}var k=T._columnswidth>T._hostWidth;var aj=k?(3+T.scrollBarSize):0;var ae=T.tableRows>1?T.resources.unitsInView:1;if(ae==undefined){ae=T._resources.length}if(T.resources&&T.resources.resourceRowHeight){A=T.resources.resourceRowHeight}if(A==null||A=="auto"){var p=T.rowsHeight;var an=3*p;if(T.isTouchDevice()){p=T.touchRowsHeight;var an=22+p}if(T.tableRows==1){A=y>0?(y-aY):p;if(T.columns.records.length>10){A=y>0?(y-T.scrollBarSize-5-aY):p}}else{A=y>0?(y-aY-n)/(ag):p;if(T.columns.records.length>10){A=y>0?(y-T.scrollBarSize-5-aY-ae*n)/(ae*ag):p}}if(aC==="dayView"||aC==="weekView"){if(g){if(aM==null||aM=="auto"){A=y>0?(y-aY)/(T.tableRows*(ag)):an;aM=A}else{A=y>0?(y-aY-aM-ae*n)/(ae*(ag-1)):p}}}else{if(aC==="monthView"){if(T.hScrollBar[0].style.visibility=="hidden"){aj=0}if(T.tableRows==1){A=y>0?(y-aY-aj)/ag:p}else{A=y>0?(y-aY-n-aj)/(ag):p}}}A=Math.max(p,A);if(!aM){aM=an}aM=Math.max(an,aM);T._allDayRowHeight=aM;T._defaultRowHeight=p;aM=ax*(p-2);aM=Math.max(an,17+aM);T._allDayRowFullHeight=aM;if(F.allDayRowHeight){T._allDayRowHeight=F.allDayRowHeight;aM=ax*(F.allDayRowHeight-2);T._allDayRowFullHeight=aM}}var az=new Array();if(T.resources&&T.resources.colorScheme){for(var am=0;am<T.colorSchemes.length;am++){if(T.colorSchemes[am].name==T.resources.colorScheme){az=T.colorSchemes[am].colors;break}}while(T._resources.length>az.length-1){var aS=parseInt(T.resources.colorScheme.substring(6));if(aS>=27){aS=0}az=az.concat(T.colorSchemes[aS].colors);aS++}}for(var aB=0;aB<T.tableRows;aB++){var ao=0;var Q=0;var f=23;if(F.timeRuler&&F.timeRuler.scaleStartHour!=undefined){var Q=parseInt(F.timeRuler.scaleStartHour)}if(F.timeRuler&&F.timeRuler.scaleEndHour!=undefined){var f=parseInt(F.timeRuler.scaleEndHour)}var z=e;if(false===F.showWeekends){if(z.dayOfWeek()==0||z.dayOfWeek()==6){z=z.addDays(1)}}var ap=new Array();var l=aC!="monthView"&&aC!="timelineDayView"&&aC!="timelineWeekView"&&aC!="timelineMonthView"&&g?1:0;if(T.tableRows>1){var s='<tr data-group-row="true" role="row">';var a1=T.toTP("jqx-cell")+" "+T.toTP("jqx-grid-cell")+" "+T.toTP("jqx-item");if(T.rtl){a1+=" "+T.toTP("jqx-cell-rtl")}if(!U){a1+=" "+T.toTP("jqx-grid-cell-pinned");X+=' colspan="'+d+'"';var N=0;for(var O=0;O<d;O++){var Z=h(O);var ai=Z.width/aZ;if(ai<Z.minwidth){aH=Z.minwidth/aZ}if(ai>Z.maxwidth){aH=Z.maxwidth/aZ}ai-=o;if(ai<0){ai=0}if(!Z.hidden){N+=ai}}aH=N}else{a1+=" "+T.toTP("jqx-grid-cell-pinned")}var aG='<td style="height:'+n+"px;";if(V==d-1&&d==1&&!T.rtl){aG+="border-right-color: transparent;"}if(T._resources.length>0&&T.resources.colorScheme&&T.resources.orientation!="none"){var aL="";var x="";var C="";var K=function(i){var c=105;var j=(i.r*0.299)+(i.g*0.587)+(i.b*0.114);var q=(255-j<c)?"Black":"White";return q};aL=az[aB];aL=T.hexToRgba(az[aB],0.7).toString();C=K(T.hexToRgba(az[aB],0.7));x=az[aB];aG+="background: "+aL+";";aG+="border-color: "+x+";";aG+="color: "+C+";"}aG+='" class="'+a1+'" role="gridcell" '+X+"";var aT=T._resources[aB];aG+=">"+aT;aG+="</td>";s+=aG;G+=s}for(var W=0;W<ag;W++){var aF={};var ak=W;aF.uid=ak;var s='<tr data-key="'+ak+'" role="row">';var ab=0;var v=0;if(ap[0]&&W>l){var al=30;if(aC!="monthView"){switch(aI){case"sixtyMinutes":case"hour":al=60;break;case"thirdyMinutes":case"halfHour":al=30;break;case"fifteenMinutes":case"quarterHour":al=15;break;case"tenMinutes":al=10;break;case"fiveMinutes":al=5;break}for(var R=0;R<d;R++){ap[R]=ap[R].addMinutes(al,false)}}else{for(var R=0;R<d;R++){ap[R]=ap[R].addDays(7,false)}}}var av=0;var ac=1;var ah=0;if(F.showWeekends||F.showWeekends==undefined){ah=(T.columns.records.length)/(7*T.tableColumns);ah*=aO}else{ah=(T.columns.records.length)/(5*T.tableColumns);ah*=aO}var au=0;if(T.rtl){au=1}var aQ=0;for(var V=0;V<d;V++){var P=h(V);if(av>=at){av=0;aQ=0;au=0;if(T.rtl){au=1}ac++}if(!ap[V]){if(!T.rtl){if(aC.toString().indexOf("timelineDayView")>=0){var H=V;ap[V]=z.addHours(Q).addMinutes(H*al,false)}else{if(aC.toString().indexOf("timelineWeekView")>=0){ap[V]=z.addDays(aQ).addHours(Q,false).addMinutes(au*al,false)}else{ap[V]=z.addDays(av).addHours(Q,false)}}if(T.timeZone){ap[V].timeZone=T.timeZone}}else{if(aC.toString().indexOf("timelineDayView")>=0){var H=1+V;ap[V]=z.addHours(1+f).addMinutes(-H*al,false)}else{if(aC.toString().indexOf("timelineWeekView")>=0){if(F.showWeekends||F.showWeekends==undefined){ap[V]=z.addDays(6-aQ).addHours(1+f,false).addMinutes(-au*al,false)}else{ap[V]=z.addDays(4-aQ).addHours(1+f,false).addMinutes(-au*al,false)}}else{if(aC=="dayView"||aC=="monthView"||aC=="weekView"){if(F.showWeekends||F.showWeekends==undefined){ap[V]=z.addDays(6-av).addHours(Q,false)}else{ap[V]=z.addDays(4-av).addHours(Q,false)}}else{ap[V]=z.addDays(at-av-1).addHours(Q,false)}}}if(T.timeZone){ap[V].timeZone=T.timeZone}}}au++;if(au>=ah){au=0;aQ++}if(!P.timeColumn&&(aC==="dayView"||aC==="weekView")){av++}else{if(aC==="monthView"||aC==="timelineMonthView"){av++}else{if(aC=="timelineDayView"||aC=="timelineWeekView"){av++}}}var B=ap[V];var aH=P.width/aZ;if(aH<P.minwidth){aH=P.minwidth/aZ}if(aH>P.maxwidth){aH=P.maxwidth/aZ}aH-=o;if(aH<0){aH=0}var a1=T.toTP("jqx-cell")+" "+T.toTP("jqx-grid-cell")+" "+T.toTP("jqx-item");if(P.pinned){a1+=" "+T.toTP("jqx-grid-cell-pinned")}if(T.sortcolumn===P.displayfield){a1+=" "+T.toTP("jqx-grid-cell-sort")}if(T.altRows&&W%2!=0){a1+=" "+T.toTP("jqx-grid-cell-alt")}if(W==0&&g&&(aC==="dayView"||aC==="weekView")){a1+=" "+T.toTP("jqx-grid-cell-alt")}if(B>T.max||B<T.min){a1+=" "+T.toTP("jqx-scheduler-disabled-cell")}if(T.rtl){a1+=" "+T.toTP("jqx-cell-rtl")}var X="";var ak=T.dataview.generatekey();var aD=aB+ac;if(T.resources&&T.resources.orientation=="none"){aD=-1}var aG='<td data-key="'+ak+'" data-view="'+(aD)+'" data-date="'+B.toString()+'" role="gridcell" '+X+' style="max-width:'+aH+"px; width:"+aH+"px;  height:"+A+"px;";if(W==0&&g&&(aC==="dayView"||aC==="weekView")){var aG='<td  data-key="'+ak+'" data-view="'+(aD)+'" data-end-date="'+a.jqx.scheduler.utilities.getEndOfDay(B).toString()+'" data-date="'+B.clearTime().toString()+'" role="gridcell" '+X+' style="max-width:'+aH+"px; width:"+aH+"px; height:"+aM+"px;"}if(T.resources&&T._resources.length>0&&T.resources.colorScheme&&T.resources.orientation!=="none"){var aL="";var x="";aL=az[aB+ac-1];if(!(W==0&&g&&(aC==="dayView"||aC==="weekView"))){aL=T.hexToRgba(az[aB+ac-1],0.3).toString()}else{aL=T.shadeColor(az[aB+ac-1],0.3).toString()}if(!(W==0&&g&&(aC==="dayView"||aC==="weekView"))){if(aC.indexOf("month")==-1){if(!P.timeColumn){if(F.showWorkTime!==false){var M=1;var I=5;var aw=8;var m=18;if(F.workTime){var M=F.workTime.fromDayOfWeek?F.workTime.fromDayOfWeek:0;var I=F.workTime.toDayOfWeek?F.workTime.toDayOfWeek:0;var aw=F.workTime.fromHour?F.workTime.fromHour:8;var m=F.workTime.toHour?F.workTime.toHour:8}if(B.dayOfWeek()>=M&&B.dayOfWeek()<=I){if(B.hour()>=aw&&B.hour()<m){aL=T.hexToRgba(az[aB+ac-1],0.1).toString()}}}}}}x=az[ac+aB-1];aG+="background: "+aL+";";aG+="border-color: "+x+";"}if(V==d-1&&d==1&&!T.rtl){aG+="border-right-color: transparent;"}if(P.timeColumn&&!P.hidden&&(aC==="dayView"||aC==="weekView")){var a1=T.toTP("jqx-scheduler-time-column")+" "+T.toTP("jqx-widget-header")+" "+T.toTP("jqx-cell")+" "+T.toTP("jqx-grid-cell")+" "+T.toTP("jqx-item");if(T.tableRows>1){var a1=T.toTP("jqx-cell")+" "+T.toTP("jqx-grid-cell")+" "+T.toTP("jqx-item")}if(T.rtl){a1+=" "+T.toTP("jqx-cell-rtl")}if(W>0){if(B.minute()===0){var aG='<td classname="jqx-disableselect" data-time-slot="true" data-date="'+B.toString()+'" rowspan='+aO+' role="gridcell" '+X+' style="max-width:'+aH+"px; width:"+aH+"px;";if(V==d-1&&d==1&&!T.rtl){aG+="border-right-color: transparent;"}else{if(T.rtl&&V==0){aG+="border-left-color: transparent;"}}}else{v++;continue}}else{if(T.resources&&T.resources.orientation=="none"){aD=-1}if(W==0&&g&&(aC==="dayView"||aC==="weekView")){var aG='<td data-view="'+(aD)+'" data-time-slot="true" data-end-date="'+a.jqx.scheduler.utilities.getEndOfDay(B).toString()+'" data-date="'+B.toString()+'" role="gridcell" '+X+' style="max-width:'+aH+"px; width:"+aH+"px;"}if(V==d-1&&d==1&&!T.rtl){aG+="border-right-color: transparent;"}else{if(V==0&&d==1&&T.rtl){aG+="border-right-color: transparent;"}}if(T.rtl){aG+="border-left-width: 1px;"}if(T.tableRows>1){aG+="background: "+aL+";";aG+="border-color: "+x+";"}}}else{if(W>0){aG+="border-left-width: 1px;"}}if(P.cellsalign!="left"){if(P.cellsalign==="right"){a1+=" "+T.toTP("jqx-right-align")}else{a1+=" "+T.toTP("jqx-center-align")}}if(!P.timeColumn){if(T.rowinfo[aF.uid]){if(T.rowinfo[aF.uid].selected){if(T.editKey!==aF.uid){if(T.selectionMode!=="none"){a1+=" "+T.toTP("jqx-grid-cell-selected");a1+=" "+T.toTP("jqx-fill-state-pressed");a1+=" "+T.toTP("jqx-scheduler-cell-selected")}}}}}if(!(P.hidden)){ab+=o+aH;if(v==0&&!T.rtl){aG+="border-left-width: 0px;"}v++}else{aG+="display: none;";T._hiddencolumns=true}if(!(W==0&&g&&(aC==="dayView"||aC==="weekView"))){if(aC.indexOf("month")==-1){a1+=" "+T.toTP("jqx-grid-cell-nowrap");if(W%2==1&&!P.timeColumn){a1+=" "+T.toTP("jqx-scheduler-middle-cell")}if(!P.timeColumn){if(F.showWorkTime!==false){var M=1;var I=5;var aw=8;var m=18;if(F.workTime){var M=F.workTime.fromDayOfWeek?F.workTime.fromDayOfWeek:0;var I=F.workTime.toDayOfWeek?F.workTime.toDayOfWeek:0;var aw=F.workTime.fromHour?F.workTime.fromHour:8;var m=F.workTime.toHour?F.workTime.toHour:8}if(B.dayOfWeek()>=M&&B.dayOfWeek()<=I){if(B.hour()>=aw&&B.hour()<m){a1+=" "+T.toTP("jqx-scheduler-work-time-cell")}else{a1+=" "+T.toTP("jqx-scheduler-not-work-time-cell")}}else{a1+=" "+T.toTP("jqx-scheduler-not-work-time-cell")}}}}}var af="";if(aC==="monthView"){if(!T.touchDevice){a1+=" "+T.toTP("jqx-top-align")}var ad="dd";af=B.toDate();var aX=T.toTP("jqx-scheduler-month-outer-cell")+" ";var ay=T.toTP("jqx-scheduler-month-weekend-cell");if(T.date.month()==B.month()){aX=""}if(!B.isWeekend()){ay=""}else{a1+=" "+ay}if(af.getDate()===1){ad="MMM dd"}if(T.touchDevice){if(A>16){af="<div class='"+aX+T.toTP("jqx-scheduler-month-cell-touch")+"'>"+a.jqx.dataFormat.formatdate(af,ad,T.schedulerLocalization)+"<span style='display: none; float: right; cursor: pointer; width:16px; height: 16px;' class='"+T.toTP("jqx-icon-arrow-down")+"'></span></div>"}else{af="<div class='"+aX+T.toTP("jqx-scheduler-month-cell-touch")+"'>"+a.jqx.dataFormat.formatdate(af,ad,T.schedulerLocalization)+"<span style='display: none; float: right; cursor: pointer;' class='"+T.toTP("jqx-icon-arrow-down")+"'></span></div>"}}else{if(A>16){af="<div class='"+aX+T.toTP("jqx-scheduler-month-cell")+"'>"+a.jqx.dataFormat.formatdate(af,ad,T.schedulerLocalization)+"<span style='display: none; float: right; cursor: pointer; width:16px; height: 16px;' class='"+T.toTP("jqx-icon-arrow-down")+"'></span></div>"}else{af="<div class='"+aX+T.toTP("jqx-scheduler-month-cell")+"'>"+a.jqx.dataFormat.formatdate(af,ad,T.schedulerLocalization)+"<span style='display: none; float: right; cursor: pointer;' class='"+T.toTP("jqx-icon-arrow-down")+"'></span></div>"}}}else{if(aC==="timelineWeekView"||aC==="timelineDayView"||aC==="timelineMonthView"){a1+=" "+T.toTP("jqx-right-align jqx-bottom-align");af="<span style='display: none; float: right; cursor: pointer; width:16px; height: 16px;' class='"+T.toTP("jqx-icon-arrow-down")+"'></span>"}}if(W==0&&g&&(aC==="dayView"||aC==="weekView")&&!P.timeColumn){a1+=" "+T.toTP("jqx-top-align");a1+=" "+T.toTP("jqx-scheduler-all-day-cell");if(T.rtl){a1+=" "+T.toTP("jqx-rtl")}af=B.toDate();af="<span>"+a.jqx.dataFormat.formatdate(af,"dd",T.schedulerLocalization)+"</span>"}var r=P.cellsFormat;if(P.timeColumn&&!P.hidden){af=B.toDate();if(P.timeZone){af=B.clone().toTimeZone(P.timeZone);af=af.toDate()}if(!P.timeColumn.format){if(af.getHours()==0||af.getHours()==12){r="hh tt"}else{r="hh:mm"}}if(a.jqx.dataFormat.isDate(af)){af=a.jqx.dataFormat.formatdate(af,r,T.schedulerLocalization)}if(W<l){if(!T.rtl){a1+=" "+T.toTP("jqx-scheduler-time-column-header-cell")}else{a1+=" "+T.toTP("jqx-scheduler-time-column-header-cell-rtl")}af=""}if(W<l){if(P._text){a1+=" "+T.toTP("jqx-bottom-align")}if(F.timeRuler&&F.timeRuler.timeZones&&F.timeRuler.timeZones.length>0){if(V<F.timeRuler.timeZones.length){af=P._text}}}}else{if(r!=""){if(a.jqx.dataFormat){if(a.jqx.dataFormat.isDate(af)){af=a.jqx.dataFormat.formatdate(af,r,T.schedulerLocalization)}else{if(a.jqx.dataFormat.isNumber(af)||(!isNaN(parseFloat(af))&&isFinite(af))){af=a.jqx.dataFormat.formatnumber(af,r,T.schedulerLocalization)}}}}}if(P.cellclassname!=""&&P.cellclassname){if(typeof P.cellclassname=="string"){a1+=" "+P.cellclassname}else{var aW=P.cellclassname(W,P.datafield,af,aF);if(aW){a1+=" "+aW}}}if(P.cellsRenderer!=""&&P.cellsRenderer){var aP=ar.indexOf(aF);af=P.cellsRenderer(aP,P.datafield,af,aF)}aG+='" class="'+a1+'">';aG+=af;aG+="</td>";s+=aG}if(aJ==0){T.table[0].style.width=ab+2+"px";T.pinnedtable[0].style.width=ab+2+"px";aJ=ab}s+="</tr>";G+=s;if(!T.rowinfo[aF.uid]){T.rowinfo[aF.uid]={row:aF}}else{if(!("row" in T.rowinfo[aF.uid])){T.rowinfo[aF.uid].row=aF}}}}G+="</table>";T.table[0].innerHTML=G;T.pinnedtable[0].innerHTML=G;T.table[0].rows=T.table[0].firstChild.rows;var aN=a.jqx.browser.msie&&a.jqx.browser.version<9;if(g&&(aC==="dayView"||aC==="weekView")&&T.tableRows==1){T.pinnedtable[0].style.display="block";T.pinnedtable[0].style.zIndex="400";T.pinnedtable[0].style.position="absolute";T.pinnedtable[0].style.top="0px";T.pinnedtable[0].style.height=aM+"px";if(!aN){if(T.tableRows==1){T.oldRow=T.table[0].rows[0];T.table[0].rows[0]=T.pinnedtable.find("tr")[0]}else{T.oldRow=T.table[0].rows[1];T.table[0].rows[1]=T.pinnedtable.find("tr")[1]}}}else{T.pinnedtable[0].style.display="none"}var O=a(T.table[0].firstChild);var aR=a(T.pinnedtable[0].firstChild);T._table=O;T._pinnedtable=aR;if(a.jqx.browser.msie&&a.jqx.browser.version<10){T._table[0].style.width=aJ+"px";T._pinnedtable[0].style.width=aJ+"px"}if(ag===0){T._table[0].style.width=(2+aJ)+"px";T._pinnedtable[0].style.width=(2+aJ)+"px"}T._table.addClass("jqx-grid-table-one-cell jqx-disableselect");T._pinnedtable.addClass("jqx-grid-table-one-cell jqx-disableselect");T.rowByCell=new Array();T.columnCells=new Array();function E(){var c={};c.cells=new Array();c.indexOf=function(j){for(var q=0;q<c.cells.length;q++){if(c.cells[q].getAttribute("data-key")==j.getAttribute("data-key")){return q}}return -1};return c}T.cellWidth=0;T.cellHeight=0;var S=T.table[0].rows.length;for(var W=0;W<S;W++){var u=T.table[0].rows[W];if(u.getAttribute("data-group-row")){continue}var aF=new E();aF.aboveRow=null;aF.belowRow=null;if(T.rows.length>0){aF.aboveRow=T.rows[T.rows.length-1];T.rows[T.rows.length-1].belowRow=aF}if(T._views[T._view].type=="monthView"){aF.top=a(u).position().top}T.rows.push(aF);for(var V=0;V<u.cells.length;V++){var L=u.cells[V];if(L.getAttribute("data-time-slot")){continue}if(L.style.display==="none"){continue}if(L.className.indexOf("jqx-grid-cell-pinned")>=0){continue}if(!T.columnCells[aF.cells.length]){T.columnCells[aF.cells.length]=new Array()}T.columnCells[aF.cells.length].push(L);if(T.cellWidth==0){T.cellWidth=L.clientWidth}if(T.cellHeight==0&&(S==1||W>1)){T.cellHeight=L.clientHeight}aF.cells.push(L);T.rowByCell[L.getAttribute("data-key")]=aF}}if(ag===0){T._table[0].style.tableLayout="auto"}T._renderAppointments(e,aK);if(T.pinnedtable[0].style.display!="none"||((aC=="dayView"||aC=="weekView")&&T.tableRows>1)){T._updateScrollbars(T.host.height())}if(T.rendered){T.rendered()}T.renderedTime=new Date()},showAppointmentsByResource:function(g){var f=this;for(var e=0;e<f.uiappointments.length;e++){var h=f.uiappointments[e];if(h.resourceId==g){h.hidden=false;h.hiddenByResourceId=false;if(h.exceptions){for(var d=0;d<h.exceptions.length;d++){h.exceptions[d].hiddenByResourceId=false;h.exceptions[d].hidden=false}}}}if(f._resourcesElements){var c=f.getColors(f._resources.indexOf(g));f._resourcesElements.top[g].attr("data-toggle","on");f._resourcesElements.top[g].css("background",c.background);f._resourcesElements.bottom[g].attr("data-toggle","on");f._resourcesElements.bottom[g].css("background",c.background)}if(f.hiddenResources){delete f.hiddenResources[g]}f._renderrows()},hideAppointmentsByResource:function(f){var e=this;for(var d=0;d<e.uiappointments.length;d++){var g=e.uiappointments[d];if(g.resourceId==f){g.hidden=true;g.hiddenByResourceId=true;if(g.exceptions){for(var c=0;c<g.exceptions.length;c++){g.exceptions[c].hiddenByResourceId=true;g.exceptions[c].hidden=true}}}}if(e._resourcesElements){e._resourcesElements.top[f].attr("data-toggle","off");e._resourcesElements.top[f].css("background","transparent");e._resourcesElements.bottom[f].attr("data-toggle","off");e._resourcesElements.bottom[f].css("background","transparent")}if(!e.hiddenResources){e.hiddenResources=new Array()}e.hiddenResources[f]=true;e._renderrows()},_prepareAppointmentsInView:function(h,g){var k=this;if(k._appupdating){return}var n=new Array();for(var t=0;t<this.uiappointments.length;t++){var o=this.uiappointments[t];if(o.hidden&&o.recurrencePattern==null){continue}var p=a.jqx.scheduler.utilities.rangeIntersection(o.from,o.to,h,g);if(p&&!o.recurrencePattern){n.push(o)}o.renderedAppointments=new Array();var w=false;if(o.recurrencePattern){var v=o.getOccurrences(h,g);var u=o.exceptions;for(var s=0;s<v.length;s++){var f=v[s];if(f.hidden){continue}var d=true;for(var q=0;q<u.length;q++){var l=u[q];var x=l.occurrenceFrom?l.occurrenceFrom:l;if(k.selectedJQXAppointment&&k.selectedJQXAppointment.rootAppointment){if(!w&&k.selectedJQXAppointment.occurrenceFrom.clearTime().equals(x.clearTime())){k.selectedJQXAppointment=l;w=true}}if(x.clearTime().equals(f.from.clearTime())){d=false;break}}if(!d){continue}if(k.selectedJQXAppointment&&k.selectedJQXAppointment.rootAppointment){if(!w&&k.selectedJQXAppointment.occurrenceFrom.clearTime().equals(f.occurrenceFrom.clearTime())){k.selectedJQXAppointment=f;w=true}}o.renderedAppointments[f.id]=f;n.push(f)}for(var q=0;q<u.length;q++){var l=u[q];var x=l.occurrenceFrom?l.from:l;var r=o.createOccurrence(x);if(l.occurrenceFrom){l.cloneAppointmentAttributes(r);if(l.hidden){continue}}if(r!=o){n.push(l);o.renderedAppointments[l.id]=l}}}}var c=new Array();this.tabKeyAppointments=new Array();for(var t=0;t<n.length;t++){var e=n[t];c.push(e);this.tabKeyAppointments.push(e)}c.sort(this._sortAppointmentsByFrom);if(this._resources.length>0){this.tabKeyAppointments.sort(function(j,i){return k._sortAppointmentsByResourceId(j,i,k)})}else{this.tabKeyAppointments.sort(this._sortAppointmentsByFrom)}this.appointmentsToRender=c},_renderDayWeekAppointments:function(){var M=this;var aa=M._views[M._view].type;var L=M._views[M._view];var B=new Array();var J=new Array();var Y=this.rows;var F=M.showAllDayRow;if(L.timeRuler&&L.timeRuler.showAllDayRow!=undefined){F=L.timeRuler.showAllDayRow}for(var g=0;g<this.appointmentsToRender.length;g++){var t=this.appointmentsToRender[g];var v=t.from;var ac=t.to;var U=a.jqx.scheduler.utilities.getEndOfDay(ac);var E=v.day();var f=t.allDay;var w=M._getDateByString;var G=new Array();var s=new Array();var q=t.resourceId;var k=M._resources.indexOf(q);if(M.resources&&M.resources.orientation=="none"){k=-1}var C=v.toDate().valueOf();var l=ac.toDate().valueOf();var P=U.toDate().valueOf();var ad=function(j,i){if(j.date<i.date){return -1}if(j.date==i.date){return 0}if(j.date>i.date){return 1}};if(!t.allDay&&t.duration().days()<1||!F){var r=ac.toDate();var H=false;if(r.getHours()==0&&r.getMinutes()==0){H=true}for(var W=0;W<M.columnCells.length;W++){if(!M.columnCells[W]){continue}var z=M.columnCells[W];if(M.rtl){z=M.columnCells[M.columnCells.length-1-W]}for(var V=0;V<z.length;V++){if(z[V].getAttribute("data-end-date")){continue}var o=z[V].getAttribute("data-date");var X=w(o);var n=X.valueOf();if(n>ac){continue}if(C<=n&&n<l){if(k!=-1){if((1+k)!=z[V].getAttribute("data-view")){continue}}if(E!=X.getDate()){G.sort(ad);s.push(G);G=new Array();E=v.addDays(1).day()}G.push({cell:z[V],date:X})}}}G.sort(ad);s.push(G);var D=new Array();for(var W=0;W<s.length;W++){var z=s[W];if(z.length==0){continue}var d=M.cellWidth;var e=z[z.length-1].cell.offsetTop+M.cellHeight;var O=z[0].cell.offsetLeft;var N=z[0].cell.offsetTop;var R=M.getMinutesPerScale();var r=new a.jqx.date(z[z.length-1].date,M.timeZone).addMinutes(R);var ab={cells:z,x:O,y:N,height:e-N,width:d,appointment:t,from:new a.jqx.date(z[0].date,M.timeZone),to:r};D.push(ab);B.push(ab)}t.elements=D;if(t.rootAppointment){t.rootAppointment.elements=t.rootAppointment.elements.concat(t.elements)}}else{var z=Y[0].cells;if(this.tableRows>1){var T=Y.length/M.tableRows;var c=k*T;z=Y[c].cells}for(var V=0;V<z.length;V++){var o=z[V].getAttribute("data-date");var ae=w(o);var X=new a.jqx.date(ae,M.timeZone);X=a.jqx.scheduler.utilities.getEndOfDay(X);var n=X.toDate().valueOf();if(n>U){continue}if(v<=X&&X<=U){if(k!=-1){if((1+k)!=z[V].getAttribute("data-view")){continue}}if(G.length==0){X=a.jqx.scheduler.utilities.getStartOfDay(X)}G.push({cell:z[V],date:X})}}G.sort(ad);s.push(G);var D=new Array();for(var W=0;W<s.length;W++){var z=s[W];if(z.length==0){break}var m=a(z[0].cell).position();var d=a(z[z.length-1].cell).position().left+this.cellWidth-m.left;var e=a(z[z.length-1].cell).position().top;var O=m.left;var N=m.top;if(this.rtl){var m=a(z[z.length-1].cell).position();var O=m.left;var d=a(z[0].cell).position().left+this.cellWidth-m.left}var S=z[z.length-1].date;S=new a.jqx.date(a.jqx.scheduler.utilities.getEndOfDay(S),M.timeZone);var ab={cells:z,x:O,y:N,height:e-N+this.cellHeight,width:d,appointment:t,from:a.jqx.scheduler.utilities.getStartOfDay(new a.jqx.date(z[0].date,M.timeZone)),to:S};D.push(ab);J.push(ab)}t.elements=D;if(t.rootAppointment){t.rootAppointment.elements=t.rootAppointment.elements.concat(t.elements)}}}var A=this.getViewStart();var Q=this.getViewEnd();if(this._resources.length<2||this.resources.orientation=="none"){var Z=new Array();var h=A;var I=0;while(h<Q){Z[I]=new Array();for(var W=0;W<B.length;W++){var u=B[W];if(u.from.day()==h.day()){u.column=-1;u.columnSpan=1;Z[I].push(u)}}I++;h=h.addDays(1)}for(var W=0;W<Z.length;W++){this._renderAppointmentsInDay(Z[W])}this._renderAllDayAppointments(J)}else{for(var V=0;V<this._resources.length;V++){var K=this._resources[V];var Z=new Array();var h=A;var I=0;while(h<Q){Z[I]=new Array();for(var W=0;W<B.length;W++){var u=B[W];if(u.from.day()==h.day()){u.column=-1;u.columnSpan=1;if(u.appointment.resourceId==K){Z[I].push(u)}}}I++;h=h.addDays(1)}for(var W=0;W<Z.length;W++){this._renderAppointmentsInDay(Z[W])}var p=new Array();for(var W=0;W<J.length;W++){if(J[W].appointment.resourceId==K){p.push(J[W])}}this._renderAllDayAppointments(p)}}},_renderAllDayAppointments:function(am){var Z=this;var H=this.showAllDayRow;var Y=this._views[this._view];if(Y.timeRuler&&Y.timeRuler.showAllDayRow!=undefined){H=Y.timeRuler.showAllDayRow}if(!H){return}if(am.length==0){return}var C=am;var G=1;G=this.getMaxAllDayAppointments(am);if(this.tableRows==1){var B=this.table[0].rows[0].clientHeight/G}else{var B=this.table[0].rows[1].clientHeight/G}for(var ak=0;ak<am.length;ak++){var z=am[ak];z.row=-1;var e=this.getCollisionAppointments(z,am);e.sort(this._sortAppointmentsByFrom);var t=e.indexOf(z);if(t>=0){for(var af=t;af<e.length;af++){e[af].row=-1}}for(var ah=0;ah<G;ah++){var o=ah;for(var R in e){if(R=="indexOf"){break}var V=e[R];if(V.row==-1&&!this.isBusyRow(o,e)){V.row=o;var ai=G;var d=this.getMaxAllDayAppointments(e);if(ai>d){ai=d}V.rowsCount=ai}}}}for(var ah=0;ah<C.length;ah++){var z=C[ah];var e=this.getCollisionAppointments(z,C);e.sort(this._sortAppointmentsByFrom);var n=1;for(var R in e){if(R=="indexOf"){break}var L=e[R];n=Math.max(n,L.rowsCount)}for(var R in e){if(R=="indexOf"){break}var L=e[R];L.rowsCount=n}if(e.length==1){z.rowSpan=n}else{var E=0;var g=true;for(var af=z.row;af<n;af++){for(var R in e){if(R=="indexOf"){break}var V=e[R];if(V==z){continue}if(V.row==af){g=false}}if(!g){break}E++}z.rowSpan=E}}var al=Z.appointmentsMinHeight+2;if(Z.isTouchDevice()){var al=Z.touchAppointmentsMinHeight+2}for(var ab=0;ab<C.length;ab++){var aa=al;var z=C[ab];z.height=al;var D=aa*z.row;z.y=18+z.y+D+(4*z.row);z.x+=3;z.width-=8}for(var ab=0;ab<C.length;ab++){var ag=C[ab];var K="";var M="auto";var Y=this._views[this._view];var q=ag.appointment.from;var ap=ag.appointment.to;if(Y.timeRuler&&Y.timeRuler.formatString){M=Y.timeRuler.formatString}var ac=M;if(M==="auto"){if((q.hour()==0&&q.minute()==0)||(q.hour()==12&&q.minute()==0)){var ac="hh tt"}else{var ac="hh:mm"}if((ap.hour()==0&&ap.minute()==0)||(ap.hour()==12&&ap.minute()==0)){var A="hh tt"}else{var A="hh:mm"}}var v=q.toString(ac);var w=ap.toString(A);var I=ag.appointment.duration();var f=ag.appointment.allDay||(I.hours===23&&I.minutes===59&&I.seconds===59);var X=ag.appointment.background;var Q=ag.appointment.subject?ag.appointment.subject:"(No Title)";var J=ag.appointment.color;var k=ag.appointment.resourceId;var ad=Z.getColors(Z._resources.indexOf(k));var ae=" data-resourceId='"+k+"' ";var U=ag.appointment.borderColor;var u=ag.appointment.location;if(u.length>0){u=", "+u}if(!X){X=ad.background}if(!U){U=ad.border}if(!J){J=ad.color}var c=ag.appointment.isRecurrentAppointment();var s=ag.appointment.isException();var h=v+"-"+w;if(f){h=""}var aj="";var y=Z.toTP("jqx-scheduler-appointment-status");var P="";var O=Z.statuses[ag.appointment.status];var l=false;if(O){if(O=="transparent"){l=false}else{P="<div style='background: "+O+"; border-right-color: "+U+"' class='"+y+"'></div>";if(O=="tentative"){y=Z.toTP("jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");P="<div style='background-color: "+U+"; border-right-color: "+U+"' class='"+y+"'></div>"}l=true}}var F="";if(Z.rtl){var y=Z.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status");P="<div style='background: "+O+"; border-left-color: "+U+"' class='"+y+"'></div>";if(O=="tentative"){y=Z.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");P="<div style='background-color: "+U+"; border-left-color: "+U+"' class='"+y+"'></div>"}F=P;P=""}var T="";var N=Q+u;if(Z.renderAppointment){var ao=Z.renderAppointment({appointment:ag.appointment.boundAppointment,textColor:J,background:X,borderColor:U,html:N,cssClass:"",style:"",width:ag.width,height:ag.height,view:Z._views[Z._view].type});if(ao){var K=ao.html;if(K!=N){N=K}J=ao.textColor;X=ao.background;U=ao.borderColor;if(ao.cssClass){T=ao.cssClass+" "}if(ao.style!=""){var ad=Z.getAppointmentColors(ao.style);X=ad.background;U=ad.border;J=ad.color}}}if(aj===""){if(l){var aj="<div style='white-space:nowrap;' class='"+Z.toTP("jqx-scheduler-appointment-content")+"'>"+P+"<div class='"+Z.toTP("jqx-scheduler-appointment-inner-content")+"'>"+N+"</div>"+F+"</div>"}else{var aj="<div style='white-space:nowrap;' class='"+Z.toTP("jqx-scheduler-appointment-content")+"'><div class='"+Z.toTP("jqx-scheduler-appointment-inner-content")+"'>"+N+"</div></div>"}}var an="";if(Z.rtl){an=Z.toTP("jqx-rtl jqx-scheduler-appointment-rtl")+" "}if(s){var i=J.toLowerCase()=="white"?Z.toTP("jqx-icon-recurrence-exception-white"):Z.toTP("jqx-icon-recurrence-exception");K="<div data-key='"+ag.appointment.id+"'"+ae+"class='"+an+T+Z.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ag.x+"px; top: "+ag.y+"px; width: "+ag.width+"px; line-height: "+ag.height+"px; height: "+ag.height+"px; border-color:"+U+"; color:"+J+"; background:"+X+";'><div class='"+i+"'></div>"+aj+"<div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{if(c){var r=J.toLowerCase()=="white"?Z.toTP("jqx-icon-recurrence-white"):Z.toTP("jqx-icon-recurrence");K="<div data-key='"+ag.appointment.id+"'"+ae+"class='"+an+T+Z.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ag.x+"px; top: "+ag.y+"px; width: "+ag.width+"px; line-height: "+ag.height+"px; height: "+ag.height+"px; border-color:"+U+"; color:"+J+"; background:"+X+";'><div class='"+r+"'></div>"+aj+"<div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{K="<div data-key='"+ag.appointment.id+"'"+ae+"class='"+an+T+Z.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ag.x+"px; top: "+ag.y+"px; width: "+ag.width+"px; line-height: "+ag.height+"px; height: "+ag.height+"px; border-color:"+U+"; color:"+J+"; background:"+X+";'>"+aj+"<div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+Z.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}}var S=a(K);if(this.tableRows==1){S.appendTo(this.pinnedtable)}else{S.appendTo(this.table)}ag.element=S;if(this.appointmentTooltips){if(!ag.appointment.tooltip){var W=ag.appointment.subject;if(W){var u=ag.appointment.location;if(u){W+="\n"+u}S[0].setAttribute("title",W)}}else{S[0].setAttribute("title",ag.appointment.tooltip)}}}},_renderAppointmentsInDay:function(al,ak){if(al.length==0){return}var Y=this;var X=this._views[this._view];var C=al;var D=this.getViewStart();var ab=this.getViewEnd();var ag=1;var q=0;if(X.timeRuler){q=this.columns.records[1].width;if(X.timeRuler.timeZones){q=this.columns.records[1+X.timeRuler.timeZones.length].width}}else{q=this.columns.records[1].width}ag=this.getMaxColumnsInADay(al);var o=q/ag;if(o<0){return}for(var aj=0;aj<al.length;aj++){var A=al[aj];A.column=-1;var e=this.getCollisionAppointments(A,al);e.sort(this._sortAppointmentsByFrom);var u=e.indexOf(A);if(u>=0){for(var ae=u;ae<e.length;ae++){e[ae].column=-1}}for(var ah=0;ah<ag;ah++){var f=ah;for(var Q in e){if(Q=="indexOf"){break}var U=e[Q];if(U.column==-1&&!this.isBusyColumn(f,e)){U.column=f;var h=ag;var d=this.getMaxColumnsInADay(e);if(h>d){h=d}U.columnsCount=h}}}}for(var ah=0;ah<C.length;ah++){var A=C[ah];var e=this.getCollisionAppointments(A,C);e.sort(this._sortAppointmentsByFrom);var H=1;for(var Q in e){if(Q=="indexOf"){break}var K=e[Q];if(K.columnsCount==undefined){continue}H=Math.max(H,K.columnsCount)}for(var Q in e){if(Q=="indexOf"){break}var K=e[Q];K.columnsCount=H}if(e.length==1){A.columnSpan=H}else{var E=0;var g=true;for(var ae=A.column;ae<H;ae++){for(var Q in e){if(Q=="indexOf"){break}var U=e[Q];if(U.column==undefined){continue}if(U==A){continue}if(U.column==ae){g=false}}if(!g){break}E++}A.columnSpan=E}}for(var Z=0;Z<C.length;Z++){var F=q/C[Z].columnsCount;var A=C[Z];A.width=-5+(F*A.columnSpan);var an=F*A.column;A.x=2+A.x+an;A.height-=5;A.y+=1}for(var Z=0;Z<C.length;Z++){var af=C[Z];var J="";var L="auto";var X=this._views[this._view];var r=af.appointment.from;var ap=af.appointment.to;if(X.timeRuler&&X.timeRuler.formatString){L=X.timeRuler.formatString}var aa=L;if(L==="auto"){if((r.hour()==0&&r.minute()==0)||(r.hour()==12&&r.minute()==0)){var aa="hh tt"}else{var aa="hh:mm"}if((ap.hour()==0&&ap.minute()==0)||(ap.hour()==12&&ap.minute()==0)){var B="hh tt"}else{var B="hh:mm"}}var w=r.toString(aa);var y=ap.toString(B);var W=af.appointment.background;var P=af.appointment.subject?af.appointment.subject:"(No Title)";var v=af.appointment.location?af.appointment.location:"";var I=af.appointment.color;var l=af.appointment.resourceId;var ac=Y.getColors(Y._resources.indexOf(l));var ad=" data-resourceId='"+l+"' ";var T=af.appointment.borderColor;if(!W){W=ac.background}if(!T){T=ac.border}if(!I){I=ac.color}var c=af.appointment.isRecurrentAppointment();var t=af.appointment.isException();var ai="";var z=Y.toTP("jqx-scheduler-appointment-status");var O="";var N=Y.statuses[af.appointment.status];var n=false;if(N){if(N=="transparent"){n=false}else{O="<div style='background: "+N+"; border-right-color: "+T+"' class='"+z+"'></div>";if(N=="tentative"){z=Y.toTP("jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");O="<div style='background-color: "+T+"; border-right-color: "+T+"' class='"+z+"'></div>"}n=true}}var G="";if(Y.rtl){var z=Y.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status");O="<div style='background: "+N+"; border-left-color: "+T+"' class='"+z+"'></div>";if(N=="tentative"){z=Y.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");O="<div style='background-color: "+T+"; border-left-color: "+T+"' class='"+z+"'></div>"}G=O;O=""}var S="";var M=P+"<br/>"+v;if(!v){var M=P}if(Y.renderAppointment){var ao=Y.renderAppointment({appointment:af.appointment.boundAppointment,textColor:I,background:W,borderColor:T,html:M,cssClass:"",style:"",width:af.width,height:af.height,view:Y._views[Y._view].type});if(ao){var J=ao.html;if(J!=M){M=J}I=ao.textColor;W=ao.background;T=ao.borderColor;if(ao.cssClass){S=ao.cssClass+" "}if(ao.style!=""){var ac=Y.getAppointmentColors(ao.style);W=ac.background;T=ac.border;I=ac.color}}}if(ai===""){if(n){var ai="<div class='"+Y.toTP("jqx-scheduler-appointment-content")+"'>"+O+"<div class='"+Y.toTP("jqx-scheduler-appointment-inner-content")+"'>"+M+"</div>"+G+"</div>"}else{var ai="<div class='"+Y.toTP("jqx-scheduler-appointment-content")+"'><div class='"+Y.toTP("jqx-scheduler-appointment-inner-content")+"'>"+M+"</div></div>"}}var am="";if(Y.rtl){am=Y.toTP("jqx-rtl jqx-scheduler-appointment-rtl")+" "}if(t){var k=I.toLowerCase()=="white"?Y.toTP("jqx-icon-recurrence-exception-white"):Y.toTP("jqx-icon-recurrence-exception");J="<div data-key='"+af.appointment.id+"'"+ad+"class='"+am+S+Y.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; border-color:"+T+"; color:"+I+"; background:"+W+";'><div class='"+k+"'></div>"+ai+"<div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-top-resize-indicator")+"'></div><div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-bottom-resize-indicator")+"'></div></div>"}else{if(c){var s=I.toLowerCase()=="white"?Y.toTP("jqx-icon-recurrence-white"):Y.toTP("jqx-icon-recurrence");J="<div data-key='"+af.appointment.id+"'"+ad+"class='"+am+S+Y.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; border-color:"+T+"; color:"+I+"; background:"+W+";'><div class='"+s+"'></div>"+ai+"<div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-top-resize-indicator")+"'></div><div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-bottom-resize-indicator")+"'></div></div>"}else{J="<div data-key='"+af.appointment.id+"'"+ad+"class='"+am+S+Y.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; border-color:"+T+"; color:"+I+"; background:"+W+";'>"+ai+"<div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-top-resize-indicator")+"'></div><div class='"+Y.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-bottom-resize-indicator")+"'></div></div>"}}var R=a(J);R.appendTo(this.table);af.element=R;if(this.appointmentTooltips){if(!af.appointment.tooltip){var V=af.appointment.subject;if(V){var v=af.appointment.location;if(v){V+="\n"+v}R[0].setAttribute("title",V)}}else{R[0].setAttribute("title",af.appointment.tooltip)}}}},getCollisionAppointments:function(c,g){var k=new Array();var h=c.from;var j=c.to;for(var e=0;e<g.length;e++){var l=g[e];var f=l.from;var d=l.to;if(a.jqx.scheduler.utilities.rangeIntersection(h,j,f,d)){k.push(l)}}return k},getAllDayCollisionAppointments:function(c,g){var k=new Array();var h=a.jqx.scheduler.utilities.getStartOfDay(c.from);var j=a.jqx.scheduler.utilities.getEndOfDay(c.to);for(var e=0;e<g.length;e++){var l=g[e];var f=a.jqx.scheduler.utilities.getStartOfDay(l.from);var d=a.jqx.scheduler.utilities.getEndOfDay(l.to);if(a.jqx.scheduler.utilities.rangeIntersection(h,j,f,d)){k.push(l)}}return k},_renderAppointments:function(f,d){var e=this;if(e._appupdating){return}e.table.find(".jqx-scheduler-appointment").remove();e.pinnedtable.find(".jqx-scheduler-appointment").remove();var c=e._views[e._view].type;if(c==="dayView"||c==="weekView"){e._renderDayWeekAppointments(f,d)}else{if(c==="monthView"){e._renderMonthAppointments(f,d)}else{if(c==="timelineWeekView"||c==="timelineDayView"||c==="timelineMonthView"){e._renderTimelineAppointments(f,d)}}}if(e.selectedJQXAppointment){e._selectAppointment(e.selectedJQXAppointment)}},_renderTimelineAppointments:function(u,H){var D=this;var P=D._views[D._view].type;var C=D._views[D._view];var v=new Array();var O=this.rows;var K=this.cellHeight;var J=this.cellWidth;var I=D.getMinutesPerScale();for(var e=0;e<this.appointmentsToRender.length;e++){var p=this.appointmentsToRender[e];var q=p.from;var R=p.to;var s=D._getDateByString;var A=new Array();var w=q.toDate().valueOf();var h=R.toDate().valueOf();if(P==="timelineMonthView"){w=q.clearTime().toDate().valueOf()}var S=function(j,i){if(j.date<i.date){return -1}if(j.date==i.date){return 0}if(j.date>i.date){return 1}};var r=D.rows[0];var n=p.resourceId;var g=D._resources.indexOf(n);if(D._resources.length>0){if(D.resources.orientation!=="horizontal"){if(g>=1){r=D.rows[g]}}}if(D.resources&&D.resources.orientation=="none"){g=-1;var r=D.rows[0]}var t=r.cells;for(var L=0;L<t.length;L++){var l=t[L].getAttribute("data-date");t[L].appointments=new Array();var N=s(l);var k=N.valueOf();if(k>R){continue}if(w<=k&&k<h){if(g!=-1){if((1+g)!=t[L].getAttribute("data-view")){continue}}A.push({cell:t[L],date:N});r=M}}A.sort(S);var z=new Array();var t=A;if(t.length==0){break}var m=D.appointmentsMinHeight;if(D.isTouchDevice()){m=D.touchAppointmentsMinHeight}if(C.appointmentHeight){m=C.appointmentHeight}var G=a(t[0].cell).position();var d=m;var c=a(t[t.length-1].cell).position().left-G.left+J;var F=G.left;var E=G.top;if(D.rtl){var G=a(t[t.length-1].cell).position();var c=a(t[0].cell).position().left-G.left+J;var F=G.left;var E=G.top}var o=new a.jqx.date(t[t.length-1].date,D.timeZone).addMinutes(I);if(P==="timelineMonthView"){var o=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(t[t.length-1].date,D.timeZone))}var Q={cellX:F,cellY:E,cellHeight:K,cells:t,x:F,y:E,height:d,width:c,appointment:p,from:new a.jqx.date(t[0].date,D.timeZone),to:o};z.push(Q);v.push(Q);p.elements=z;if(p.rootAppointment){p.rootAppointment.elements=p.rootAppointment.elements.concat(p.elements)}}if(this._resources.length<2||this.resources.orientation=="none"){this._renderUITimelineAppointments(v,u,H)}else{for(var L=0;L<this._resources.length;L++){var B=this._resources[L];var f=new Array();for(var M=0;M<v.length;M++){if(v[M].appointment.resourceId==B){f.push(v[M])}}this._renderUITimelineAppointments(f,u,H)}}},_renderUITimelineAppointments:function(ak,w,Z){var V=this;var al=V._views[V._view].type;var T=V._views[V._view];var D=ak;var C=1;var V=this;var Q=new Array();C=V.getMaxTimelineAppointments(ak,Q,w,Z);var h=V.appointmentsMinHeight;if(V.isTouchDevice()){h=V.touchAppointmentsMinHeight}if(T.appointmentHeight){h=T.appointmentHeight}for(var aj=0;aj<ak.length;aj++){var g=ak[aj];g.row=-1;var e=V.getCollisionAppointments(g,ak);e.sort(V._sortAppointmentsByFrom);var t=e.indexOf(g);if(t>=0){for(var ae=t;ae<e.length;ae++){e[ae].row=-1}}for(var ag=0;ag<C;ag++){var o=ag;for(var M in e){if(M=="indexOf"){break}var R=e[M];if(R.row==-1&&!V.isBusyRow(o,e)){R.row=o;var ah=C;var d=V.getMaxTimelineAppointments(e,Q,w,Z);if(ah>d){ah=d}R.rowsCount=ah}}}}for(var ag=0;ag<D.length;ag++){var g=D[ag];var e=V.getCollisionAppointments(g,D);e.sort(V._sortAppointmentsByFrom);var n=1;for(var M in e){if(M=="indexOf"){break}var G=e[M];n=Math.max(n,G.rowsCount)}for(var M in e){if(M=="indexOf"){break}var G=e[M];G.rowsCount=n}if(e.length==1){g.rowSpan=n}else{var z=0;var f=true;for(var ae=g.row;ae<n;ae++){for(var M in e){if(M=="indexOf"){break}var R=e[M];if(R==g){continue}if(R.row==ae){f=false}}if(!f){break}z++}g.rowSpan=z}}for(var X=0;X<D.length;X++){var W=h;var g=D[X];g.height=W;var y=2+(3+W)*g.row;g.y=g.y+y;g.x+=1;g.width-=5}var ad="";for(var X=0;X<D.length;X++){var af=D[X];var F="";var H="auto";var T=V._views[V._view];var q=af.appointment.from;var ao=af.appointment.to;if(T.timeRuler&&T.timeRuler.formatString){H=T.timeRuler.formatString}var U=af.appointment.background;var L=af.appointment.subject?af.appointment.subject:"(No Title)";var u=af.appointment.location;if(u&&u.length>1){u=", "+u}var E=af.appointment.color;var k=af.appointment.resourceId;var aa=V.getColors(V._resources.indexOf(k));var ab=" data-resourceId='"+k+"' ";var P=af.appointment.borderColor;if(!U){U=aa.background}if(!P){P=aa.border}if(!E){E=aa.color}var c=af.appointment.isRecurrentAppointment();var s=af.appointment.isException();var ai="";var v=V.toTP("jqx-scheduler-appointment-status");var K="";var J=V.statuses[af.appointment.status];var l=false;if(J){if(J=="transparent"){l=false}else{K="<div style='background: "+J+"; border-right-color: "+P+"' class='"+v+"'></div>";if(J=="tentative"){v=V.toTP("jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");K="<div style='background-color: "+P+"; border-right-color: "+P+"' class='"+v+"'></div>"}l=true}}var A="";if(V.rtl){var v=V.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status");K="<div style='background: "+J+"; border-left-color: "+P+"' class='"+v+"'></div>";if(J=="tentative"){v=V.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");K="<div style='background-color: "+P+"; border-left-color: "+P+"' class='"+v+"'></div>"}A=K;K=""}var O="";var I=L+"<br/>"+u;if(V.renderAppointment){var an=V.renderAppointment({appointment:af.appointment.boundAppointment,textColor:E,background:U,borderColor:P,html:I,cssClass:"",style:"",width:af.width,height:af.height,view:V._views[V._view].type});if(an){var F=an.html;if(F!=I){I=F}E=an.textColor;U=an.background;P=an.borderColor;if(an.cssClass){O=an.cssClass+" "}if(an.style!=""){var aa=V.getAppointmentColors(an.style);U=aa.background;P=aa.border;E=aa.color}}}if(ai===""){if(l){var ai="<div style='white-space:nowrap;' class='"+V.toTP("jqx-scheduler-appointment-content")+"'>"+K+"<div class='"+V.toTP("jqx-scheduler-appointment-inner-content")+"'>"+I+"</div>"+A+"</div>"}else{var ai="<div style='white-space:nowrap;' class='"+V.toTP("jqx-scheduler-appointment-content")+"'><div class='"+V.toTP("jqx-scheduler-appointment-inner-content")+"'>"+I+"</div></div>"}}var am="";if(V.rtl){am=V.toTP("jqx-rtl jqx-scheduler-appointment-rtl")+" "}if(s){var i=E.toLowerCase()=="white"?V.toTP("jqx-icon-recurrence-exception-white"):V.toTP("jqx-icon-recurrence-exception");F="<div data-key='"+af.appointment.id+"'"+ab+"class='"+am+O+V.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; line-height: "+af.height+"px; border-color:"+P+"; color:"+E+"; background:"+U+";'><div class='"+i+"'></div>"+ai+"<div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{if(c){var r=E.toLowerCase()=="white"?V.toTP("jqx-icon-recurrence-white"):V.toTP("jqx-icon-recurrence");F="<div data-key='"+af.appointment.id+"'"+ab+"class='"+am+O+V.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; line-height: "+af.height+"px; border-color:"+P+"; color:"+E+"; background:"+U+";'><div class='"+r+"'></div>"+ai+"<div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{F="<div data-key='"+af.appointment.id+"'"+ab+"class='"+am+O+V.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+af.x+"px; top: "+af.y+"px; width: "+af.width+"px; height: "+af.height+"px; line-height: "+af.height+"px; border-color:"+P+"; color:"+E+"; background:"+U+";'>"+ai+"<div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+V.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}}ad=F;var N=a(F);N.appendTo(this.table);af.element=N;if(this.appointmentTooltips){if(!af.appointment.tooltip){var S=af.appointment.subject;if(S){var u=af.appointment.location;if(u){S+="\n"+u}N[0].setAttribute("title",S)}}else{N[0].setAttribute("title",af.appointment.tooltip)}}}var ac=V.table.find(".jqx-scheduler-appointment");var B=function(m){for(var j=0;j<ac.length;j++){var p=ac[j].getAttribute("data-key");if(p==m){return ac[j]}}};for(var X=0;X<D.length;X++){var af=D[X];var Y=false;var N=a(B(af.appointment.id));a.each(af.cells,function(p){var m=a(this.cell);var aq=af.cellY;var ap=af.cellX;var j=af.cellHeight;if(!m[0].appointments){m[0].appointments=new Array()}m[0].appointments.push({ui:N,appointment:af});N=N;if(af.y+af.height>=aq+j-12){N[0].style.visibility="hidden";var x=m.find(".jqx-icon-arrow-down");if(x.length>0){x[0].style.display="block";x[0].mousedown=function(){if(V.openedMonthCellPopup){V.openedMonthCellPopup.remove()}var ar=a("<div></div>");var av=new a.jqx.date(m.attr("data-date"),V.timeZone);var ay=a("<div class='"+V.toTP("jqx-scheduler-month-cell")+"'><span style='float: right; cursor: pointer; width:16px; height: 16px;' class='"+V.toTP("jqx-icon-close")+"'></span></div>");ay.height(16);ay.find("span")[0].mousedown=function(){ar.remove()};ay.addClass(V.toTP("jqx-widget-header"));ar.addClass(V.toTP("jqx-widget"));ar.addClass(V.toTP("jqx-window"));ar.addClass(V.toTP("jqx-scheduler-month-cell-popup"));ar.addClass(V.toTP("jqx-popup"));var az=a("<div></div>");ar.append(ay);ar.append(az);az.addClass(V.toTP("jqx-widget-content"));var at=m.width();var aB=21;for(var aw=0;aw<m[0].appointments.length;aw++){var au=m[0].appointments[aw].ui.clone(true);au.css("left","3px");au.css("top","0px");au.css("margin-top","2px");au.css("position","relative");au.css("visibility","visible");au.width(at-6);aB+=au.outerHeight()+4;az.append(au)}ar.css("overflow","hidden");ar.css("position","absolute");var aA=V.table.height()-aq-25;if(aA<j){aA=j}ar.css("max-height",aA);ar.height(aB);ar.width(at);ar.css("z-index","999999");var ax=m.position();ar.css("top",ax.top);ar.css("left",ax.left);V.table.append(ar);V.openedMonthCellPopup=ar}}}})}},_renderMonthAppointments:function(){var L=this;var V=L._views[L._view].type;var K=L._views[L._view];var B=new Array();var T=this.rows;var P=a(".jqx-scheduler-month-cell:first").height();for(var f=0;f<this.appointmentsToRender.length;f++){var s=this.appointmentsToRender[f];var u=a.jqx.scheduler.utilities.getStartOfDay(s.from);var X=a.jqx.scheduler.utilities.getEndOfDay(s.to);var d=s.allDay;var w=L._getDateByString;var G=new Array();var r=new Array();var C=u.toDate().valueOf();var l=X.toDate().valueOf();var Y=function(j,i){if(j.date<i.date){return -1}if(j.date==i.date){return 0}if(j.date>i.date){return 1}};var v=-1;var p=s.resourceId;var k=L._resources.indexOf(p);if(L.resources&&L.resources.orientation=="none"){k=-1}for(var R=0;R<L.rows.length;R++){var z=L.rows[R].cells;for(var Q=0;Q<z.length;Q++){var n=z[Q].getAttribute("data-date");var S=w(n);var m=S.valueOf();if(m>X){continue}z[Q].appointments=new Array();if(k!=-1){if((1+k)!=z[Q].getAttribute("data-view")){continue}}if(C<=m&&m<l){if(v!=R&&v!=-1){G.sort(Y);r.push(G);G=new Array()}G.push({cell:z[Q],date:S});v=R}}}G.sort(Y);r.push(G);var D=new Array();for(var R=0;R<r.length;R++){var z=r[R];if(z.length==0){break}var o=L.appointmentsMinHeight;if(L.isTouchDevice()){o=L.touchAppointmentsMinHeight}if(K.appointmentHeight){o=K.appointmentHeight}var e=o;var F=a(z[z.length-1].cell).position().left;var c=F-a(z[0].cell).position().left+L.columns.records[0].width;var H=a(z[0].cell).position();var N=H.left;var M=H.top+P;var q=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(z[z.length-1].date,L.timeZone));var E=new a.jqx.date(z[0].date,L.timeZone);if(L.rtl){var q=a.jqx.scheduler.utilities.getEndOfDay(new a.jqx.date(z[0].date,L.timeZone));var E=new a.jqx.date(z[z.length-1].date,L.timeZone);var H=a(z[z.length-1].cell).position();var N=H.left;var M=H.top+P;var F=a(z[0].cell).position().left;var c=F-a(z[z.length-1].cell).position().left+L.columns.records[0].width}var W={cells:z,cellY:parseInt(H.top),cellX:parseInt(H.left),lastCellY:parseInt(H.top),lastCellX:F,x:N,y:M,height:e,width:c,appointment:s,from:E,to:q};D.push(W);B.push(W)}s.elements=D;if(s.rootAppointment){s.rootAppointment.elements=s.rootAppointment.elements.concat(s.elements)}}var A=this.getViewStart();var O=this.getViewEnd();if(this._resources.length<2||this.resources.orientation=="none"){var U=new Array();var g=A;var I=0;while(g<O){U[I]=new Array();for(var R=0;R<B.length;R++){var t=B[R];if(g<=t.from&&t.to<g.addDays(7)){t.row=-1;t.rowSpan=1;U[I].push(t)}}I++;g=g.addDays(7)}for(var R=0;R<U.length;R++){if(U[R].length>0){this._renderUIMonthAppointments(U[R])}}}else{for(var Q=0;Q<this._resources.length;Q++){var J=this._resources[Q];var h=new Array();var U=new Array();var g=A;var I=0;while(g<O){U[I]=new Array();for(var R=0;R<B.length;R++){var t=B[R];if(g<=t.from&&t.to<g.addDays(7)){t.row=-1;t.rowSpan=1;if(t.appointment.resourceId==J){U[I].push(t)}}}I++;g=g.addDays(7)}for(var R=0;R<U.length;R++){if(U[R].length>0){this._renderUIMonthAppointments(U[R])}}}}},_renderUIMonthAppointments:function(ag){var R=this._views[this._view];var C=ag;var w=this.getViewStart();var X=this.getViewEnd();var B=1;var T=this;B=this.getMaxMonthAppointments(ag);var h=T.appointmentsMinHeight;if(T.isTouchDevice()){h=T.touchAppointmentsMinHeight}if(R.appointmentHeight){h=R.appointmentHeight}for(var af=0;af<ag.length;af++){var g=ag[af];g.row=-1;var e=this.getCollisionAppointments(g,ag);e.sort(this._sortAppointmentsByFrom);var t=e.indexOf(g);if(t>=0){for(var aa=t;aa<e.length;aa++){e[aa].row=-1}}for(var ac=0;ac<B;ac++){var o=ac;for(var L in e){if(L=="indexOf"){break}var P=e[L];if(P.row==-1&&!this.isBusyRow(o,e)){P.row=o;var ad=B;var d=this.getMaxMonthAppointments(e);if(ad>d){ad=d}P.rowsCount=ad}}}}for(var ac=0;ac<C.length;ac++){var g=C[ac];var e=this.getCollisionAppointments(g,C);e.sort(this._sortAppointmentsByFrom);var n=1;for(var L in e){if(L=="indexOf"){break}var F=e[L];n=Math.max(n,F.rowsCount)}for(var L in e){if(L=="indexOf"){break}var F=e[L];F.rowsCount=n}if(e.length==1){g.rowSpan=n}else{var z=0;var f=true;for(var aa=g.row;aa<n;aa++){for(var L in e){if(L=="indexOf"){break}var P=e[L];if(P==g){continue}if(P.row==aa){f=false}}if(!f){break}z++}g.rowSpan=z}}for(var V=0;V<C.length;V++){var U=h;var g=C[V];g.height=U;var y=2+(3+U)*g.row;g.y=g.y+y;g.x+=1;g.width-=5}for(var V=0;V<C.length;V++){var ab=C[V];var E="";var G="auto";var R=this._views[this._view];var q=ab.appointment.from;var aj=ab.appointment.to;if(R.timeRuler&&R.timeRuler.formatString){G=R.timeRuler.formatString}var S=ab.appointment.background;var K=ab.appointment.subject?ab.appointment.subject:"(No Title)";var D=ab.appointment.color;var k=ab.appointment.resourceId;var Y=T.getColors(T._resources.indexOf(k));var Z=" data-resourceId='"+k+"' ";var O=ab.appointment.borderColor;var u=ab.appointment.location;if(u&&u.length>1){u=", "+u}if(!S){S=Y.background}if(!O){O=Y.border}if(!D){D=Y.color}var c=ab.appointment.isRecurrentAppointment();var s=ab.appointment.isException();var ae="";var v=T.toTP("jqx-scheduler-appointment-status");var J="";var I=T.statuses[ab.appointment.status];var l=false;if(I){if(I=="transparent"){l=false}else{J="<div style='background: "+I+"; border-right-color: "+O+"' class='"+v+"'></div>";if(I=="tentative"){v=T.toTP("jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");J="<div style='background-color: "+O+"; border-right-color: "+O+"' class='"+v+"'></div>"}l=true}}var A="";if(T.rtl){var v=T.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status");J="<div style='background: "+I+"; border-left-color: "+O+"' class='"+v+"'></div>";if(I=="tentative"){v=T.toTP("jqx-scheduler-appointment-status-rtl jqx-scheduler-appointment-status jqx-scheduler-appointment-status-stripes");J="<div style='background-color: "+O+"; border-left-color: "+O+"' class='"+v+"'></div>"}A=J;J=""}var N="";var H=K+u;if(T.renderAppointment){var ai=T.renderAppointment({appointment:ab.appointment.boundAppointment,textColor:D,background:S,borderColor:O,html:H,cssClass:"",style:"",width:ab.width,height:ab.height,view:T._views[T._view].type});if(ai){var E=ai.html;if(E!=H){H=E}D=ai.textColor;S=ai.background;O=ai.borderColor;if(ai.cssClass){N=ai.cssClass+" "}if(ai.style!=""){var Y=T.getAppointmentColors(ai.style);S=Y.background;O=Y.border;D=Y.color}}}if(ae===""){if(l){var ae="<div style='white-space:nowrap;' class='"+T.toTP("jqx-scheduler-appointment-content")+"'>"+J+"<div class='"+T.toTP("jqx-scheduler-appointment-inner-content")+"'>"+H+"</div>"+A+"</div>"}else{var ae="<div style='white-space:nowrap;' class='"+T.toTP("jqx-scheduler-appointment-content")+"'><div class='"+T.toTP("jqx-scheduler-appointment-inner-content")+"'>"+H+"</div></div>"}}var ah="";if(T.rtl){ah=T.toTP("jqx-rtl jqx-scheduler-appointment-rtl")+" "}if(s){var i=D.toLowerCase()=="white"?T.toTP("jqx-icon-recurrence-exception-white"):T.toTP("jqx-icon-recurrence-exception");E="<div data-key='"+ab.appointment.id+"'"+Z+"class='"+ah+N+T.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ab.x+"px; top: "+ab.y+"px; width: "+ab.width+"px; line-height: "+ab.height+"px; height: "+ab.height+"px; border-color:"+O+"; color:"+D+"; background:"+S+";'><div class='"+i+"'></div>"+ae+"<div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{if(c){var r=D.toLowerCase()=="white"?T.toTP("jqx-icon-recurrence-white"):T.toTP("jqx-icon-recurrence");E="<div data-key='"+ab.appointment.id+"'"+Z+"class='"+ah+N+T.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ab.x+"px; top: "+ab.y+"px; width: "+ab.width+"px; line-height: "+ab.height+"px; height: "+ab.height+"px; border-color:"+O+"; color:"+D+"; background:"+S+";'><div class='"+r+"'></div>"+ae+"<div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}else{E="<div data-key='"+ab.appointment.id+"'"+Z+"class='"+ah+N+T.toTP("jqx-scheduler-appointment jqx-rc-all")+"' style='position:absolute; z-index: 399; left: "+ab.x+"px; top: "+ab.y+"px; width: "+ab.width+"px; line-height: "+ab.height+"px; height: "+ab.height+"px; border-color:"+O+"; color:"+D+"; background:"+S+";'>"+ae+"<div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-left-resize-indicator")+"'></div><div class='"+T.toTP("jqx-scheduler-appointment-resize-indicator jqx-scheduler-appointment-right-resize-indicator")+"'></div>"}}var M=a(E);M.appendTo(this.table);ab.element=M;if(this.appointmentTooltips){if(!ab.appointment.tooltip){var Q=ab.appointment.subject;if(Q){var u=ab.appointment.location;if(u){Q+="\n"+u}M[0].setAttribute("title",Q)}}else{M[0].setAttribute("title",ab.appointment.tooltip)}}var W=false;a.each(ab.cells,function(){var m=a(this.cell);var j=m.position();if(!m[0].appointments){m[0].appointments=new Array()}m[0].appointments.push({ui:M,appointment:ab});if(ab.y+ab.height+2>=j.top+m.height()){M.css("visibility","hidden");var p=m.find(".jqx-icon-arrow-down");p.show();p[0].mousedown=function(){if(T.openedMonthCellPopup){T.openedMonthCellPopup.remove()}var ak=a("<div></div>");var ap=m.find("div").clone(true);ap.find("span").removeClass().addClass(T.toTP("jqx-icon-close"));ap.find("span")[0].mousedown=function(){ak.remove()};ap.addClass(T.toTP("jqx-widget-header"));ak.addClass(T.toTP("jqx-widget"));ak.addClass(T.toTP("jqx-window"));ak.addClass(T.toTP("jqx-scheduler-month-cell-popup"));ak.addClass(T.toTP("jqx-popup"));var an=a("<div></div>");ak.append(ap);ak.append(an);an.addClass(T.toTP("jqx-widget-content jqx-disableselect"));var am=m.width();var x=5+m.find("div").outerHeight();for(var al=0;al<m[0].appointments.length;al++){var ao=m[0].appointments[al].ui.clone(true);ao.css("left","3px");ao.css("top","0px");ao.css("margin-top","2px");ao.css("position","relative");ao.css("visibility","visible");ao.width(am-6);x+=ao.outerHeight()+4;an.append(ao)}ak.css("overflow","hidden");ak.css("position","absolute");ak.height(x);ak.width(am);ak.css("z-index","999999");ak.css("top",j.top);ak.css("left",j.left);T.table.append(ak);T.openedMonthCellPopup=ak}}})}},_sortByDate:function(c,f){var e=c.getAttribute("data-date");e=this._getDateByString(e);var d=f.getAttribute("data-date");d=this._getDateByString(d);if(e<d){return -1}if(e>d){return 1}if(e==d){return 0}},_sortAppointmentsByFrom:function(c,g){if(c.from==g.from){var e=c.to-c.from;var f=e*10000;var e=g.to-g.from;var d=e*10000;if(f>d){return -1}}if(c.from<g.from){return -1}if(c.from>g.from){return 1}if(c.from==g.from){return 0}},_sortAppointmentsByResourceId:function(c,g,f){var e=f._resources.indexOf(c.resourceId);var d=f._resources.indexOf(g.resourceId);if(e==d){return 0}if(e<d){return -1}if(e>d){return -1}},isBusyRow:function(f,e){for(var d=0;d<e.length;d++){var c=e[d];if(c.row==f){return true}}return false},isBusyColumn:function(f,e){for(var d=0;d<e.length;d++){var c=e[d];if(c.column==f){return true}}return false},getMaxTimelineAppointments:function(d,t,g,f){if(d.length==0){return 1}var j=this;var u=j._views[j._view].type;var k=j._views[j._view];var l=1;var n=g;var v=f;var r=this.getMinutesPerScale();var o=null;var s=null;var x="";for(var h in d){if(h=="indexOf"){break}var e=d[h];if(!o){o=e.from}if(!s){s=e.to}o=Math.min(e.from,o);s=Math.max(e.to,s);x+=e.appointment.id}x+=o;x+=s;if(t[x]){return t[x]}o=new a.jqx.date(o,j.timeZone);s=new a.jqx.date(s,j.timeZone);var n=o;while(o<s){var q=n;if(u==="timelineMonthView"){var c=q.addDays(1)}else{var c=q.addMinutes(r)}var p=0;for(var h in d){if(h=="indexOf"){break}var e=d[h];var i=e.from;var w=e.to;var m=a.jqx.scheduler.utilities.rangeIntersection(q,c,i,w);if(m){p++}}l=Math.max(p,l);if(u==="timelineMonthView"){n=n.addDays(1,false)}else{n=n.addMinutes(r,false)}}t[x]=l;return l},getMaxMonthAppointments:function(h){var j=this._views[this._view].type;var m=this._views[this._view];if(h.length==0){return 1}var p=1;var i=this.getViewStart().clone();var f=this.getViewEnd();while(i<f){var k=i;var l=a.jqx.scheduler.utilities.getEndOfDay(k);var o=0;for(var g in h){if(g=="indexOf"){break}var c=h[g];var e=c.from;var d=c.to;var n=a.jqx.scheduler.utilities.rangeIntersection(k,l,e,d);if(n){o++}}p=Math.max(o,p);i=i.addDays(1,false)}return p},getMaxAllDayAppointments:function(f){var k=this._views[this._view].type;var m=this._views[this._view];var g=this;if(f.length==0){return 1}var o=function(s){var z=1;var t=g.getViewStart();var q=g.getViewEnd();while(t<q){var u=t;var v=a.jqx.scheduler.utilities.getEndOfDay(u);var y=0;for(var r in s){if(r=="indexOf"){break}var i=s[r];var w=i;if(i.appointment){w=i.appointment}if(w.hidden==true){continue}if(!w.duration){continue}if(w.allDay||w.duration().days()>=1){var p=i.from;var j=i.to;var x=a.jqx.scheduler.utilities.rangeIntersection(u,v,p,j);if(x){y++}}}z=Math.max(y,z);t=t.addDays(1,false)}return z};if(this._resources.length<2||(!this.resources.orientation||this.resources.orientation=="none")){var n=o(f)}else{var l=1;for(var d=0;d<this._resources.length;d++){var c=this._resources[d];var h=new Array();for(var e=0;e<f.length;e++){if(f[e].appointment&&f[e].appointment.resourceId==c){h.push(f[e])}else{if(f[e].resourceId!=undefined&&f[e].resourceId==c){h.push(f[e])}}}var n=o(h);l=Math.max(l,n)}n=l}return n},getMinutesPerScale:function(){var c=this._views[this._view].type;var e=this._views[this._view];var d=30;var f="halfHour";if(e.timeRuler&&e.timeRuler.scale){f=e.timeRuler.scale}switch(f){case"sixtyMinutes":case"hour":d=60;break;case"thirdyMinutes":case"halfHour":d=30;break;case"fifteenMinutes":case"quarterHour":d=15;break;case"tenMinutes":d=10;break;case"fiveMinutes":d=5;break}return d},getMaxColumnsInADay:function(l){var n=this._views[this._view].type;var q=this._views[this._view];var f=30;var d="halfHour";if(q.timeRuler&&q.timeRuler.scale){d=q.timeRuler.scale}switch(d){case"sixtyMinutes":case"hour":f=60;break;case"thirdyMinutes":case"halfHour":f=30;break;case"fifteenMinutes":case"quarterHour":f=15;break;case"tenMinutes":f=10;break;case"fiveMinutes":f=5;break}if(l.length==0){return 1}var e=1;var m=l[0].from.clone();var j=m.addMinutes(f);var i=a.jqx.scheduler.utilities.getEndOfDay(m);while(m<i){var p=m;var o=j;var s=0;for(var k in l){if(k=="indexOf"){break}var c=l[k];if(!c.from&&!c.to){continue}var h=c.from;var g=c.to;var r=a.jqx.scheduler.utilities.rangeIntersection(p,o,h,g);if(r){s++}}e=Math.max(s,e);m=m.addMinutes(f,false);j=j.addMinutes(f,false)}return e},getTouches:function(c){return a.jqx.mobile.getTouches(c)},_updatecolumnwidths:function(){var i=this;var k=this._hostWidth;var c=k;if(this.vScrollBar.css("visibility")!=="hidden"){k-=parseInt(this.scrollBarSize)+6;if(this.rtl){k+=3}c=k}var j="";if(this.columns==undefined||this.columns.records==undefined){return}var i=this;var h=false;a.each(this.columns.records,function(l,m){if(!(this.hidden)){if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){var m=0;var n=i.vScrollBar[0].style.visibility=="hidden"?0:i.scrollBarSize+5;m=parseFloat(this.width)*c/100;if(this._percentagewidth!=undefined){m=parseFloat(this._percentagewidth)*(c)/100}if(m<this.minwidth&&this.minwidth!="auto"){m=this.minwidth}if(m>this.maxwidth&&this.maxwidth!="auto"){m=this.maxwidth}k-=Math.round(m)}else{if(this.width!="auto"&&!this._width){k-=this.width}else{j+=this.text}}}});var f=this.columnsheader.find("#columntable"+this.element.id);if(f.length==0){return}var d=0;var g=f.find(".jqx-grid-column-header");var e=0;a.each(this.columns.records,function(o,t){var m=this.element;var w=false;var v=this.width;var q=this.width;if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined){v=parseFloat(this._percentagewidth)*c/100}else{v=parseFloat(this.width)*c/100}v=Math.round(v);w=true}if(this.width!="auto"&&!this._width&&!w){if(parseInt(m[0].style.width)!=this.width){m.width(this.width)}}else{if(w){if(v<this.minwidth&&this.minwidth!="auto"){v=this.minwidth;this.width=v}if(v>this.maxwidth&&this.maxwidth!="auto"){v=this.maxwidth;this.width=v}if(parseInt(m[0].style.width)!=v){m.width(v);this.width=v}}else{var n=i.columns.records.length;var p=i._views[i._view].type;if(p==="dayView"||p==="weekView"){var r=i._views[i._view];if(r.timeRuler){if(r.timeRuler.timeZones){n-=r.timeRuler.timeZones.length}n--}else{n--}}var l=Math.floor(k*(1/n));if(i.resources&&i.resources.resourceColumnWidth&&i.resources.resourceColumnWidth!="auto"){l=i.resources.resourceColumnWidth}else{if(i.resources&&i.resources.resourceColumnWidth&&i.resources.resourceColumnWidth=="auto"){if(i.resources.orientation=="horizontal"){l=Math.round((2+k)*(1/i._getColumnsLengthPerView()))}}}var s=(k*(1/n))-l;d+=s;if(d>=1){d-=1;l++}if(d>=0.5&&o==i.columns.records.length-1){l++}if(l<0){var u=a("<span>"+this.text+"</span>");a(document.body).append(u);l=10+u.width();u.remove()}if(l<this.minwidth){l=this.minwidth}if(l>this.maxwidth){l=this.maxwidth}this._width="auto";this.width=l;m.width(this.width)}}if(parseInt(m[0].style.left)!=e){m.css("left",e)}if(!(this.hidden)){e+=this.width}this._requirewidthupdate=true;if(q!==this.width){h=true}});this.columnsheader.width(2+e);f.width(this.columnsheader.width());this._resizecolumnGroups();if(h){this._renderrows()}},_rendercolumnheaders:function(){var h=this;if(this._updating){return}var m=this._views[this._view];this._columnsbydatafield=new Array();this.columnsheader.find("#columntable"+this.element.id).remove();var i=a('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array();var s=0;var e=0;var o="";var q=this._hostWidth;if(!q){this._hostWidth=this.host.width()}var v=this._hostWidth;var n=v;var w=this.getRows().length;var u=this.rowsHeight;if(this.isTouchDevice()){u=this.touchRowsHeight}if(w*u>this.host.height()){this.vScrollBar[0].style.visibility="inherit"}if(this.vScrollBar.css("visibility")!=="hidden"){v-=parseInt(this.scrollBarSize)+6;if(this.rtl){v+=3}n=v}var r=new Array();a.each(this.columns.records,function(j,k){if(!(this.hidden)){if(this.width!="auto"&&!this._width){if(this.width<this.minwidth&&this.minwidth!="auto"){v-=this.minwidth}else{if(this.width>this.maxwidth&&this.maxwidth!="auto"){v-=this.maxwidth}else{if(this.width.toString().indexOf("%")!=-1){var k=0;k=parseFloat(this.width)*n/100;if(k<this.minwidth&&this.minwidth!="auto"){k=this.minwidth}if(k>this.maxwidth&&this.maxwidth!="auto"){k=this.maxwidth}v-=k}else{if(typeof this.width=="string"){this.width=parseInt(this.width)}v-=this.width}}}}else{o+=this.text}}r[r.length]=this});if(this.rtl){for(var t=0;t<r.length;t++){this.columns.replace(t,r[t])}}var g=this.headerZIndex;var l=0;var f=h.columnsHeight;var c=function(k,x){var j=h.columnGroupslevel*h.columnsHeight;j=j-(x.level*h.columnsHeight);return j};var p=0;var d=document.createDocumentFragment();a.each(this.columns.records,function(D,I){this.height=h.columnsHeight;if(h.columnGroups){if(h.columnGroups.length){this.height=c(this.datafield,this);f=this.height}}var y=h.toTP("jqx-grid-column-header")+" "+h.toTP("jqx-widget-header");if(h.rtl){y+=" "+h.toTP("jqx-grid-column-header-rtl")}if(!h.enableBrowserSelection){y+=" "+h.toTP("jqx-disableselect")}var E=!h.rtl?g--:g++;var k=document.createElement("div");k.setAttribute("role","columnheader");k.style.position="absolute";k.style.zIndex=E;k.style.height="100%";k.className=y;var z=a(k);if(h.rtl&&D===0){z[0].style.borderLeftColor="transparent"}if(h.columnGroups){z[0].style.height=f+"px";z[0].style.bottom="0px"}else{if(!this.timeColumn){z[0].style.height=-1+f+"px"}}this.uielement=z;this.element=z;if(this.classname!=""&&this.classname){z.addClass(this.classname)}var J=this.width;var K=false;if(this.width===null){this.width="auto"}if(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined){if(this._percentagewidth!=undefined){J=parseFloat(this._percentagewidth)*n/100}else{J=parseFloat(this.width)*n/100}J=Math.round(J);K=true}if(this.width!="auto"&&!this._width&&!K){if(J<this.minwidth&&this.minwidth!="auto"){J=this.minwidth}if(J>this.maxwidth&&this.maxwidth!="auto"){J=this.maxwidth}z[0].style.width=parseInt(J)+"px"}else{if(K){if(J<this.minwidth&&this.minwidth!="auto"){J=this.minwidth}if(J>this.maxwidth&&this.maxwidth!="auto"){J=this.maxwidth}if(this._percentagewidth==undefined||this.width.toString().indexOf("%")!=-1){this._percentagewidth=this.width}z.width(J);this.width=J}else{var A=h.columns.records.length;var C=h._views[h._view].type;if(C==="dayView"||C==="weekView"){var G=h._views[h._view];if(G.timeRuler){if(G.timeRuler.timeZones){A-=G.timeRuler.timeZones.length}A--}else{A--}}var j=Math.floor(v*(1/A));if(h.resources&&h.resources.resourceColumnWidth&&h.resources.resourceColumnWidth!="auto"){j=h.resources.resourceColumnWidth}else{if(h.resources&&h.resources.resourceColumnWidth&&h.resources.resourceColumnWidth=="auto"){if(h.resources.orientation=="horizontal"){j=Math.round((2+v)*(1/h._getColumnsLengthPerView()))}}}var H=(v*(1/A))-j;p+=H;if(p>=1){p-=1;j++}if(p>=0.5&&D==h.columns.records.length-1){j++}if(isNaN(j)){j=this.minwidth}if(j<0){$element=a("<span>"+this.text+"</span>");a(document.body).append($element);j=10+$element.width();$element.remove()}if(j<this.minwidth){j=this.minwidth}if(j>this.maxwidth){j=this.maxwidth}this._width="auto";this.width=parseInt(j);J=this.width;z.width(this.width)}}if(this.timeColumn){z.css("border-bottom-color","transparent");if(m.timeRuler&&m.timeRuler.timeZones){if(D<m.timeRuler.timeZones.length){z.css("border-right-color","transparent")}}if(this.tableRows==1){z.addClass(h.toTP("jqx-scheduler-time-column"))}}if(this.hidden){z.css("display","none")}var x=a(z.children()[0]);i[0].cells[D]=z[0];var B=h._rendercolumnheader(this.text,this.align,f,h);z[0].innerHTML=B;d.appendChild(z[0]);var F=this;z[0].style.left=e+"px";if(!(this.hidden)){e+=J}});i[0].appendChild(d);if(e>0){this.columnsheader[0].style.width=2+e+"px"}else{this.columnsheader[0].style.width=e+"px"}this._columnswidth=e;this.columnsrow=i;h.columnsheader.append(i);i[0].style.width=e+"px";if(this.columnGroups){this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(!this.columnGroups){return}var s=this.headerZIndex+this.columns.records.length;var n=this;var g=n.toTP("jqx-grid-column-header")+" "+n.toTP("jqx-grid-columngroup-header")+" "+n.toTP("jqx-widget-header");if(n.rtl){g+=" "+n.toTP("jqx-grid-columngroup-header-rtl")}var e=this.columnsheader.find("#columntable"+this.element.id);e.find("jqx-grid-columngroup-header").remove();for(var h=0;h<this.columnGroupslevel-1;h++){for(var l=0;l<this.columnGroups.length;l++){var p=this.columnGroups[l];var c=p.level;if(c!==h){continue}var o=c*this.columnsHeight;var d=99999;if(p.groups){var r=function(v){var u=0;for(var t=0;t<v.groups.length;t++){var i=v.groups[t];if(!i.groups){if(!i.hidden){u+=i.width;d=Math.min(parseInt(i.element[0].style.left),d)}}else{u+=r(i)}}return u};p.width=r(p);p.left=d;var q=this.columnsHeight;var m=s--;var f=a('<div role="columnheader" style="z-index: '+m+';position: absolute;" class="'+g+'"></div>');var k=a(this._rendercolumnheader(p.text,p.align,this.columnsHeight,this));if(p.renderer){p.renderer(f,p.text)}f.append(k);f[0].style.left=d+"px";if(d===0){f[0].style.borderLeftColor="transparent"}f[0].style.top=o+"px";f[0].style.height=q+"px";f[0].style.width=-1+p.width+"px";e.append(f);p.element=f}}}},_resizecolumnGroups:function(){if(!this.columnGroups){return}for(var d=0;d<this.columnGroups.length;d++){var j=this.columnGroups[d];var k=j.level;var h=k*this.columnsHeight;var g=99999;if(j.groups){var f=function(n){var m=0;for(var l=0;l<n.groups.length;l++){var i=n.groups[l];if(!i.groups){m+=i.width;g=Math.min(parseInt(i.element[0].style.left),g)}else{m+=f(i)}}return m};j.width=f(j);j.left=g;var c=this.columnsHeight;var e=j.element;e[0].style.left=g+"px";e[0].style.top=h+"px";e[0].style.height=c+"px";e[0].style.width=-1+j.width+"px"}}},_removecolumnhandlers:function(f){var d=this;var c=a(f.element);if(c.length>0){d.removeHandler(c,"mouseenter");d.removeHandler(c,"mouseleave");var e=a(f.filtericon);d.removeHandler(e,"mousedown");d.removeHandler(e,"click");d.removeHandler(c,"click")}},destroy:function(){var c=this;c._removeHandlers();if(c.editDialog){c.editDialog.jqxWindow("destroy")}if(c.menu){c.menu.jqxMenu("destroy")}c.editRecurrenceDialog.jqxWindow("destroy");c.vScrollBar.jqxScrollBar("destroy");c.hScrollBar.jqxScrollBar("destroy");delete c.vScrollBar;delete c.hScrollBar;delete c._mousewheelfunc;a.jqx.utilities.resize(c.host,null,true);c.host.remove()},propertyChangedHandler:function(c,d,f,e){if(this.isInitialized==undefined||this.isInitialized==false){return}if(e!==f){if(d=="filterable"){c._render()}else{if(d==="height"){c.host.height(c.height);c.host.width(c.width);c._updatesize(false,true)}else{if(d==="width"){c.host.height(c.height);c.host.width(c.width);c._updatesize(true,false)}else{if(d==="source"){c.updateBoundData()}else{if(d=="resources"){c.updateBoundData()}else{if(d==="columns"||d==="columnGroups"){c._columns=null;c._render()}else{if(d==="selectionMode"){c.selectionMode=e.toLowerCase()}else{if(d=="touchMode"){c._removeHandlers();c.touchDevice=null;c.vScrollBar.jqxScrollBar({touchMode:e});c.hScrollBar.jqxScrollBar({touchMode:e});c.refresh();c._addHandlers()}else{if(d=="enableHover"){return}else{if(d=="disabled"){if(e){c.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"))}else{c.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))}c.host.find(".jqx-grid-group-collapse").css("cursor",e?"default":"pointer");c.host.find(".jqx-grid-group-expand").css("cursor",e?"default":"pointer")}else{if(d=="columnsHeight"){c._render()}else{if(d=="theme"){a.jqx.utilities.setTheme(f,e,c.host);if(c.editDialog){a.jqx.utilities.setTheme(f,e,c.editDialog)}if(c.editRecurrenceDialog){a.jqx.utilities.setTheme(f,e,c.editRecurrenceDialog)}if(c.menu){c.menu.jqxMenu({theme:c.theme})}c.vScrollBar.jqxScrollBar({theme:c.theme});c.hScrollBar.jqxScrollBar({theme:c.theme});c.refresh()}else{c.refresh()}}}}}}}}}}}}}},_rendercolumnheader:function(h,i,e,f){var g="4px";if(f.columnGroups){g=(e/2-this._columnheight/2);if(g<0){g=4}g+="px"}else{if(this.columnsHeight!=25){g=(this.columnsHeight/2-this._columnheight/2);if(g<0){g=4}g+="px"}}var d='<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+i+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+g+"; margin-top: "+g+';"><span style="text-overflow: ellipsis; cursor: default;">'+h+"</span></div>";if(this.columnRenderer){var c=this.columnRenderer(h,i,e,d);if(c!=undefined){return c}}return d}});function b(c,d){this.owner=c;this.datafield=null;this.displayfield=null;this.text="";this.sortable=true;this.editable=true;this.hidden=false;this.hideable=true;this.groupable=true;this.renderer=null;this.cellsRenderer=null;this.columntype=null;this.cellsFormat="";this.align="center";this.cellsalign="center";this.width="auto";this.minwidth=60;this.maxwidth="auto";this.pinned=false;this.visibleindex=-1;this.filterable=true;this.filter=null;this.resizable=true;this.draggable=true;this.initeditor=null;this.createeditor=null;this.destroyeditor=null;this.geteditorvalue=null;this.autoCellHeight=true;this.validation=null;this.classname="";this.cellclassname="";this.rendered=null;this.exportable=true;this.nullable=true;this.columngroup=null;this.columntype="textbox";this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,f){if(this[e]){var g=this[e];this[e]=f;this.owner._columnPropertyChanged(this,e,f,g)}else{if(this[e.toLowerCase()]){var g=this[e.toLowerCase()];this[e.toLowerCase()]=f;this.owner._columnPropertyChanged(this,e.toLowerCase(),f,g)}}};this._initfields=function(f){if(f!=null){var e=this;if(a.jqx.hasProperty(f,"dataField")){this.datafield=a.jqx.get(f,"dataField")}if(a.jqx.hasProperty(f,"displayField")){this.displayfield=a.jqx.get(f,"displayField")}else{this.displayfield=this.datafield}if(a.jqx.hasProperty(f,"columnType")){this.columntype=a.jqx.get(f,"columnType")}if(a.jqx.hasProperty(f,"validation")){this.validation=a.jqx.get(f,"validation")}if(a.jqx.hasProperty(f,"autoCellHeight")){this.autoCellHeight=a.jqx.get(f,"autoCellHeight")}if(a.jqx.hasProperty(f,"text")){this.text=a.jqx.get(f,"text")}else{this.text=this.displayfield}if(a.jqx.hasProperty(f,"sortable")){this.sortable=a.jqx.get(f,"sortable")}if(a.jqx.hasProperty(f,"hidden")){this.hidden=a.jqx.get(f,"hidden")}if(a.jqx.hasProperty(f,"groupable")){this.groupable=a.jqx.get(f,"groupable")}if(a.jqx.hasProperty(f,"renderer")){this.renderer=a.jqx.get(f,"renderer")}if(a.jqx.hasProperty(f,"align")){this.align=a.jqx.get(f,"align")}if(a.jqx.hasProperty(f,"cellsAlign")){this.cellsalign=a.jqx.get(f,"cellsAlign")}if(a.jqx.hasProperty(f,"cellsFormat")){this.cellsFormat=a.jqx.get(f,"cellsFormat")}if(a.jqx.hasProperty(f,"width")){this.width=a.jqx.get(f,"width")}if(a.jqx.hasProperty(f,"minWidth")){this.minwidth=a.jqx.get(f,"minWidth")}if(a.jqx.hasProperty(f,"maxWidth")){this.maxwidth=a.jqx.get(f,"maxWidth")}if(a.jqx.hasProperty(f,"cellsRenderer")){this.cellsRenderer=a.jqx.get(f,"cellsRenderer")}if(a.jqx.hasProperty(f,"columnType")){this.columntype=a.jqx.get(f,"columnType")}if(a.jqx.hasProperty(f,"pinned")){this.pinned=a.jqx.get(f,"pinned")}if(a.jqx.hasProperty(f,"filterable")){this.filterable=a.jqx.get(f,"filterable")}if(a.jqx.hasProperty(f,"filter")){this.filter=a.jqx.get(f,"filter")}if(a.jqx.hasProperty(f,"resizable")){this.resizable=a.jqx.get(f,"resizable")}if(a.jqx.hasProperty(f,"draggable")){this.draggable=a.jqx.get(f,"draggable")}if(a.jqx.hasProperty(f,"editable")){this.editable=a.jqx.get(f,"editable")}if(a.jqx.hasProperty(f,"initEditor")){this.initeditor=a.jqx.get(f,"initEditor")}if(a.jqx.hasProperty(f,"createEditor")){this.createeditor=a.jqx.get(f,"createEditor")}if(a.jqx.hasProperty(f,"destroyEditor")){this.destroyeditor=a.jqx.get(f,"destroyEditor")}if(a.jqx.hasProperty(f,"getEditorValue")){this.geteditorvalue=a.jqx.get(f,"getEditorValue")}if(a.jqx.hasProperty(f,"className")){this.classname=a.jqx.get(f,"className")}if(a.jqx.hasProperty(f,"cellClassName")){this.cellclassname=a.jqx.get(f,"cellClassName")}if(a.jqx.hasProperty(f,"rendered")){this.rendered=a.jqx.get(f,"rendered")}if(a.jqx.hasProperty(f,"exportable")){this.exportable=a.jqx.get(f,"exportable")}if(a.jqx.hasProperty(f,"nullable")){this.nullable=a.jqx.get(f,"nullable")}if(a.jqx.hasProperty(f,"columnGroup")){this.columngroup=a.jqx.get(f,"columnGroup")}if(!f instanceof String&&!(typeof f=="string")){for(var g in f){if(!e.hasOwnProperty(g)){if(!e.hasOwnProperty(g.toLowerCase())){c.host.remove();throw new Error("jqxScheduler: Invalid property name - "+g+".")}}}}}};this._initfields(d);return this}a.jqx.dataCollection=function(c){this.records=new Array();this.owner=c;this.updating=false;this.beginUpdate=function(){this.updating=true};this.resumeupdate=function(){this.updating=false};this.clear=function(){this.records=new Array()};this.replace=function(e,d){this.records[e]=d};this.isempty=function(d){if(this.records[d]==undefined){return true}return false};this.initialize=function(d){if(d<1){d=1}this.records[d-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(d){return this.records.indexOf(d)};this.add=function(d){if(d==null){return false}this.records[this.records.length]=d;return true};this.insertAt=function(e,d){if(e==null||e==undefined){return false}if(d==null){return false}if(e>=0){if(e<this.records.length){this.records.splice(e,0,d);return true}else{return this.add(d)}}return false};this.remove=function(e){if(e==null||e==undefined){return false}var d=this.records.indexOf(e);if(d!=-1){this.records.splice(d,1);return true}return false};this.removeAt=function(e){if(e==null||e==undefined){return false}if(e<0){return false}if(e<this.records.length){var d=this.records[e];this.records.splice(e,1);return true}return false};return this};a.jqx.scheduler.dataView=function(c){this.that=this;this.scheduler=null;this.records=[];this.rows=[];this.columns=[];this.filters=new Array();this.pagesize=0;this.pagenum=0;this.source=null;this.databind=function(q,l){var g=this;if(a.isArray(q)){g.update(q);return}var p=q._source?true:false;var f=null;this._sortData=null;this._sortHierarchyData=null;if(p){f=q;q=q._source}else{f=new a.jqx.dataAdapter(q,{autoBind:false})}var d=function(m){f.recordids=[];f.records=new Array();f.cachedrecords=new Array();f.originaldata=new Array();f._options.totalrecords=m.totalrecords;f._options.originaldata=m.originaldata;f._options.recordids=m.recordids;f._options.cachedrecords=new Array();f._options.pagenum=m.pagenum;f._options.pageable=m.pageable;if(q.type!=undefined){f._options.type=q.type}if(q.formatdata!=undefined){f._options.formatData=q.formatdata}if(q.contenttype!=undefined){f._options.contentType=q.contenttype}if(q.async!=undefined){f._options.async=q.async}if(q.updaterow!=undefined){f._options.updaterow=q.updaterow}if(q.addrow!=undefined){f._options.addrow=q.addrow}if(q.deleterow!=undefined){f._options.deleterow=q.deleterow}if(m.pagesize==0){m.pagesize=10}f._options.pagesize=m.pagesize};var s=function(m){m.originaldata=f.originaldata;m.records=f.records;m.hierarchy=f.hierarchy;if(!m.scheduler.serverProcessing){m._sortData=null;m._sortfield=null;m._filteredData=null;m._sortHierarchyData=null}if(!m.hierarchy){m.hierarchy=new Array();f.hierarchy=new Array()}if(f._source.totalrecords){m.totalrecords=f._source.totalrecords}else{if(f._source.totalRecords){m.totalrecords=f._source.totalRecords}else{if(m.hierarchy.length!==0){m.totalrecords=m.hierarchy.length}else{m.totalrecords=m.records.length}}}m.cachedrecords=f.cachedrecords};d(this);this.source=q;if(l!==undefined){uniqueId=l}var g=this;switch(q.datatype){case"local":case"array":default:if(q.localdata==null){q.localdata=[]}if(q.localdata!=null){f.unbindBindingUpdate(c+g.scheduler.element.id);if((!g.scheduler.autoBind&&g.scheduler.isInitialized)||g.scheduler.autoBind){f.dataBind()}var k=function(){s(g);g.update(f.records)};k();f.bindBindingUpdate(c+g.scheduler.element.id,k)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(q.localdata!=null){f.unbindBindingUpdate(c+g.scheduler.element.id);if((!g.scheduler.autoBind&&g.scheduler.isInitialized)||g.scheduler.autoBind){f.dataBind()}var k=function(m){s(g);g.update(f.records)};k();f.bindBindingUpdate(c+g.scheduler.element.id,k);return}var t={};var o=0;var u={};for(var i=0;i<this.filters.length;i++){var e=this.filters[i].datafield;var j=this.filters[i].filter;var h=j.getfilters();u[e+"operator"]=j.operator;for(var r=0;r<h.length;r++){h[r].datafield=e;var n=h[r].value;u["filtervalue"+o]=n.toString();u["filtercondition"+o]=h[r].condition;u["filteroperator"+o]=h[r].operator;u["filterdatafield"+o]=e;o++}}u.filterslength=o;a.extend(u,{sortdatafield:g.sortfield,sortorder:g.sortfielddirection,pagenum:g.pagenum,pagesize:g.scheduler.pageSize});var v=f._options.data;if(f._options.data){a.extend(f._options.data,u)}else{if(q.data){a.extend(u,q.data)}f._options.data=u}var k=function(){var w=a.jqx.browser.msie&&a.jqx.browser.version<9;var x=function(){s(g);g.update(q.records)};if(w){try{x()}catch(m){}}else{x()}};f.unbindDownloadComplete(c+g.scheduler.element.id);f.bindDownloadComplete(c+g.scheduler.element.id,k);f._source.loaderror=function(x,m,w){k()};if((!g.scheduler.autoBind&&g.scheduler.isInitialized)||g.scheduler.autoBind){f.dataBind()}f._options.data=v}};this.addFilter=function(g,f){this._sortData=null;this._sortHierarchyData=null;var e=-1;for(var d=0;d<this.filters.length;d++){if(this.filters[d].datafield==g){e=d;break}}if(e==-1){this.filters[this.filters.length]={filter:f,datafield:g}}else{this.filters[e]={filter:f,datafield:g}}};this.removeFilter=function(e){this._sortData=null;this._sortHierarchyData=null;for(var d=0;d<this.filters.length;d++){if(this.filters[d].datafield==e){this.filters.splice(d,1);break}}};this._compare=function(e,d,g){var e=e;var d=d;if(e===undefined){e=null}if(d===undefined){d=null}if(e===null&&d===null){return 0}if(e===null&&d!==null){return 1}if(e!==null&&d===null){return 1}e=e.toString();d=d.toString();if(a.jqx.dataFormat){if(g&&g!=""){switch(g){case"number":case"int":case"float":if(e<d){return -1}if(e>d){return 1}return 0;case"date":case"time":if(e<d){return -1}if(e>d){return 1}return 0;case"string":case"text":e=String(e).toLowerCase();d=String(d).toLowerCase();break}}else{if(a.jqx.dataFormat.isNumber(e)&&a.jqx.dataFormat.isNumber(d)){if(e<d){return -1}if(e>d){return 1}return 0}else{if(a.jqx.dataFormat.isDate(e)&&a.jqx.dataFormat.isDate(d)){if(e<d){return -1}if(e>d){return 1}return 0}else{if(!a.jqx.dataFormat.isNumber(e)&&!a.jqx.dataFormat.isNumber(d)){e=String(e).toLowerCase();d=String(d).toLowerCase()}}}}}try{if(e<d){return -1}if(e>d){return 1}}catch(f){var h=f}return 0};this._equals=function(e,d){return(this._compare(e,d)===0)};this.evaluate=function(m){if(this.scheduler.serverProcessing){return m}var d=new Array();if(this.filters.length){var g=new Array();var l=function(p,t){for(var r=0;r<p.length;r++){var s=p[r];s._visible=true;var n=undefined;for(var q=0;q<this.filters.length;q++){var o=this.filters[q].filter;var u=s[this.filters[q].datafield];var v=o.evaluate(u);if(n==undefined){n=v}else{if(o.operator=="or"){n=n||v}else{n=n&&v}}}s._visible=false;if(n||s.aggregate){s._visible=true;t.push(s);g[s.uid]=s}}};if(!this._filteredData){if(this.source.hierarchy||(this.scheduler.source.hierarchy&&this.scheduler.source.hierarchy.length>0)){var k=new Array();var h=function(o,p){for(var n=0;n<p.length;n++){var q=p[n];k.push(q);if(q.records&&q.records.length>0){h(q,q.records)}}};h(null,m);l.call(this,k,d);for(var e=0;e<d.length;e++){var f=d[e];while(f.parent){var j=f.parent;if(!g[j.uid]){j._visible=true;g[j.uid]=j}f=j}}d=m}else{l.call(this,m,d)}this._filteredData=d;this.rows=d}else{this.rows=this._filteredData}}else{this.rows=m}return this.rows};this.getid=function(k,e,f){if(a(k,e).length>0){return a(k,e).text()}if(this.rows&&k!=""&&k!=undefined&&this.rows.length>0){var j=this.rows[this.rows.length-1][k];if(j==null){j=null}for(var g=1;g<=100;g++){var h=this.scheduler.appointmentsByKey[g+j];if(!h){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var h=this.scheduler.appointmentsByKey["jqx"+j+g];if(h){continue}return"jqx"+j+g}return j+g}}}if(k!=undefined){if(k.toString().length>0){var d=a(e).attr(k);if(d!=null&&d.toString().length>0){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){return"jqx"+d}return d}}}if(this.rows&&this.rows.length>0){var h=this.scheduler.appointmentsByKey[f];if(h){var j=this.rows[this.rows.length-1][k];if(j==null){j=""}for(var g=1;g<=1000;g++){var h=this.scheduler.appointmentsByKey[g+j];if(!h){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var h=this.scheduler.appointmentsByKey["jqx"+j+g];if(h){continue}return"jqx"+j+g}return j+g}}}}if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){var h=this.scheduler.appointmentsByKey["jqx"+f];if(!h){return"jqx"+f}else{for(var g=f+1;g<=100;g++){var h=this.scheduler.appointmentsByKey["jqx"+g];if(!h){var h=this.scheduler.appointmentsByKey["jqx"+g];if(h){continue}return"jqx"+g}}}}return f};this.generatekey=function(){var d=function(){return(((1+Math.random())*16)|0)};return(""+d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d())};return this}})(jqxBaseFramework);